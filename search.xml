<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[SpringMVC+Hibernate4äº‹åŠ¡ä¸æäº¤é—®é¢˜å¤„ç†]]></title>
    <url>%2F2018%2F04%2F09%2FSpring%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[å‰æ®µæ—¶é—´åœ¨æ•´ç†å®žä¹ ç”ŸåŸ¹è®­ææ–™ï¼ŒåŸºäºŽä¸¤ä¸ªå¸¸ç”¨æ¡†æž¶çš„æ¼”ç¤ºå®žä¾‹ã€‚åœ¨æ­å»ºæ¡†æž¶çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†äº‹åŠ¡ä¸æäº¤çš„é—®é¢˜ã€‚ åœ¨å®žé™…å·¥ä½œä¸­ï¼Œæ¯ä¸ªé¡¹ç›®ç»„éƒ½æœ‰è‡ªå·±å¸¸ç”¨çš„å¼€å‘æ¡†æž¶ï¼Œå†åŠ ä¸Šåˆ†å·¥åä½œï¼Œå½“æ–°é¡¹ç›®æ¥çš„æ—¶å€™ï¼Œå¦‚æžœæž¶æž„æ²¡æœ‰ä»€ä¹ˆå¤§çš„å˜åŠ¨ï¼Œå¤šæ•°æ—¶å€™éƒ½æ˜¯ä»ŽåŽŸæœ‰é¡¹ç›®é‡Œç›´æŽ¥æ‹–å‡ºä¸€ä¸ªæ¡†æž¶ã€‚å‰æ®µæ—¶é—´å› å·¥ä½œåŽŸå› åœ¨æ•´ç†å®žä¹ ç”ŸåŸ¹è®­ææ–™ï¼ŒåŸºäºŽSSHå’ŒSSMæ¡†æž¶çš„å®žä¾‹æ¼”ç¤ºï¼Œç”±äºŽæƒ³è¦ä¿æŒå¹²å‡€çš„æ¡†æž¶ç»“æž„ï¼Œæ‰€ä»¥ç‰¹åœ°å¯¹æ¡†æž¶æ¢³ç†äº†ä¸€ç•ªï¼Œå°†å…¬å¸è‡ªå¸¦çš„ä¸€äº›jaråŒ…ã€é…ç½®ç­‰å…¨éƒ¨æ¸…é™¤æŽ‰ã€‚ æ¸…ç†å®ŒåŽï¼Œå¼€å§‹è¿è¡Œé¡¹ç›®ï¼Œè¿è¡Œæ­£å¸¸ï¼ŒäºŽæ˜¯å°±é»˜è®¤æ¡†æž¶æ­å»ºæ­£å¸¸ã€‚ç„¶åŽç€æ‰‹å¼€å§‹ç¼–å†™æ¼”ç¤ºå®žä¾‹ï¼Œåœ¨è¿è¡Œå®žä¾‹ä»£ç è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°äº†äº‹åŠ¡ä¸€ç›´æ— æ³•æäº¤ã€‚ä¸€èˆ¬è¿™ç§æƒ…å†µè‚¯å®šå°±æ˜¯é…ç½®æ–‡ä»¶æ²¡é…ç½®å¥½ï¼Œæ‰€ä»¥ç«‹é©¬å°±åŽ»æ£€æŸ¥Springçš„é…ç½®ï¼Œæ¥å›žæ£€æŸ¥äº†å¥½å‡ éä¹Ÿæ²¡æœ‰å‘çŽ°é—®é¢˜ï¼Œå’Œæ­£å¸¸è¿è¡Œçš„é¡¹ç›®ä¹Ÿåšäº†å¯¹æ¯”ï¼Œä»ç„¶æ²¡å‘çŽ°é—®é¢˜ã€‚é¡¹ç›®ä¸­ä¸€ç›´ä½¿ç”¨çš„AOPè‡ªåŠ¨æ³¨è§£ï¼Œé™¤äº†æ–¹æ³•å‘½åè§„èŒƒéœ€è¦æ³¨æ„ï¼Œé˜²æ­¢æ‰«æä¸åˆ°ï¼Œéœ€è¦æ³¨æ„çš„åœ°æ–¹å¾ˆå°‘ã€‚äºŽæ˜¯æƒ³ç€å…ˆåŽ»æŽ‰AOPè‡ªåŠ¨æ³¨è§£ï¼Œä½¿ç”¨æ‰«æ @Transaction çš„æ–¹å¼ï¼Œå³&lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;/&gt;å‘çŽ°äº‹åŠ¡ä»ç„¶ä¸èƒ½æ­£å¸¸æäº¤ã€‚å¥½å§ðŸ˜‚ï¼Œç»§ç»­æœç´¢èµ„æ–™ã€‚ ä¸‹é¢æ˜¯ä¸€èˆ¬çš„çš„AOPäº‹åŠ¡æ³¨è§£é…ç½®ï¼š12345678910111213141516&lt;bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"&gt; &lt;property name="sessionFactory" ref="sessionFactory" /&gt;&lt;/bean&gt;&lt;tx:advice id="txAdvice" transaction-manager="transactionManager"&gt; &lt;tx:attributes&gt; &lt;tx:method name="list*" read-only="true" /&gt; &lt;tx:method name="save*" propagation="REQUIRED" /&gt; ..... &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;aop:config proxy-target-class="true"&gt; &lt;aop:pointcut expression="execution(public * com.example.sshdemo.service..*.*(..))" id="tranPointcut" /&gt; &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="tranPointcut" order="2" /&gt; &lt;/aop:config&gt; å› ä¸ºåŒæ ·çš„çš„é…ç½®æ”¾åœ¨SpringMVC+MyBatis3æ¡†æž¶é‡Œèƒ½ç”¨ï¼Œå½“æ—¶æ”¾åœ¨SpringMVC+Hibernate4ä¸Šå´ä¸èƒ½ç”¨ï¼Œä¸€æ—¶é—´å°±æ²¡æ‰¾åˆ°æ€è·¯ã€‚åœ¨å’ŒåŒäº‹çš„æ²Ÿé€šä¸­ï¼Œäº†è§£åˆ°å¯èƒ½æ˜¯çˆ¶å­å®¹å™¨å¯¼è‡´çš„é—®é¢˜ï¼ŒäºŽæ˜¯æœè¿™ä¸ªæ–¹å‘åŽ»æœå¯»ç­”æ¡ˆï¼Œæœ€ç»ˆå‘çŽ°å°±æ˜¯çˆ¶å­å®¹å™¨é‡å¤æ‰«æåŒ…å¯¼è‡´çš„ã€‚ spring-context.xmlæ–‡ä»¶é‡Œçš„æ‰«æè·¯å¾„ä¸€èˆ¬é…ç½®åˆ°ä¸»ç›®å½•ï¼Œä¾‹å¦‚ï¼š&lt;context:component-scan base-package=&quot;com.example.sshdemo&quot; /&gt;ï¼Œå…¶ä¸­sshdemoæ˜¯é¡¹ç›®çš„ä¸»ç›®å½•ã€‚ä½†æ˜¯spring-mvc.xmlé‡Œçš„æ‰«æé…ç½®å¿…é¡»è¦æŒ‡å®šåˆ°Controlleræ‰€åœ¨çš„çº§åˆ«ï¼Œåœ¨è¿™é‡Œï¼Œå› ä¸ºControlleréƒ½æ˜¯å®šä¹‰åœ¨com.example.sshdemo.webä¸‹çš„ï¼Œæ‰€ä»¥ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š&lt;context:component-scan base-package=&quot;com.example.sshdemo.web&quot; /&gt;ï¼Œè¿™æ ·é…ç½®åŽäº‹åŠ¡å°±å¯ä»¥æ­£å¸¸æäº¤äº†ã€‚ ä¸‹é¢æ¥å…·ä½“è§£é‡Šä¸‹çˆ¶å­å®¹å™¨çš„é—®é¢˜ï¼šå› ä¸ºSpringæ¡†æž¶ä¸­æœ‰ä¸¤ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡ï¼ŒApplicationContextå’ŒWebApplicationContextï¼Œå®ƒä»¬æ˜¯çˆ¶å­å®¹å™¨ï¼Œå› è€Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿå†²çªã€‚å½“Webåº”ç”¨å¯åŠ¨æ—¶ï¼ŒServletContextListeneré…åˆcontextConfigLocationä¼šå…ˆå¯åŠ¨â€œä¸šåŠ¡å±‚â€çš„Springå®¹å™¨ï¼Œå³çˆ¶å®¹å™¨ã€‚ç„¶åŽåŠ è½½SpringMVCçš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯spring-mvc.xmlæ–‡ä»¶ï¼Œå¯åŠ¨Webå±‚çš„Springå®¹å™¨ï¼Œå³å­å®¹å™¨ã€‚å­å®¹å™¨åœ¨å¯¹Controllerå±‚è¿›è¡Œæ‰«æè£…é…æ—¶å¦‚æžœä¹Ÿæ‰«æäº†Serviceå±‚çš„æ³¨è§£ï¼Œå³@Serviceæ³¨è§£çš„å®žä¾‹ï¼Œé‚£ä¹ˆå°±ä¼šè‡´äº‹åŠ¡æ— æ³•è¢«æ­£ç¡®çš„åŠ è½½è¿›æ¥ã€‚å› ä¸ºäº‹åŠ¡ç®¡ç†å™¨æ˜¯é…ç½®åœ¨çˆ¶å®¹å™¨ä¸­çš„ï¼Œ@Serviceå®žä¾‹æœ¬è¯¥ç”±çˆ¶å®¹å™¨è¿›è¡ŒåŠ è½½ï¼Œè¿™æ ·æ‰èƒ½å¾—ä»¥ä¿è¯äº‹åŠ¡æ‹¥æœ‰å¢žå¼ºå¤„ç†ã€‚å¦‚æžœæ˜¯Webå±‚å®¹å™¨æ‰«æäº†è¯¥æ³¨è§£ï¼Œå› ä¸ºæ²¡èƒ½å¾—åˆ°è¿™äº›äº‹åŠ¡å¢žå¼ºï¼Œå› æ­¤æ²¡æœ‰æ²¡æœ‰äº‹åŠ¡å¤„ç†èƒ½åŠ›ã€‚ PS: SpringMVC+MyBatis3æ²¡æœ‰å‘çŽ°ä¸Šè¿°é—®é¢˜ï¼ŒSpringMVC+Hibernate4å‘çŽ°äº†ä¸Šè¿°é—®é¢˜ã€‚]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
        <tag>Hibernate4</tag>
        <tag>Transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°6-SpringAOPå¢žå¼ºä¸Žåˆ‡é¢]]></title>
    <url>%2F2018%2F02%2F25%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B06-SpringAOP%20%E5%A2%9E%E5%BC%BA%E4%B8%8E%E5%88%87%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†SpringAOPçš„åŸºç¡€çŸ¥è¯†ä»¥åŠæ‰€ä¾èµ–çš„åº•å±‚JavaæŠ€æœ¯ï¼Œæœ¬ç¯‡æ¥è¯´ä¸‹SpringAOPçš„å¢žå¼ºç±»åž‹ä»¥åŠåˆ‡é¢ç±»åž‹ã€‚ SpringAopçš„å¢žå¼ºç±»åž‹AOPè”ç›Ÿä¸ºå¢žå¼ºå®šä¹‰äº†org.aopaliance.aop.AdviceæŽ¥å£ï¼Œä¸‹å›¾ä¸ºå¢žå¼ºæŽ¥å£ç»§æ‰¿å…³ç³»å›¾ï¼š å¸¦ã€Šspringã€‹æ ‡è¯†çš„æŽ¥å£æ˜¯Springæ‰€å®šä¹‰çš„æ‰©å±•å¢žå¼ºæŽ¥å£ï¼›å¸¦ã€Šaopallianceã€‹æ ‡è¯†çš„æŽ¥å£åˆ™æ˜¯AOPè”ç›Ÿå®šä¹‰çš„æŽ¥å£ã€‚æŒ‰ç…§å¢žå¼ºåœ¨ç›®æ ‡ç±»æ–¹æ³•çš„è¿žæŽ¥ç‚¹ä½ç½®ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹5ç±»ï¼š å‰ç½®å¢žå¼ºï¼š org.springframework.aop.BeforeAdviceä»£è¡¨å‰ç½®å¢žå¼ºï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„å¢žå¼ºï¼Œæ‰€ä»¥MethodBeforeAdviceæ˜¯ç›®å‰å¯ç”¨çš„å‰ç½®å¢žå¼ºï¼Œè¡¨ç¤ºåœ¨æ–¹æ³•æ‰§è¡Œå‰å®žæ–½å¢žå¼ºï¼Œè€ŒBeforeAdviceæ˜¯ä¸ºäº†å°†æ¥ç‰ˆæœ¬æ‰©å±•éœ€è¦è€Œå®šä¹‰çš„ï¼› åŽç½®å¢žå¼ºï¼š org.springframework.aop.AfterReturningAdviceä»£è¡¨åŽå¢žå¼ºï¼Œè¡¨ç¤ºåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡ŒåŽå®žæ–½å¢žå¼ºï¼› çŽ¯ç»•å¢žå¼ºï¼š org.springframework.intercept.MethodInterceptorä»£è¡¨çŽ¯ç»•å¢žå¼ºï¼Œè¡¨ç¤ºåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åŽå®žæ–½å¢žå¼ºï¼› å¼‚å¸¸æŠ›å‡ºå¢žå¼ºï¼š org.springframework.aop.ThrowsAdviceä»£è¡¨æŠ›å‡ºå¼‚å¸¸å¢žå¼ºï¼Œè¡¨ç¤ºåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åŽå®žæ–½å¢žå¼ºï¼› å¼•ä»‹å¢žå¼ºï¼š org.springframework.aop.IntroductionInterceptorä»£è¡¨å¼•ä»‹å¢žå¼ºï¼Œè¡¨ç¤ºåœ¨ç›®æ ‡ç±»ä¸­æ·»åŠ ä¸€äº›æ–°çš„æ–¹æ³•å’Œå±žæ€§ã€‚ åœ¨äº†è§£äº†åŸºç¡€ä¿¡æ¯åŽï¼Œä¸‹é¢å°±æ¥åˆ†åˆ«çœ‹ä¸‹å„ç§å¢žå¼ºçš„ç”¨æ³•ã€‚é€šè¿‡ä½¿ç”¨ â€œä¿è¯æœåŠ¡ç”Ÿä½¿ç”¨ç¤¼è²Œç”¨è¯­çš„ä¾‹å­â€ æ¥è¯´æ˜Žå„ç§å¢žå¼ºçš„ä½¿ç”¨æ–¹å¼ã€‚ å‰ç½®å¢žå¼ºæœåŠ¡ç”ŸæŽ¥å£12345678910111213141516package com.hhxs.bbt.advice;public interface Waiter &#123; /** * æ¬¢è¿Žé¡¾å®¢ * @param name */ void greetTo(String name); /** * å¯¹é¡¾å®¢æä¾›æœåŠ¡ * @param name */ void serveTo(String name);&#125; çŽ°åœ¨ï¼Œæ¥çœ‹ä¸€ä¸ªæœªå‚åŠ è¿‡åŸ¹è®­çš„æœåŠ¡ç”Ÿçš„æœåŠ¡æƒ…å†µï¼š12345678910111213141516package com.hhxs.bbt.advice;import org.springframework.stereotype.Component;@Componentpublic class NaiveWaiter implements Waiter &#123; @Override public void greetTo(String name) &#123; System.out.println("greet to " + name + "..."); &#125; @Override public void serveTo(String name) &#123; System.out.println("serving " + name + "..."); &#125;&#125; NaiveWaiteråªæ˜¯ç®€å•çš„å‘é¡¾å®¢æ‰“æ‹›å‘¼ï¼Œç›´æŽ¥æä¾›æœåŠ¡ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨å‰ç½®å¢žå¼ºå¯¹NaiveWaiterçš„æœåŠ¡è¿›è¡Œè§„èŒƒï¼Œè®©ä»–ä»¬åœ¨æä¾›æœåŠ¡ä¹‹å‰ï¼Œå¿…é¡»å…ˆå¯¹é¡¾å®¢ä½¿ç”¨ç¤¼è²Œç”¨è¯­ã€‚12345678910111213141516package com.hhxs.bbt.advice;import java.lang.reflect.Method;import org.springframework.aop.MethodBeforeAdvice;import org.springframework.stereotype.Component;@Componentpublic class GreetingBeforeAdvice implements MethodBeforeAdvice &#123; // åœ¨ç›®æ ‡ç±»æ–¹æ³•è°ƒç”¨å‰æ‰§è¡Œ @Override public void before(Method method, Object[] args, Object target) throws Throwable &#123; String clientName = (String)args[0]; System.out.println("How are you! Mr." + clientName + "."); &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†MethodBeforeAdviceæŽ¥å£çš„å”¯ä¸€æ–¹æ³•before(Method method, Object[] args, Object obj) throws Throwableï¼Œmethodä¸ºç›®æ ‡ç±»çš„æ–¹æ³•ï¼›argsä¸ºç›®æ ‡ç±»æ–¹æ³•çš„å…¥å‚ï¼›è€Œobjä¸ºç›®æ ‡ç±»å®žä¾‹ã€‚å½“è¯¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå°†é˜»æ­¢ç›®æ ‡ç±»æ–¹æ³•çš„æ‰§è¡Œã€‚ ä¸‹é¢ç¼–å†™æµ‹è¯•ä¾‹å­ï¼Œçœ‹ä¸‹å…·ä½“çš„æ‰§è¡Œæƒ…å†µï¼š123456789101112131415161718192021package com.hhxs.bbt.advice;import org.springframework.aop.BeforeAdvice;import org.springframework.aop.framework.ProxyFactory;public class TestBeforeAdvice &#123; public static void main(String[] args) &#123; Waiter waiter = new NaiveWaiter(); BeforeAdvice advice = new GreetingBeforeAdvice(); // Springæä¾›çš„ä»£ç†å·¥åŽ‚ ProxyFactory pf = new ProxyFactory(); // è®¾ç½®ä»£ç†ç›®æ ‡ pf.setTarget(waiter); // ä¸ºä»£ç†ç›®æ ‡æ·»åŠ å¢žå¼º pf.addAdvice(advice); // ç”Ÿæˆä»£ç†å®žä¾‹ Waiter proxy = (Waiter) pf.getProxy(); proxy.greetTo("å¼ ä¸‰"); proxy.serveTo("æŽå››"); &#125;&#125; è¿è¡Œä¸Šé¢çš„ä»£ç ï¼ŒæŽ§åˆ¶å°è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡å‰ç½®å¢žå¼ºåœ¨æ–¹æ³•å‰é¢å¼•å…¥äº†ç¤¼è²Œç”¨è¯­ã€‚1234How are you! Mr.å¼ ä¸‰.greet to å¼ ä¸‰...How are you! Mr.æŽå››.serving æŽå››... è§£å‰–ProxyFactoryåœ¨TestBeforeAdviceä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨org.springframework.aop.framework.ProxyFactoryä»£ç†å·¥åŽ‚å°†GreetingBeforeAdviceçš„å¢žå¼ºç»‡å…¥åˆ°ç›®æ ‡ç±»NaiveWaiterä¸­ã€‚æœ‰æ²¡æœ‰å‘çŽ°ï¼Œè°ƒç”¨æ–¹å¼ä¸Žä¸Šä¸€èŠ‚ä»‹ç»çš„JDKä»£ç†å’ŒCgLibä»£ç†å¾ˆç›¸ä¼¼ï¼Ÿä¸é”™ï¼ŒProxyFactoryçš„å†…éƒ¨å°±æ˜¯ä½¿ç”¨äº†JDKä»£ç†æˆ–CGLibæŠ€æœ¯ã€‚ä¸‹å›¾ä¸ºAopProxyç±»ç»“æž„ï¼š å…¶ä¸­ï¼ŒCglib2AopProxyä½¿ç”¨CGLibä»£ç†æŠ€æœ¯åˆ›å»ºä»£ç†ï¼Œè€ŒJdkDynamicAopProxyä½¿ç”¨JDKä»£ç†æŠ€æœ¯åˆ›å»ºä»£ç†ã€‚å¦‚æžœé€šè¿‡ProxyFactoryçš„setInterfaces(Class[] interfaces)æŒ‡å®šé’ˆå¯¹æŽ¥å£è¿›è¡Œä»£ç†ï¼ŒProxyFactoryå°±ä½¿ç”¨JdkDynamicAopProxyï¼›å¦‚æžœé’ˆå¯¹ç±»çš„ä»£ç†ï¼Œåˆ™ä½¿ç”¨Cglib2AopProxyã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ProxyFactoryçš„setOptimize(true)æ–¹æ³•ï¼Œè®©ProxyFactoryå¯åŠ¨ä¼˜åŒ–ä»£ç†æ–¹å¼ï¼Œè¿™æ ·ï¼Œé’ˆå¯¹æŽ¥å£çš„ä»£ç†ä¹Ÿä¼šä½¿ç”¨CglibAopProxyã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒç”¨ProxyFactoryçš„addAdvice(Advice)æ–¹æ³•æ·»åŠ å¤šä¸ªå¢žå¼ºï¼Œå¢žå¼ºçš„è°ƒç”¨é¡ºåºå’Œæ·»åŠ é¡ºåºä¸€è‡´ã€‚ åœ¨Springä¸­é…ç½® è™½ç„¶ä½¿ç”¨ProxyFactoryæ¯”ç›´æŽ¥ä½¿ç”¨CGLibæˆ–JDKä»£ç†æŠ€æœ¯åˆ›å»ºä»£ç†çœäº‹å¾ˆå¤šï¼Œä½†æ˜¯æ­£å¦‚å¤§å®¶é¢„æƒ³çš„ä¸€æ ·ï¼Œè¿˜å¯ä»¥é€šè¿‡Spingé…ç½®çš„æ–¹å¼æ¥å£°æ˜Žä»£ç†ã€‚ 12345678910111213141516171819202122// spring1.xmlä»£ç ç‰‡æ®µ&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"&gt; &lt;context:component-scan base-package="com.hhxs.bbt.advice" /&gt; &lt;bean id="waiter" class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;property name="interfaces" value="com.hhxs.bbt.advice.Waiter" /&gt; &lt;property name="target" ref="naiveWaiter" /&gt; &lt;property name="interceptorNames"&gt; &lt;list&gt; &lt;value&gt;greetingBeforeAdvice&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; 12345678910111213package com.hhxs.bbt.advice;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class BeforeAdviceClient &#123; public static void main(String[] args) &#123; ApplicationContext context = new ClassPathXmlApplicationContext("spring/advice/spring1.xml"); Waiter waiter = (Waiter) context.getBean("waiter"); waiter.greetTo("å¼ ä¸‰"); waiter.serveTo("æŽå››"); &#125;&#125; ä¸‹é¢ä»‹ç»ä¸‹ProxyFactoryBeançš„å‡ ä¸ªå¸¸ç”¨çš„å¯é…ç½®å±žæ€§ï¼š targetï¼š ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼› proxyInterfacesï¼š ä»£ç†æ‰€è¦å®žçŽ°çš„æŽ¥å£ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæŽ¥å£ã€‚è¯¥å±žæ€§è¿˜æœ‰ä¸€ä¸ªåˆ«åå±žæ€§interfacesï¼› interceptorNamesï¼š éœ€è¦æ¤å…¥ç›®æ ‡å¯¹è±¡çš„Beanåˆ—è¡¨ï¼Œé‡‡ç”¨Beançš„åç§°æŒ‡å®šã€‚è¿™äº›Beanå¿…é¡»æ˜¯å®žçŽ°ï¼›äº†org.aopalliance.intercept.MethodInterceptoræˆ–org.springframework.aop.Advisorçš„Beanï¼Œé…ç½®ä¸­çš„é¡ºåºå¯¹åº”è°ƒç”¨çš„é¡ºåºï¼› singletonï¼š è¿”å›žçš„ä»£ç†æ˜¯å¦æ˜¯å•å®žä¾‹ï¼Œé»˜è®¤ä¸ºå•å®žä¾‹ï¼› optimizeï¼š å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¼ºåˆ¶ä½¿ç”¨CGLibä»£ç†ã€‚å¯¹äºŽå•å®žä¾‹çš„ä»£ç†ï¼ŒæŽ¨èä½¿ç”¨CGLibï¼Œå¯¹äºŽå…¶ä»–ä½œç”¨åŸŸçš„ä»£ç†ï¼Œæœ€å¥½ä½¿ç”¨JDKä»£ç†ã€‚åŽŸå› æ˜¯CGLibåˆ›å»ºä»£ç†æ—¶é€Ÿåº¦æ…¢ï¼Œè€Œåˆ›å»ºå‡ºçš„ä»£ç†å¯¹è±¡è¿è¡Œæ•ˆçŽ‡é«˜ï¼Œè€Œä½¿ç”¨JDKä»£ç†çš„è¡¨çŽ°æ­£å¥½ç›¸åï¼› proxyTargetClassï¼š æ˜¯å¦å¯¹ç±»è¿›è¡Œä»£ç†ï¼Œè®¾ç½®ä¸ºtrueæ—¶ï¼Œä½¿ç”¨CGLibä»£ç†ã€‚ åŽç½®å¢žå¼ºåŽç½®å¢žå¼ºåœ¨ç›®æ ‡ç±»æ–¹æ³•è°ƒç”¨åŽæ‰§è¡Œï¼ŒæŽ¥ç€ä¸Šé¢çš„ä¾‹å­ï¼Œå¢žåŠ æœåŠ¡åŽç”¨è¯­ã€‚12345678import org.springframework.aop.AfterReturningAdvice;public class GreetingAfterAdvice implements AfterReturningAdvice &#123; @Override public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable &#123; System.out.println("Please enjoy yourself!"); &#125;&#125; å…¶ä¸­returnValueä¸ºç›®æ ‡å®žä¾‹æ–¹æ³•è¿”å›žçš„ç»“æžœï¼›methodä¸ºç›®æ ‡ç±»çš„æ–¹æ³•ï¼›argsä¸ºç›®æ ‡å®žä¾‹çš„æ–¹æ³•çš„å…¥å‚ï¼›è€Œtargetä¸ºç›®æ ‡ç±»å®žä¾‹ã€‚12345678910111213// spring2.xmlä»£ç ç‰‡æ®µ...&lt;bean id="waiter" class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;property name="interfaces" value="com.hhxs.bbt.advice.Waiter" /&gt; &lt;property name="target" ref="naiveWaiter" /&gt; &lt;property name="interceptorNames"&gt; &lt;list&gt; &lt;value&gt;greetingBeforeAdvice&lt;/value&gt; &lt;value&gt;greetingAfterAdvice&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;... 123456789public class AfterAdviceClient &#123; public static void main(String[] args) &#123; ApplicationContext context = new ClassPathXmlApplicationContext("spring/advice/spring2.xml"); Waiter waiter = (Waiter) context.getBean("waiter"); waiter.greetTo("å¼ ä¸‰"); waiter.serveTo("æŽå››"); &#125;&#125; è¿è¡Œä¸Šé¢çš„ä»£ç ï¼ŒæŽ§åˆ¶å°è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼š123456How are you! Mr.å¼ ä¸‰.greet to å¼ ä¸‰...Please enjoy yourself!How are you! Mr.æŽå››.serving æŽå››...Please enjoy yourself! çŽ¯ç»•å¢žå¼ºçŽ¯ç»•å¢žå¼ºå…è®¸åœ¨ç›®æ ‡ç±»æ–¹æ³•è°ƒç”¨å‰åŽç»‡å…¥æ¨ªåˆ‡é€»è¾‘ï¼Œç»¼åˆå®žçŽ°äº†å‰ç½®ã€åŽç½®å¢žå¼ºä¸¤è€…çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨çŽ¯ç»•å¢žå¼ºå®žçŽ°ä¸Šé¢çš„åŠŸèƒ½ã€‚1234567891011121314151617import org.aopalliance.intercept.MethodInterceptor;import org.aopalliance.intercept.MethodInvocation;public class GreetingInterceptor implements MethodInterceptor &#123; @Override public Object invoke(MethodInvocation invocation) throws Throwable &#123; // èŽ·å–ç›®æ ‡æ–¹æ³•å…¥å‚ Object[] args = invocation.getArguments(); String clientName = (String) args[0]; System.out.println("How are you! Mr." + clientName + "."); // é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨ç›®æ ‡æ–¹æ³• Object obj = invocation.proceed(); System.out.println("Please enjoy yourself!"); return obj; &#125;&#125; Springç›´æŽ¥ä½¿ç”¨AOPè”ç›Ÿæ‰€å®šä¹‰çš„ MethodInterceptor ä½œä¸ºçŽ¯ç»•å¢žå¼ºæŽ¥å£ã€‚è¯¥æŽ¥å£å”¯ä¸€çš„æŽ¥å£æ–¹æ³•invoke(MethodInvocation invocation) throws Throwableï¼Œå…¶ä¸­ MethodInvocation ä¸ä½†å°è£…ç›®æ ‡æ–¹æ³•åŠå…¥å‚æ•°ç»„ï¼Œè¿˜å°è£…äº†ç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„å®žä¾‹å¯¹è±¡ã€‚ 123456789101112// spring3.xmlä»£ç ç‰‡æ®µ... &lt;bean id="waiter" class="org.springframework.aop.framework.ProxyFactoryBean"&gt; &lt;property name="interfaces" value="com.hhxs.bbt.advice.Waiter" /&gt; &lt;property name="target" ref="naiveWaiter" /&gt; &lt;property name="interceptorNames"&gt; &lt;list&gt; &lt;value&gt;greetingInterceptor&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;... 123456789public class AroundAdviceClient &#123; public static void main(String[] args) &#123; ApplicationContext context = new ClassPathXmlApplicationContext("spring/advice/spring3.xml"); Waiter waiter = (Waiter) context.getBean("waiter"); waiter.greetTo("å¼ ä¸‰"); waiter.serveTo("æŽå››"); &#125;&#125; å¼‚å¸¸æŠ›å‡ºå¢žå¼ºå¼‚å¸¸æŠ›å‡ºå¢žå¼ºæœ€åˆé€‚çš„åº”ç”¨åœºæ™¯æ˜¯äº‹åŠ¡ç®¡ç†ï¼Œå½“å‚ä¸Žäº‹åŠ¡çš„æŸä¸ªDaoå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ç®¡ç†å™¨å°±å¿…é¡»å›žæ»šäº‹åŠ¡ã€‚ ThrowsAdviceå¼‚å¸¸æŠ›å‡ºå¢žå¼ºæŽ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ª æ ‡è¯†æŽ¥å£ï¼Œåœ¨è¿è¡ŒæœŸSpringä½¿ç”¨åå°„çš„æœºåˆ¶è‡ªè¡Œåˆ¤æ–­ï¼Œä½†å¿…é¡»é‡‡ç”¨ä»¥ä¸‹ç­¾åå½¢å¼å®šä¹‰å¼‚å¸¸æŠ›å‡ºçš„å¢žå¼ºæ–¹æ³•ï¼švoid afterThrowing([Method method, Object[] args, Object target], Throwable)ï¼Œæ–¹æ³•åå¿…é¡»ä¸º afterThrowingï¼Œæ–¹æ³•å…¥å‚è§„å®šï¼šå‰ä¸‰ä¸ªå…¥å‚Method method, Object[] args, Object targetè¦ä¹ˆéƒ½æä¾›ï¼Œè¦ä¹ˆéƒ½ä¸æä¾›ï¼Œè€Œæœ€åŽä¸€ä¸ªå…¥å‚æ˜¯Throwableæˆ–å…¶å­ç±»ã€‚ æ ‡è¯†æŽ¥å£æ˜¯æ²¡æœ‰ä»»ä½•æ–¹æ³•å’Œå±žæ€§çš„æŽ¥å£ï¼Œæ ‡è¯†æŽ¥å£ä¸å¯¹å®žçŽ°ç±»æœ‰ä»»ä½•è¯­ä¹‰ä¸Šçš„è¦æ±‚ï¼Œä»…ä»…è¡¨æ˜Žå®ƒçš„å®žçŽ°ç±»å±žäºŽä¸€ä¸ªç‰¹å®šçš„ç±»åž‹ã€‚å®ƒéžå¸¸ç±»ä¼¼Web2.0ä¸­TAGçš„æ¦‚å¿µï¼ŒJavaä½¿ç”¨å®ƒæ ‡è¯†æŸä¸€ç±»å¯¹è±¡ã€‚ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šç¬¬ä¸€ï¼Œé€šè¿‡æ ‡è¯†æŽ¥å£æ ‡è¯†åŒä¸€ç±»åž‹çš„ç±»ï¼Œè¿™äº›ç±»æœ¬èº«å¯èƒ½å¹¶æ²¡æœ‰å…·æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œå¦‚AdviceæŽ¥å£ï¼›ç¬¬äºŒï¼Œé€šè¿‡æ ‡è¯†æŽ¥å£ä½¿ç¨‹åºæˆ–JVMé‡‡å–ä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œå¦‚java.io.Serializableï¼Œå®ƒå‘Šè¯‰JVMå¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚ å¼•ä»‹å¢žå¼º å¼•ä»‹å¢žå¼ºæ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å¢žå¼ºç±»åž‹ï¼Œå®ƒä¸æ˜¯åœ¨ç›®æ ‡æ–¹æ³•å‘¨å›´ç»‡å…¥å¢žå¼ºï¼Œè€Œæ˜¯ä¸ºç›®æ ‡ç±»åˆ›å»ºæ–°çš„æ–¹æ³•å’Œå±žæ€§ï¼Œæ‰€ä»¥å¼•ä»‹å¢žå¼ºçš„è¿žæŽ¥ç‚¹æ˜¯ç±»çº§åˆ«çš„ã€‚ Springå®šä¹‰äº†å¼•ä»‹å¢žå¼ºæŽ¥å£ IntroductionInterceptorï¼Œè¯¥æŽ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•çš„æ–¹æ³•ï¼ŒSpringä¸ºè¯¥æŽ¥å£æä¾›äº† DelegatingIntroductionInterceptorå®žçŽ°ç±»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡æ‰©å±•è¯¥å®žçŽ°ç±»å®šä¹‰è‡ªå·±çš„å¼•ä»‹å¢žå¼ºç±»ã€‚ä¸‹é¢é€šè¿‡å¯¹ä¸Šä¸€ç¯‡æ–‡ç« SpringAOPåŸºç¡€é‡Œçš„æ€§èƒ½ç›‘è§†ä¾‹å­è¿›è¡Œæ”¹é€ ï¼Œå®žçŽ°ä¸šåŠ¡ç±»æ€§èƒ½ç›‘è§†åŠŸèƒ½çš„æ¿€æ´»å’Œå…³é—­ã€‚ 123public interface Monitorable &#123; void setMonitorActive(boolean active);&#125; 12345678910111213141516171819202122232425import org.aopalliance.intercept.MethodInvocation;import org.springframework.aop.support.DelegatingIntroductionInterceptor;public class ControllablePerformanceMonitor extends DelegatingIntroductionInterceptor implements Monitorable &#123; private static final long serialVersionUID = 1L; private ThreadLocal&lt;Boolean&gt; monitorStatusMap = new ThreadLocal&lt;Boolean&gt;(); public Object invoke(MethodInvocation mi) throws Throwable &#123; Object obj = null; if(monitorStatusMap.get() != null &amp;&amp; monitorStatusMap.get()) &#123; PerformanceMonitor.begin(mi.getClass().getName() + "." + mi.getMethod().getName()); obj = super.invoke(mi); PerformanceMonitor.end(); &#125; else &#123; obj = super.invoke(mi); &#125; return obj; &#125; @Override public void setMonitorActive(boolean active) &#123; monitorStatusMap.set(active); &#125;&#125; 123456789101112131415// beans.xmlä»£ç ç‰‡æ®µ&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"&gt; &lt;bean id="pmonitor" class="com.hhxs.bbt.introduce.ControllablePerformanceMonitor" /&gt; &lt;bean id="forumServiceTarget" class="com.hhxs.bbt.introduce.ForumService" /&gt; &lt;bean id="forumService" class="org.springframework.aop.framework.ProxyFactoryBean" p:interfaces="com.iflytek.bbt.introduce.Monitorable" &lt;!-- å¼•ä»‹å¢žå¼ºæ‰€å®žçŽ°çš„æŽ¥å£--&gt; p:target-ref="forumServiceTarget" p:interceptorNames="pmonitor" p:proxyTargetClass="true" /&gt; &lt;!-- å¼•ä»‹å¢žå¼ºåªèƒ½é€šè¿‡ç›®æ ‡ç±»åˆ›å»ºå­ç±»çš„æ–¹å¼ç”Ÿæˆå¼•ä»‹å¢žå¼ºçš„ä»£ç† --&gt;&lt;/beans&gt; 1234567891011121314public class TestIntroduce &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/introduce/beans.xml"); ForumService forumService = (ForumService) ctx.getBean("forumService"); forumService.removeForum(10); forumService.removeTopic(1024); Monitorable monitorable = (Monitorable) forumService; monitorable.setMonitorActive(true); forumService.removeForum(10); forumService.removeTopic(1024); &#125;&#125; SpringAopçš„åˆ‡é¢ç±»åž‹é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“å¢žå¼ºåªæä¾›äº†è¿žæŽ¥ç‚¹çš„æ–¹ä½ä¿¡æ¯ï¼šå¦‚ç»‡å…¥åˆ°æ–¹æ³•å‰é¢ï¼ŒåŽé¢ç­‰ï¼Œè€Œåˆ‡ç‚¹è¿›ä¸€æ­¥æè¿°äº†ç»‡å…¥åˆ°å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•ä¸Šã€‚ Springé€šè¿‡org.springframework.aop.PointcutæŽ¥å£æè¿°åˆ‡ç‚¹ï¼ŒPointcut ç”± ClassFilter å’Œ MethodMatcher æž„æˆï¼Œå®ƒé€šè¿‡ ClassFilter å®šä½åˆ°æŸäº›ç‰¹å®šç±»ä¸Šï¼Œé€šè¿‡ MethodMatcher å®šä½åˆ°æŸäº›ç‰¹å®šæ–¹æ³•ä¸Šã€‚ Springä½¿ç”¨org.springframework.aop.AdvisoræŽ¥å£è¡¨ç¤ºåˆ‡é¢çš„æ¦‚å¿µï¼Œä¸€ä¸ªåˆ‡é¢åŒæ—¶åŒ…å«æ¨ªåˆ‡ä»£ç å’Œè¿žæŽ¥ç‚¹ä¿¡æ¯ã€‚åˆ‡é¢å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šä¸€èˆ¬åˆ‡é¢ã€åˆ‡ç‚¹åˆ‡é¢å’Œå¼•ä»‹åˆ‡é¢ã€‚ Advisorï¼š ä»£è¡¨ä¸€èˆ¬åˆ‡é¢ï¼Œå®ƒä»…åŒ…å«ä¸€ä¸ªAdviceã€‚Adviceä»£è¡¨çš„æ¨ªåˆ‡è¿žæŽ¥ç‚¹æ˜¯æ‰€æœ‰ç›®æ ‡ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªæ¨ªåˆ‡é¢å¤ªå®½æ³›ï¼Œæ‰€ä»¥å¾ˆå°‘ä½¿ç”¨ï¼› PointcutAdvisorï¼š ä»£è¡¨å…·æœ‰åˆ‡ç‚¹çš„åˆ‡é¢ï¼Œå®ƒåŒ…å«Adviceå’ŒPointcutä¸¤ä¸ªç±»ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç±»ã€æ–¹æ³•åä»¥åŠæ–¹ä½ç­‰ä¿¡æ¯çµæ´»åœ°å®šä¹‰åˆ‡é¢çš„è¿žæŽ¥ç‚¹ï¼Œæä¾›æ›´å…·é€‚ç”¨æ€§çš„åˆ‡é¢ï¼› IntroductionAdvisorï¼š ä»£è¡¨å¼•ä»‹åˆ‡é¢ï¼Œå¼•ä»‹åˆ‡é¢æ˜¯å¯¹åº”å¼•ä»‹å¢žå¼ºçš„ç‰¹æ®Šçš„åˆ‡é¢ï¼Œå®ƒåº”ç”¨äºŽç±»å±‚é¢ä¸Šï¼Œæ‰€ä»¥å¼•ä»‹åˆ‡ç‚¹é€‚ç”¨ ClassFilter è¿›è¡Œå®šä¹‰ã€‚ ä¸‹é¢çœ‹ä¸‹PointcutAdvisorçš„6ä¸ªå…·ä½“å®žçŽ°ç±»ï¼š DefaultPointAdvisorï¼š æœ€å¸¸ç”¨çš„åˆ‡é¢ç±»åž‹ï¼Œå®ƒå¯ä»¥é€šè¿‡ä»»æ„Pointcutå’ŒAdviceå®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œå”¯ä¸€ä¸æ”¯æŒçš„æ˜¯å¼•ä»‹çš„åˆ‡é¢ç±»åž‹ï¼› NameMatchMethodPointcutAdvisorï¼š é€šè¿‡è¯¥ç±»å¯ä»¥å®šä¹‰æŒ‰æ–¹æ³•åå®šä¹‰åˆ‡ç‚¹çš„åˆ‡é¢ï¼› RegexpMethodPointcutAdvisorï¼š å¯¹äºŽæŒ‰æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–¹æ³•åè¿›è¡Œåˆ‡ç‚¹å®šä¹‰çš„åˆ‡é¢ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•è¯¥å®žçŽ°ç±»è¿›è¡Œæ“ä½œï¼›ã€‚RegexpMethodPointcutAdvisor å†…éƒ¨é€šè¿‡ JdkRegexpMethodPointcut æž„é€ å‡ºæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ååˆ‡ç‚¹ï¼› StaticMethodMatcherPointcutAdvisorï¼š é™æ€æ–¹æ³•åŒ¹é…å™¨åˆ‡ç‚¹å®šä¹‰çš„åˆ‡é¢ï¼Œé»˜è®¤åŒ¹é…æ‰€æœ‰çš„ç›®æ ‡ç±»ï¼› AspectJExpressionPointcutAdvisorï¼š ç”¨äºŽAspectJåˆ‡ç‚¹è¡¨è¾¾å¼å®šä¹‰åˆ‡ç‚¹çš„åˆ‡é¢ï¼Œå®ƒæ˜¯Spring 2.0æ–°æä¾›çš„ç±»ï¼› AspectJPointcutAdvisorï¼š ç”¨äºŽAspectJè¯­æ³•å®šä¹‰åˆ‡ç‚¹çš„åˆ‡é¢ï¼Œå®ƒæ˜¯Spring 2.0æ–°æä¾›çš„ç±»ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡å®žä¾‹æ¥äº†è§£ä¸‹å…·ä½“ç”¨æ³•ï¼š é™æ€æ™®é€šæ–¹æ³•ååŒ¹é…åˆ‡é¢12345678910111213141516171819@Componentpublic class Waiter &#123; public void greetTo(String name) &#123; System.out.println("waiter greet to " + name + "..."); &#125; public void serverTo(String name) &#123; System.out.println("waiter serving " + name + "..."); &#125;&#125;@Componentpublic class Seller &#123; public void greetTo(String name) &#123; System.out.println("seller greet to " + name + "..."); &#125;&#125; Selleræ‹¥æœ‰ä¸€ä¸ªå’ŒWaiterç›¸åŒåç§°çš„æ–¹æ³•greetTo()ã€‚çŽ°åœ¨å¸Œæœ›é€šè¿‡ StaticMethodMatcherPointcutAdvisor å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œåœ¨Waiter#greetTo()æ–¹æ³•è°ƒç”¨å‰ç»‡å…¥ä¸€ä¸ªå¢žå¼ºã€‚1234567891011121314151617181920// åˆ‡é¢ç±»ä»£ç public class GreetingAdvisor extends StaticMethodMatcherPointcutAdvisor &#123; private static final long serialVersionUID = 1L; // åˆ‡ç‚¹æ–¹æ³•åŒ¹é…è§„åˆ™ï¼šæ–¹æ³•åä¸ºgreetTo public boolean matches(Method method, Class&lt;?&gt; targetClass) &#123; return "greetTo".equals(method.getName()); &#125; // åˆ‡ç‚¹ç±»åŒ¹é…è§„åˆ™ï¼šä¸ºWaiterçš„ç±»æˆ–å­ç±» @Override public ClassFilter getClassFilter() &#123; return new ClassFilter() &#123; public boolean matches(Class&lt;?&gt; clazz) &#123; return Waiter.class.isAssignableFrom(clazz); &#125; &#125;; &#125;&#125; å› ä¸º StaticMethodMatcherPointcutAdvisor æŠ½è±¡ç±»å”¯ä¸€éœ€è¦å®šä¹‰çš„æ˜¯ matches() æ–¹æ³•ã€‚é»˜è®¤æƒ…å†µä¸‹åŒ¹é…æ‰€æœ‰ç±»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¦†ç›– getClassFilter() æ–¹æ³•ï¼Œè®©å®ƒä»…åŒ¹é…Waiterç±»åŠå…¶å­ç±»ã€‚123456789101112// å¢žå¼ºç±»@Componentpublic class GreetingBeforeAdvice implements MethodBeforeAdvice &#123; @Override public void before(Method method, Object[] args, Object target) throws Throwable &#123; System.out.println(target.getClass().getName() + "." + method.getName()); String clientName = (String) args[0]; System.out.println("How are you! Mr. " + clientName + "."); &#125;&#125; 1234567891011121314// beans.xml é…ç½®åˆ‡é¢: é™æ€æ–¹æ³•åŒ¹é…åˆ‡é¢...&lt;context:component-scan base-package="com.hhxs.bbt.advisor" /&gt;&lt;!-- å‘åˆ‡é¢æ³¨å…¥ä¸€ä¸ªå‰ç½®å¢žå¼º --&gt;&lt;bean id="greetingAdvisor" class="com.hhxs.bbt.advisor.GreetingAdvisor" p:advice-ref="greetingBeforeAdvice" /&gt;&lt;bean id="parent" class="org.springframework.aop.framework.ProxyFactoryBean" p:interceptorNames="greetingAdvisor" p:proxyTargetClass="true" /&gt;&lt;bean id="waiter_c" parent="parent" p:target-ref="waiter"/&gt;&lt;bean id="seller_c" parent="parent" p:target-ref="seller"/&gt;... StaticMethodMatcherPointcutAdvisor é™¤äº†adviceå±žæ€§å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰å¦å¤–ä¸¤ä¸ªå±žæ€§ï¼š classFilterï¼š ç±»åŒ¹é…è¿‡æ»¤å™¨ï¼Œåœ¨GreetingAdvisorä¸­ï¼Œæˆ‘ä»¬ç”¨ç¼–ç çš„æ–¹å¼è®¾å®šäº†classFilterï¼› orderï¼š åˆ‡é¢ç»‡å…¥æ—¶çš„é¡ºåºï¼Œè¯¥å±žæ€§ç”¨äºŽå®šä¹‰OrderdæŽ¥å£æ ‡è¯†çš„é¡ºåºã€‚1234567891011public class TestStaticMethodAdvisor &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/advisor/beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter_c"); Seller seller = (Seller) ctx.getBean("seller_c"); waiter.greetTo("John"); waiter.serverTo("John"); seller.greetTo("John"); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š12345com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John...waiter serving John...seller greet to John... é™æ€æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•åŒ¹é…åˆ‡é¢ åœ¨ StaticMethodMatcherPointcutAdvisor ä¸­ï¼Œæˆ‘ä»¬ä»…èƒ½é€šè¿‡æ–¹æ³•åå®šä¹‰åˆ‡ç‚¹ï¼Œè¿™ç§æè¿°æ–¹å¼ä¸å¤Ÿçµæ´»ã€‚å‡è®¾ç›®æ ‡ç±»ä¸­æœ‰å¤šä¸ªæ–¹æ³•ï¼Œä¸”å®ƒä»¬éƒ½æ»¡è¶³ä¸€å®šçš„å‘½åè§„èŒƒï¼Œè‹¥èƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…æè¿°å°±çµæ´»çš„å¤šäº†ã€‚RegexpMethodPointcutAdvisor æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•åŒ¹é…çš„åˆ‡é¢å®žçŽ°ç±»ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šåŒ¹é…æ¨¡å¼ä¸²åŒ¹é…çš„æ˜¯ç›®æ ‡ç±»æ–¹æ³•çš„å…¨é™å®šåï¼Œå³å¸¦ç±»åçš„æ–¹æ³•åã€‚ä¸‹é¢æˆ‘ä»¬ç”¨è¿™ä¸ªå®žçŽ°ç±»å¯¹ä¸Šé¢çš„å®žä¾‹è¿›è¡Œæ”¹å†™ï¼š123456789101112131415161718192021...&lt;context:component-scan base-package="com.hhxs.bbt.advisor" /&gt; &lt;!-- å‘åˆ‡é¢æ³¨å…¥ä¸€ä¸ªå‰ç½®å¢žå¼º --&gt; &lt;bean id="greetingAdvisor" class="org.springframework.aop.support.RegexpMethodPointcutAdvisor" p:advice-ref="greetingBeforeAdvice"&gt; &lt;property name="patterns"&gt; &lt;list&gt; &lt;value&gt;.*greet.*&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- é€šè¿‡çˆ¶&lt;bean&gt;å®šä¹‰å…¬å…±é…ç½®ä¿¡æ¯ --&gt; &lt;bean id="parent" class="org.springframework.aop.framework.ProxyFactoryBean" p:interceptorNames="greetingAdvisor" p:proxyTargetClass="true" /&gt; &lt;bean id="waiter_c" parent="parent" p:target-ref="waiter"/&gt; &lt;bean id="seller_c" parent="parent" p:target-ref="seller"/&gt;... è¿è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š1234567com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John...waiter serving John...com.hhxs.bbt.advisor.Seller.greetToHow are you! Mr. John.seller greet to John... PSï¼š é™¤äº†ä¾‹å­ä¸­æ‰€ä½¿ç”¨çš„ patterns å’Œ advice ä¸¤å±žæ€§å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸¤ä¸ªå±žæ€§ï¼š patternï¼š å¦‚æžœåªæœ‰ä¸€ä¸ªåŒ¹é…æ¨¡å¼ä¸²ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å±žæ€§è¿›è¡Œé…ç½®ï¼Œpatternså±žæ€§ç”¨äºŽå®šä¹‰å¤šä¸ªåŒ¹é…æ¨¡å¼ä¸²ï¼Œè¿™äº›åŒ¹é…æ¨¡å¼ä¸²ä¹‹é—´æ˜¯ â€œæˆ–çš„å…³ç³»â€ï¼› orderï¼š åˆ‡é¢åœ¨ç»‡å…¥æ—¶å¯¹åº”çš„é¡ºåºã€‚ åŠ¨æ€åˆ‡é¢åœ¨ä½Žç‰ˆæœ¬ä¸­ï¼ŒSpringæä¾›äº†ç”¨äºŽåˆ›å»ºåŠ¨æ€åˆ‡é¢çš„ DynamicMethodMatcherPointcutAdvisor æŠ½è±¡ç±»ï¼Œå› ä¸ºè¯¥ç±»åœ¨åŠŸèƒ½ä¸Šå’Œå…¶ä»–ç±»æœ‰é‡å ï¼Œç›®å‰å·²è¿‡æœŸã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ DefaultPointcutAdvisor å’Œ DynamicMethodMatcherPointcut æ¥å®Œæˆç›¸åŒçš„åŠŸèƒ½ã€‚ä¸‹é¢ç›´æŽ¥çœ‹ä¾‹å­ï¼š123456789101112131415161718192021222324252627282930313233@Componentpublic class GreetingDynamicPointcut extends DynamicMethodMatcherPointcut &#123; private static List&lt;String&gt; specialClientList = new ArrayList&lt;String&gt;(); static &#123; specialClientList.add("John"); specialClientList.add("Tom"); &#125; @Override public ClassFilter getClassFilter() &#123; return new ClassFilter() &#123; public boolean matches(Class&lt;?&gt; clazz) &#123; System.out.println("è°ƒç”¨getClassFilter()å¯¹" + clazz.getName() + "åšé™æ€æ£€æŸ¥."); return Waiter.class.isAssignableFrom(clazz); &#125; &#125;; &#125; @Override public boolean matches(Method method, Class&lt;?&gt; targetClass) &#123; System.out.println("è°ƒç”¨matches(method, targetClass)" + targetClass.getName() + "." + method.getName() + "åšé™æ€æ£€æŸ¥."); return "greetTo".equals(method.getName()); &#125; @Override public boolean matches(Method method, Class&lt;?&gt; targetClass, Object[] args) &#123; System.out.println("è°ƒç”¨matches(method, targetClass)" + targetClass.getName() + "." + method.getName() + "åšåŠ¨æ€æ£€æŸ¥."); String clientName = (String) args[0]; return specialClientList.contains(clientName); &#125;&#125; GreetingDynamicPointcut ç±»æ—¢æœ‰é™æ€åˆ‡ç‚¹æ£€æŸ¥çš„æ–¹æ³•ï¼Œä¹Ÿæœ‰ç”¨äºŽåŠ¨æ€åˆ‡ç‚¹æ£€æŸ¥çš„æ–¹æ³•ã€‚ç”±äºŽåŠ¨æ€åˆ‡ç‚¹æ£€æŸ¥ä¼šå¯¹æ€§èƒ½é€ æˆå¾ˆå¤§çš„å½±å“ï¼Œåº”å½“å°½é‡é¿å…åœ¨è¿è¡Œæ—¶æ¯æ¬¡éƒ½å¯¹ç›®æ ‡ç±»çš„å„ä¸ªæ–¹æ³•è¿›è¡ŒåŠ¨æ€æ£€æŸ¥ã€‚Springé‡‡ç”¨è¿™æ ·çš„æœºåˆ¶ï¼šåœ¨åˆ›å»ºä»£ç†æ—¶å¯¹ç›®æ ‡ç±»çš„æ¯ä¸ªè¿žæŽ¥ç‚¹ä½¿ç”¨é™æ€åˆ‡ç‚¹æ£€æŸ¥ï¼Œå¦‚æžœä»…é€šè¿‡é™æ€åˆ‡ç‚¹æ£€æŸ¥å°±å¯ä»¥çŸ¥é“è¿žæŽ¥ç‚¹æ˜¯ä¸åŒ¹é…çš„ï¼Œåˆ™åœ¨è¿è¡Œæ—¶å°±ä¸å†è¿›è¡ŒåŠ¨æ€æ£€æŸ¥äº†ï¼›å¦‚æžœé™æ€åˆ‡ç‚¹æ£€æŸ¥æ˜¯åŒ¹é…çš„ï¼Œåœ¨è¿è¡Œæ—¶æ‰è¿›è¡ŒåŠ¨æ€åˆ‡ç‚¹æ£€æŸ¥ã€‚1234567891011121314// dynamic_beans.xml ä»£ç ç‰‡æ®µ... &lt;context:component-scan base-package="com.hhxs.bbt.advisor" /&gt; &lt;bean id="dynamicAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor" p:pointcut-ref="greetingDynamicPointcut" p:advice-ref="greetingBeforeAdvice"&gt; &lt;/bean&gt; &lt;!-- é€šè¿‡çˆ¶&lt;bean&gt;å®šä¹‰å…¬å…±é…ç½®ä¿¡æ¯ --&gt; &lt;bean id="waiter2" class="org.springframework.aop.framework.ProxyFactoryBean" p:interceptorNames="dynamicAdvisor" p:target-ref="waiter" p:proxyTargetClass="true" /&gt;... 1234567891011// åŠ¨æ€åˆ‡é¢æµ‹è¯•ä»£ç public class TestDynamicAdvisor &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/advisor/dynamic_beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter2"); waiter.serverTo("Peter"); waiter.greetTo("Peter"); waiter.serverTo("John"); waiter.greetTo("John"); &#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œåœ¨æŽ§åˆ¶å°è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š12345678910111213141516171819202122232425// Springåœ¨åˆ›å»ºä»£ç†ç»‡å…¥åˆ‡é¢æ—¶ï¼Œå¯¹ç›®æ ‡ç±»ä¸­æ‰€æœ‰æ–¹æ³•è¿›è¡Œé™æ€åˆ‡ç‚¹æ£€æŸ¥è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.serverToåšé™æ€æ£€æŸ¥.è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.greetToåšé™æ€æ£€æŸ¥.è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.toStringåšé™æ€æ£€æŸ¥.è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.cloneåšé™æ€æ£€æŸ¥.// å¯¹åº”waiter.serverTo(â€œPeterâ€ï¼‰: ç¬¬ä¸€æ¬¡è°ƒç”¨serverTo()æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œé™æ€è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.serverToåšé™æ€æ£€æŸ¥.waiter serving Peter...// å¯¹åº”waiter.greetTo(â€œPeterâ€) : ç¬¬ä¸€æ¬¡è°ƒç”¨greetTo()æ—¶ï¼Œæ‰§è¡Œé™æ€åŠ¨æ€æ£€æŸ¥è°ƒç”¨getClassFilter()å¯¹com.hhxs.bbt.advisor.Waiteråšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.greetToåšé™æ€æ£€æŸ¥.è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.greetToåšåŠ¨æ€æ£€æŸ¥.waiter greet to Peter...// å¯¹åº”waiter.serverTo("John") ï¼šç¬¬äºŒæ¬¡è°ƒç”¨serverTo()æ—¶ï¼Œä¸åœ¨æ‰§è¡Œé™æ€waiter serving John...// å¯¹åº”waiter.greetTo("John") ï¼šç¬¬äºŒæ¬¡è°ƒç”¨greetTo()æ—¶ï¼Œåªæ‰§è¡ŒåŠ¨æ€æ£€æŸ¥è°ƒç”¨matches(method, targetClass)com.hhxs.bbt.advisor.Waiter.greetToåšåŠ¨æ€æ£€æŸ¥.com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John... åœ¨å®šä¹‰åˆ‡ç‚¹æ—¶ï¼Œåˆ‡å‹¿å¿˜è®°åŒæ—¶è¦†ç›–getClassFilter()å’Œmatches(Method methodï¼Œ Class targetClass)æ–¹æ³•ï¼Œé€šè¿‡é™æ€åˆ‡ç‚¹æ£€æŸ¥å¯ä»¥æŽ’é™¤æŽ‰å¤§éƒ¨åˆ†æ–¹æ³•ã€‚ æœ€åŽè¦è¯´æ˜Žçš„æ˜¯ï¼Œåœ¨Springä¸­ï¼Œä¸ç®¡æ˜¯é™æ€åˆ‡é¢è¿˜æ˜¯åŠ¨æ€åˆ‡é¢éƒ½æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯å®žçŽ°çš„ã€‚æ‰€è°“é™æ€åˆ‡é¢æ˜¯æŒ‡åœ¨ç”Ÿæˆä»£ç†å¯¹è±¡æ—¶ï¼Œå°±ç¡®å®šäº†å¢žå¼ºæ˜¯å¦éœ€è¦ç»‡å…¥åˆ°ç›®æ ‡ç±»è¿žæŽ¥ç‚¹ä¸Šï¼Œè€ŒåŠ¨æ€åˆ‡é¢æ˜¯æŒ‡å¿…é¡»åœ¨è¿è¡ŒæœŸæ ¹æ®æ–¹æ³•å…¥å‚çš„å€¼æ¥åˆ¤æ–­å¢žå¼ºæ˜¯å¦ç»‡å…¥åˆ°ç›®æ ‡ç±»è¿žæŽ¥ç‚¹ä¸Šã€‚ æµç¨‹åˆ‡é¢Springçš„æµç¨‹åˆ‡é¢ç”± DefaultPointcutAdvisor å’Œ ControlFlowPointcut å®žçŽ°ã€‚æµç¨‹åˆ‡ç‚¹ä»£è¡¨ç”±æŸä¸ªæ–¹æ³•ç›´æŽ¥æˆ–é—´æŽ¥å‘èµ·è°ƒç”¨çš„å…¶ä»–æ–¹æ³•ã€‚æ¥çœ‹ä¸‹é¢çš„å®žä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªWaiterDelegatç±»ä»£ç†Waiteræ‰€æœ‰çš„æ–¹æ³•ï¼š12345678910111213public class WaiterDelegate &#123; private Waiter waiter; public void service(String clientName) &#123; waiter.greetTo(clientName); waiter.serverTo(clientName); &#125; public void setWaiter(Waiter waiter) &#123; this.waiter = waiter; &#125;&#125; å‡è®¾æˆ‘ä»¬éœ€è¦å®žçŽ°æ‰€æœ‰ç”±WaiterDelegate#service()æ–¹æ³•å‘èµ·è°ƒç”¨çš„å…¶ä»–æ–¹æ³•éƒ½ç»‡å…¥GreetingBeforeAdviceå¢žå¼ºï¼Œå°±å¿…é¡»ä½¿ç”¨æµç¨‹åˆ‡é¢æ¥å®Œæˆç›®æ ‡ã€‚12345678910111213141516171819// controlflow_beans.xml ä»£ç ç‰‡æ®µ... &lt;context:component-scan base-package="com.hhxs.bbt.advisor" /&gt; &lt;bean id="controlFlowPointcut" class="org.springframework.aop.support.ControlFlowPointcut"&gt; &lt;constructor-arg type="java.lang.Class" value="com.hhxs.bbt.advisor.WaiterDelegate"/&gt; &lt;constructor-arg type="java.lang.String" value="service"/&gt; &lt;/bean&gt; &lt;bean id="controlFlowAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor" p:pointcut-ref="controlFlowPointcut" p:advice-ref="greetingBeforeAdvice"&gt; &lt;/bean&gt; &lt;!-- é€šè¿‡çˆ¶&lt;bean&gt;å®šä¹‰å…¬å…±é…ç½®ä¿¡æ¯ --&gt; &lt;bean id="waiter3" class="org.springframework.aop.framework.ProxyFactoryBean" p:interceptorNames="controlFlowAdvisor" p:target-ref="waiter" p:proxyTargetClass="true" /&gt;... ControlFlowPointcutæœ‰ä¸¤ä¸ªæž„é€ å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ControlFlowPointcut(Class clazz)å’ŒControlFlowPointcut(Class clazz, String methodName)ã€‚ç¬¬ä¸€ä¸ªæž„é€ å‡½æ•°æŒ‡å®šä¸€ä¸ªç±»ä½œä¸ºæµç¨‹åˆ‡ç‚¹ï¼›ç¬¬äºŒä¸ªæž„é€ å‡½æ•°æŒ‡å®šä¸€ä¸ªç±»å’ŒæŸä¸€ä¸ªæ–¹æ³•ä½œä¸ºæµç¨‹åˆ‡ç‚¹ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šWaiterDelegate#service()æ–¹æ³•ä½œä¸ºåˆ‡ç‚¹ï¼Œè¡¨ç¤ºæ‰€æœ‰é€šè¿‡è¯¥æ–¹æ³•ç›´æŽ¥æˆ–é—´æŽ¥å‘èµ·çš„è°ƒç”¨åŒ¹é…åˆ‡ç‚¹ã€‚123456789101112public class TestControlFlowAdvisor &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/advisor/controlflow_beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter3"); WaiterDelegate wd = new WaiterDelegate(); wd.setWaiter(waiter); waiter.serverTo("John"); waiter.greetTo("John"); wd.service("John"); &#125;&#125; 12345678waiter serving John...waiter greet to John...com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John...com.hhxs.bbt.advisor.Waiter.serverToHow are you! Mr. John.waiter serving John... å¯¹äºŽæµç¨‹åˆ‡é¢æ¥è¯´ï¼Œä»£ç†å¯¹è±¡åœ¨æ¯æ¬¡è°ƒç”¨ç›®æ ‡ç±»æ–¹æ³•æ—¶ï¼Œéƒ½éœ€è¦åˆ¤æ–­æ–¹æ³•è°ƒç”¨å †æ ˆä¸­æ˜¯å¦æ»¡è¶³æµç¨‹åˆ‡ç‚¹çš„è¦æ±‚ã€‚å› æ­¤ï¼Œå’ŒåŠ¨æ€åˆ‡é¢ä¸€æ ·ï¼Œæµç¨‹åˆ‡é¢å¯¹æ€§èƒ½çš„å½±å“ä¹Ÿå¾ˆå¤§ã€‚ å¤åˆåˆ‡ç‚¹åˆ‡é¢åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰çš„åˆ‡é¢ä»…æœ‰ä¸€ä¸ªåˆ‡ç‚¹ï¼Œæœ‰æ—¶ï¼Œä¸€ä¸ªåˆ‡ç‚¹å¯èƒ½éš¾ä»¥æè¿°ç›®æ ‡è¿žæŽ¥ç‚¹çš„ä¿¡æ¯ã€‚æ¯”å¦‚ä¸Šé¢æµç¨‹åˆ‡ç‚¹çš„ä¾‹å­ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬å¸Œæœ›ç”±WaiterDelegate#service()å‘èµ·è°ƒç”¨ä¸”è¢«è°ƒç”¨çš„æ–¹æ³•æ˜¯Waiter#greetTo()æ—¶æ‰ç»‡å…¥å¢žå¼ºï¼Œè¿™ä¸ªåˆ‡ç‚¹å°±æ˜¯å¤åˆåˆ‡ç‚¹ã€‚Springä¸ºæˆ‘ä»¬æä¾›äº† ComposablePointCutï¼Œå¯ä»¥å°†å¤šä¸ªåˆ‡ç‚¹ä»¥å¹¶é›†æˆ–äº¤é›†çš„æ–¹å¼ç»„åˆèµ·æ¥ï¼Œæä¾›èµ·ç‚¹ä¹‹é—´å¤åˆè¿ç®—åŠŸèƒ½ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ ComposablePointcut åˆ›å»ºä¸€ä¸ªæµç¨‹åˆ‡ç‚¹å’Œæ–¹æ³•ååˆ‡ç‚¹çš„ç›¸äº¤åˆ‡ç‚¹ï¼Œä»£ç å¦‚ä¸‹ï¼š12345678910111213@Componentpublic class GreetingComposablePointcut &#123; public Pointcut getIntersectionPointcut() &#123; // åˆ›å»ºä¸€ä¸ªå¤åˆåˆ‡ç‚¹ ComposablePointcut cp = new ComposablePointcut(); // åˆ›å»ºä¸€ä¸ªæµç¨‹åˆ‡ç‚¹ Pointcut pt1 = new ControlFlowPointcut(WaiterDelegate.class,"service"); // åˆ›å»ºä¸€ä¸ªæ–¹æ³•ååˆ‡ç‚¹ NameMatchMethodPointcut pt2 = new NameMatchMethodPointcut(); pt2.addMethodName("greetTo"); return cp.intersection(pt1).intersection((Pointcut)pt2); &#125;&#125; 123456789101112// composable_beans.xml ä»£ç ç‰‡æ®µ...&lt;context:component-scan base-package="com.hhxs.bbt.advisor" /&gt;&lt;bean id="composableAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor" p:pointcut="#&#123;greetingComposablePointcut.intersectionPointcut&#125;" p:advice-ref="greetingBeforeAdvice" /&gt;&lt;!-- é€šè¿‡çˆ¶&lt;bean&gt;å®šä¹‰å…¬å…±é…ç½®ä¿¡æ¯ --&gt;&lt;bean id="waiter4" class="org.springframework.aop.framework.ProxyFactoryBean" p:interceptorNames="composableAdvisor" p:target-ref="waiter" p:proxyTargetClass="true" /&gt;... 1234567891011public class TestComposableAdvisor &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/advisor/composable_beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter4"); WaiterDelegate wd = new WaiterDelegate(); wd.setWaiter(waiter); waiter.serverTo("Peter"); waiter.greetTo("Peter"); wd.service("Peter"); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œåœ¨æŽ§åˆ¶å°è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š123456waiter serving Peter...waiter greet to Peter...com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. Peter.waiter greet to Peter...waiter serving Peter... å¼•ä»‹åˆ‡é¢å¼•ä»‹åˆ‡é¢æ˜¯å¼•ä»‹å¢žå¼ºçš„å°è£…å™¨ï¼Œé€šè¿‡å¼•ä»‹åˆ‡é¢ï¼Œæˆ‘ä»¬æ›´å®¹æ˜“ä¸ºçŽ°æœ‰å¯¹è±¡æ·»åŠ ä»»ä½•æŽ¥å£çš„å®žçŽ°ã€‚IntroductionInfo æè¿°äº†ç›®æ ‡ç±»éœ€è¦å®žçŽ°çš„æ–°æŽ¥å£ã€‚IntroductionAdvisor æœ‰ä¸¤ä¸ªå®žçŽ°ç±»ï¼Œåˆ†åˆ«æ˜¯ DefaultIntroductionAdvisor å’Œ DeclareParentsAdvisorï¼Œå‰è€…æ˜¯å¼•ä»‹åˆ‡é¢æœ€å¸¸ç”¨çš„å®žçŽ°ç±»ï¼Œè€ŒåŽè€…æ˜¯Spring2.0æ–°æ·»çš„å®žçŽ°ç±»ï¼Œå®ƒç”¨äºŽå®žçŽ°ä½¿ç”¨AspectJè¯­è¨€çš„DeclareParentæ³¨è§£è¡¨ç¤ºçš„å¼•ä»‹åˆ‡é¢ã€‚DefulatIntroductionAdvisoræ‹¥æœ‰ä¸‰ä¸ªæž„é€ å‡½æ•°ï¼š DefaultIntroductionAdvisor(Advice advice)ï¼š é€šè¿‡ä¸€ä¸ªå¢žå¼ºåˆ›å»ºçš„å¼•ä»‹åˆ‡é¢ï¼Œå¼•ä»‹åˆ‡é¢å°†ä¸ºç›®æ ‡å¯¹è±¡æ–°å¢žå¢žå¼ºå¯¹è±¡ä¸­æ‰€æœ‰æŽ¥å£çš„å®žçŽ°ï¼› DefaultIntroductionAdvisor(DynamicIntroductionAdvice advice, Class clazz)ï¼š é€šè¿‡ä¸€ä¸ªå¢žå¼ºå’Œä¸€ä¸ªæŒ‡å®šçš„æŽ¥å£ç±»åˆ›å»ºå¼•ä»‹åˆ‡é¢ï¼Œä»…ä¸ºç›®æ ‡å¯¹è±¡æ–°å¢žclazzæŽ¥å£çš„å®žçŽ°ï¼› DefaultIntroductionAdvisor(Advice adviceï¼ŒIntroductionInfo introductionInfo)ï¼š é€šè¿‡ä¸€ä¸ªå¢žå¼ºå’Œä¸€ä¸ªIntroductionInfoåˆ›å»ºä¸€ä¸ªå¼•ä»‹åˆ‡é¢ï¼Œç›®æ ‡å¯¹è±¡éœ€è¦å®žçŽ°å“ªäº›æŽ¥å£ï¼Œç”±introductionInfoå¯¹è±¡çš„getInterfaces()è¡¨ç¤ºã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡DefaultIntroductionAdvisorä¸º å‰é¢çš„å¼•ä»‹å¢žå¼ºç¤ºä¾‹ é…ç½®åˆ‡é¢ï¼š12345678910// introduce_beans.xml ä»£ç ç‰‡æ®µ... &lt;bean id="pmonitor" class="com.hhxs.bbt.introduce.ControllablePerformanceMonitor" /&gt; &lt;bean id="forumServiceTarget" class="com.hhxs.bbt.introduce.ForumService" /&gt; &lt;bean id="forumService" class="org.springframework.aop.framework.ProxyFactoryBean" p:interfaces="com.hhxs.bbt.introduce.Monitorable" p:target-ref="forumServiceTarget" p:interceptorNames="pmonitor" p:proxyTargetClass="true" /&gt;... 12345678910111213public class TestIntroduceAdvisor &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/advisor/introduce_beans.xml"); ForumService forumService = (ForumService) ctx.getBean("forumService"); forumService.removeForum(10); forumService.removeTopic(1024); Monitorable monitorable = (Monitorable) forumService; monitorable.setMonitorActive(true); forumService.removeForum(10); forumService.removeTopic(1024); &#125;&#125; è‡ªåŠ¨ä»£ç†åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªéœ€è¦è¢«ä»£ç†çš„ Bean éƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ª ProxyFactoryBean è¿›è¡Œé…ç½®ï¼Œä¸ºæ¯ä¸€ä¸ªç›®æ ‡ç±»æ‰‹å·¥é…ç½®ä¸€ä¸ªåˆ‡é¢æ˜¯æ¯”è¾ƒç¹ççš„ã€‚å¹¸è¿çš„æ˜¯ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨ä»£ç†æœºåˆ¶ï¼Œè®©å®¹å™¨ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»£ç†ã€‚ Springä½¿ç”¨ BeanPostProcessor æ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚åŸºäºŽ BeanPostProcessor çš„è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨çš„å®žçŽ°ç±»ï¼Œå°†æ ¹æ®ä¸€äº›è§„åˆ™è‡ªåŠ¨åœ¨å®¹å™¨å®žä¾‹åŒ–Beanæ—¶ä¸ºåŒ¹é…çš„Beanç”Ÿæˆä»£ç†å®žä¾‹ã€‚è¿™äº›ä»£ç†åˆ›å»ºå™¨å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š åŸºäºŽBeané…ç½®åè§„åˆ™çš„è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨ï¼š å…è®¸ä¸ºä¸€ç»„ç‰¹å®šé…ç½®åçš„Beanè‡ªåŠ¨åˆ›å»ºä»£ç†å®žä¾‹çš„ä»£ç†åˆ›å»ºå™¨ï¼Œå®žçŽ°ç±»ä¸º BeanNameAutoProxyCreatorï¼› åŸºäºŽAdvisoråŒ¹é…æœºåˆ¶çš„è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨ï¼š å®ƒä¼šå¯¹å®¹å™¨ä¸­æ‰€æœ‰çš„Advisorè¿›è¡Œæ‰«æï¼Œè‡ªåŠ¨å°†è¿™äº›åˆ‡é¢åº”ç”¨åˆ°åŒ¹é…çš„Beanä¸­ï¼Œå®žçŽ°ç±»ä¸º DefaultAdvisorAutoProxyCreatorï¼› åŸºäºŽBeanä¸­AspjectJæ³¨è§£æ ‡ç­¾çš„è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨ï¼š ä¸ºåŒ…å«AspectJæ³¨è§£çš„Beanè‡ªåŠ¨åˆ›å»ºä»£ç†å®žä¾‹ï¼Œå®ƒçš„å®žçŽ°ç±»æ˜¯ AnnotationAwareAspectJAutoProxyCreatorï¼Œè¯¥ç±»æ˜¯Spring2.0çš„æ–°å¢žç±»ã€‚ BeanNameAutoProxyCreatoråœ¨é™æ€æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•åŒ¹é…åˆ‡é¢ä¸­ï¼Œé€šè¿‡é…ç½®ä¸¤ä¸ªProxyFactoryBeanåˆ†åˆ«ä¸ºwaiterå’Œsellerçš„Beanåˆ›å»ºä»£ç†å¯¹è±¡ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡BeanNameAutoProxyCreatoræ¥å®Œæˆç›¸åŒåŠŸèƒ½ï¼š12345678... &lt;context:component-scan base-package=&quot;com.hhxs.bbt.advisor&quot; /&gt; &lt;bean class=&quot;org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator&quot; p:beanNames=&quot;*er&quot; p:interceptorNames=&quot;greetingBeforeAdvice&quot; p:optimize=&quot;true&quot; /&gt;... BeanNameAutoProxyCreatoræœ‰ä¸€ä¸ªbeanNameså±žæ€§ï¼Œå®ƒå…è®¸ç”¨æˆ·æŒ‡å®šä¸€ç»„éœ€è¦è‡ªåŠ¨ä»£ç†Beanåç§°ï¼ŒBeanåç§°å¯ä»¥ä½¿ç”¨*é€šé…ç¬¦ã€‚å½“ç„¶ä½¿ç”¨é€šé…ç¬¦ä¼šå¸¦æ¥ä¸€å®šé£Žé™©ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‡è®¾ä¸€ä¸ªå…¶ä»–çš„Beanåç§°ä»¥â€œerâ€ç»“å°¾ï¼Œåˆ™è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨ä¹Ÿä¼šä¸ºè¯¥Beanåˆ›å»ºä»£ç†ã€‚æ‰€ä»¥ï¼Œä¿é™©çš„æ–¹å¼æ˜¯ç›´æŽ¥ä½¿ç”¨beanidï¼Œå¦‚value=â€waiterï¼Œsellerâ€ã€‚1234567891011public class TestBeanNameAutoProxyCreator &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/autoproxy/beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter"); Seller seller = (Seller) ctx.getBean("seller"); waiter.greetTo("John"); waiter.serverTo("John"); seller.greetTo("John"); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œåœ¨æŽ§åˆ¶å°è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š123456789com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John...com.hhxs.bbt.advisor.Waiter.serverToHow are you! Mr. John.waiter serving John...com.hhxs.bbt.advisor.Seller.greetToHow are you! Mr. John.seller greet to John... DefaultAdvisorAutoProxyCreatorDefaultAdvisorAutoProxyCreatorèƒ½å¤Ÿæ‰«æå®¹å™¨ä¸­çš„Advisorï¼Œå¹¶å°†Advisorè‡ªåŠ¨ç»‡å…¥åˆ°åŒ¹é…çš„ç›®æ ‡Beanä¸­ï¼Œå³ä¸ºåŒ¹é…çš„ç›®æ ‡Beanè‡ªåŠ¨åˆ›å»ºä»£ç†ã€‚ åœ¨é™æ€æ–¹æ³•åŒ¹é…åˆ‡é¢ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ProxyFactoryBeanä¸ºwaiteré…ç½®äº†ä»£ç†ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¼•å…¥DefaultAdvisorAutoProxyCreatorä¸ºå®¹å™¨ä¸­æ‰€æœ‰å¸¦â€œgreetâ€æ–¹æ³•åçš„ç›®æ ‡Beanè‡ªåŠ¨åˆ›å»ºä»£ç†ï¼š12345678// beans.xmlä»£ç ç‰‡æ®µ...&lt;!--é€šè¿‡Advisorè‡ªåŠ¨åˆ›å»ºä»£ç†--&gt;&lt;bean id="regexpAdvisor" class="org.springframework.aop.support.RegexpMethodPointcutAdvisor" p:patterns=".*greet.*" p:advice-ref="greetingBeforeAdvice" /&gt;&lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator" /&gt;... 1234567891011public class TestBeanNameAutoProxyCreator &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new ClassPathXmlApplicationContext("com/hhxs/bbt/autoproxy/beans.xml"); Waiter waiter = (Waiter) ctx.getBean("waiter"); Seller seller = (Seller) ctx.getBean("seller"); waiter.greetTo("John"); waiter.serverTo("John"); seller.greetTo("John"); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œåœ¨æŽ§åˆ¶å°è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ï¼š1234567com.hhxs.bbt.advisor.Waiter.greetToHow are you! Mr. John.waiter greet to John...waiter serving John...com.hhxs.bbt.advisor.Seller.greetToHow are you! Mr. John.seller greet to John...]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Maven Profileå’ŒSpring Proflie]]></title>
    <url>%2F2017%2F12%2F22%2FMaven%20Profile%20%E5%92%8C%20Spring%20profile%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªä¼˜ç§€çš„æž„å»ºç³»ç»Ÿå¿…é¡»è¶³å¤Ÿçµæ´»ï¼Œå®ƒåº”è¯¥èƒ½è®©é¡¹ç›®åœ¨ä¸åŒçš„çŽ¯å¢ƒä¸‹éƒ½èƒ½æˆåŠŸåœ°æž„å»ºã€‚Mavenä¸ºäº†æ”¯æŒæž„å»ºçš„çµæ´»æ€§ï¼Œå†…ç½®äº†ä¸‰å¤§ç‰¹æ€§ï¼Œå³å±žæ€§ã€Profileå’Œèµ„æºè¿‡æ»¤ã€‚è¿™é‡Œæˆ‘ä»¬åªä»‹ç»Profileçš„ä½¿ç”¨ï¼Œä»¥åŠå’ŒSpring Profileçš„æ•´åˆã€‚ Maven Profileå…¸åž‹çš„é¡¹ç›®ä¸€èˆ¬éƒ½ä¼šæœ‰å¼€å‘çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒä»¥åŠç”Ÿäº§çŽ¯å¢ƒï¼Œåœ¨ä¸åŒçš„çŽ¯å¢ƒä¸­ï¼Œé¡¹ç›®çš„æºç åº”è¯¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼è¿›è¡Œæž„å»ºï¼Œè¿™å°±è¦æ±‚é¡¹ç›®æž„å»ºçš„æ—¶å€™éœ€è¦è¯†åˆ«æ‰€åœ¨çŽ¯å¢ƒå¹¶ä½¿ç”¨æ­£ç¡®çš„é…ç½®ã€‚ä¸ºäº†èƒ½è®©æž„å»ºåœ¨å„ä¸ªçŽ¯å¢ƒä¸‹æ–¹ä¾¿çš„ç§»æ¤ï¼ŒMavenå¼•å…¥äº†profileçš„æ¦‚å¿µï¼Œprofileå¯ä»¥è®©æˆ‘ä»¬å®šä¹‰ä¸€ç³»åˆ—çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åŽæŒ‡å®šå…¶æ¿€æ´»æ¡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®šä¹‰å¤šä¸ªprofileï¼Œç„¶åŽæ¯ä¸ªprofileå¯¹åº”ä¸åŒçš„æ¿€æ´»æ¡ä»¶å’Œé…ç½®ä¿¡æ¯ï¼Œä»Žè€Œè¾¾åˆ°ä¸åŒçŽ¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®ä¿¡æ¯çš„æ•ˆæžœã€‚ profileçš„ç§ç±»æ ¹æ®å…·ä½“éœ€è¦ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®å£°æ˜Žprofile: pom.xmlï¼š å¾ˆæ˜¾ç„¶ï¼Œpom.xmlä¸­å£°æ˜Žçš„profileåªå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚ ç”¨æˆ·settings.xmlï¼š ç”¨æˆ·ç›®å½•ä¸‹ .m2/settings.xmlä¸­çš„profileå¯¹æœ¬æœºä¸Šè¯¥ç”¨æˆ·æ‰€æœ‰çš„Mavené¡¹ç›®æœ‰æ•ˆã€‚ å…¨å±€settings.xmlï¼š Mavenå®‰è£…ç›®å½•ä¸‹conf/setting.xmlä¸­çš„profileå¯¹æœ¬æœºä¸­ä¸Šæ‰€æœ‰çš„Mavené¡¹ç›®æœ‰æ•ˆã€‚ profiles.xmlï¼ˆMaven2ï¼‰ï¼š è¿˜å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„profiles.xmlæ–‡ä»¶æ¥å£°æ˜Žprofileï¼Œä¸è¿‡è¯¥ç‰¹æ€§å·²ç»åœ¨Maven3ä¸­è¢«ç§»é™¤ã€‚å»ºè®®ç”¨æˆ·å°†è¿™ç±»profileç§»åˆ°settings.xmlä¸­ã€‚ ä½¿ç”¨æœ€å¤šçš„ä¸¤ç§æ–¹å¼æ˜¯ç”¨æˆ·settings.xmlå’Œpom.xmlæ–¹å¼ï¼Œä¸‹é¢ç®€è¦è¯´æ˜Žä¸‹ä¸åŒä½ç½®çš„profileå¯ä½¿ç”¨çš„å…ƒç´ ç§ç±»ï¼š POMä¸­çš„profileå¯ä½¿ç”¨çš„å…ƒç´ ï¼Œ1234567891011121314151617&lt;project&gt; &lt;repositories&gt;&lt;/repositories&gt; &lt;pluginRepositories&gt;&lt;/pluginRepositories&gt; &lt;distributionManagement&gt;&lt;/distributionManagement&gt; &lt;dependencies&gt;&lt;/dependencies&gt; &lt;dependencyManagement&gt;&lt;/dependencyManagement&gt; &lt;modules&gt;&lt;/modules&gt; &lt;properties&gt;&lt;/properties&gt; &lt;reporting&gt;&lt;/reporting&gt; &lt;build&gt; &lt;plugins&gt;&lt;/plugins&gt; &lt;defaultGoal&gt;&lt;/defaultGoal&gt; &lt;resources&gt;&lt;/resources&gt; &lt;testResources&gt;&lt;/testResources&gt; &lt;finalName&gt;&lt;/finalName&gt; &lt;/build&gt;&lt;/project&gt; POMå¤–éƒ¨çš„profileå¯ä½¿ç”¨å…ƒç´ ï¼Œ12345&lt;project&gt; &lt;repositories&gt;&lt;/repositories&gt; &lt;pluginRepositories&gt;&lt;/pluginRepositories&gt; &lt;properties&gt;&lt;/properties&gt;&lt;/project&gt; æ¿€æ´»æ–¹å¼ é»˜è®¤æ¿€æ´»æ–¹å¼ 123456789&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; ... &lt;/profile&gt;&lt;/profiles&gt; å‘½ä»¤è¡Œæ¿€æ´»å¯ä»¥ä½¿ç”¨mvnå‘½ä»¤è¡Œå‚æ•°-PåŠ ä¸Šprofileçš„idæ¥æ¿€æ´»profileï¼Œå¤šä¸ªidä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚$mvn clean install -Pdev settingsæ–‡ä»¶æ˜¾ç¤ºæ¿€æ´»å¦‚æžœå¸Œæœ›æŸä¸ªprofileä¸€ç›´å¤„äºŽæ¿€æ´»çŠ¶æ€ï¼Œå°±å¯ä»¥é…ç½®settings.xmlæ–‡ä»¶çš„activeProfileså…ƒç´ ã€‚ 1234567&lt;settings&gt; ... &lt;activeProfiles&gt; &lt;actvieProfile&gt;dev&lt;/activeProfile&gt; &lt;/activeProfiles&gt; ...&lt;/settings&gt; ç³»ç»Ÿå±žæ€§æ¿€æ´»ç”¨æˆ·å¯ä»¥é…ç½®å½“æŸç³»ç»Ÿå±žæ€§å­˜åœ¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ¿€æ´»profileã€‚ç„¶åŽåœ¨å‘½ä»¤è¡Œå£°æ˜Žç³»ç»Ÿå±žæ€§ï¼š$mvn clean install -Dtestï¼Œè¿™ç§æ–¹å¼å’Œç¬¬2ç§å¾ˆåƒï¼Œè€Œä¸”å¤šä¸ªprofileå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªç³»ç»Ÿå±žæ€§æ¥æ¿€æ´»ã€‚ 12345678910&lt;profiles&gt; &lt;profile&gt; &lt;activation&gt; &lt;property&gt; &lt;name&gt;test&lt;/name&gt; &lt;/property&gt; &lt;/activation&gt; ... &lt;/profile&gt;&lt;/profiles&gt; æ“ä½œç³»ç»ŸçŽ¯å¢ƒæ¿€æ´»Profileå¯ä»¥è‡ªåŠ¨æ ¹æ®æ“ä½œç³»ç»ŸçŽ¯å¢ƒæ¿€æ´»ã€‚è¿™é‡Œçš„familyçš„å€¼åŒ…æ‹¬Windowsã€UNIXå’ŒMacç­‰ï¼Œè€Œå…¶ä»–å‡ é¡¹nameã€archã€versionï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æŸ¥çœ‹çŽ¯å¢ƒä¸­çš„ç³»ç»Ÿå±žæ€§os.nameã€os.archã€os.versionèŽ·å¾—ã€‚ 12345678910111213&lt;profiles&gt; &lt;proflie&gt; &lt;activation&gt; &lt;os&gt; &lt;name&gt;Windows XP&lt;/name&gt; &lt;family&gt;Windows&lt;/family&gt; &lt;arch&gt;x86&lt;/arch&gt; &lt;version&gt;5.1.2600&lt;/version&gt; &lt;/os&gt; ... &lt;/activation&gt; &lt;/profile&gt;&lt;/profiles&gt; æ–‡ä»¶å­˜åœ¨ä¸Žå¦æ¿€æ´»Mavenèƒ½å¤Ÿæ ¹æ®é¡¹ç›®ä¸­æŸä¸ªæ–‡ä»¶å­˜åœ¨ä¸Žå¦æ¥å†³å®šæ˜¯å¦æ¿€æ´»profile. 1234567891011&lt;profiles&gt; &lt;profile&gt; &lt;activation&gt; &lt;file&gt; &lt;missing&gt;x.properties&lt;/missing&gt; &lt;exists&gt;y.properties&lt;/exists&gt; &lt;/file&gt; &lt;/activation&gt; ... &lt;/profile&gt;&lt;/profiles&gt; ç¤ºä¾‹ åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæ­£åœ¨src/main/resourceç›®å½•ä¸‹æ”¾ç½®é…ç½®æ–‡ä»¶xxx.xmlæˆ–è€…xxx.propertiesã€‚ä¸‹é¢ä»¥æ•°æ®åº“çš„é…ç½®ä¸ºä¾‹æ¥è¯´æ˜Žprofileçš„ä½¿ç”¨æ–¹å¼ï¼Œå‡è®¾é…ç½®æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹æ•°æ®åº“é…ç½®ï¼š1234database.jdbc.driverclass=com.mysql.jdbc.Driverdatabase.jdbc.connectionURL=jdbc:mysql://localhost:3306/testdatabase.jdbc.username=devdatabase.jdbc.passowrd=dev-pwd å¦‚æžœåªæ˜¯åœ¨ä¸€ä¸ªçŽ¯å¢ƒä¸­ä½¿ç”¨å°±æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å½“æµ‹è¯•äººå‘˜æƒ³è¦æž„å»ºé¡¹ç›®è¿›è¡Œæµ‹è¯•ï¼Œæˆ–è€…éƒ¨ç½²ä¸Šçº¿åˆ°ç”Ÿäº§çŽ¯å¢ƒï¼Œå¾€å¾€è¿™äº›çŽ¯å¢ƒçš„ä¿¡æ¯æ˜¯ä¸åŒçš„ï¼Œè¿™å°±éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶äº†ã€‚å°†è¿™äº›é…ç½®å‚æ•°æå–åˆ°profileä¸­ï¼š1234database.jdbc.driverclass=$&#123;db.driver&#125;database.jdbc.connectionURL=$&#123;db.url&#125;database.jdbc.username=$&#123;db.username&#125;database.jdbc.passowrd=$&#123;db.password&#125; pom.xmlæ–‡ä»¶ä¸­æ–°å¢žprfileï¼š123456789101112131415161718192021&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;properties&gt; &lt;db.driver&gt;com.mysql.jdbc.Driver&lt;/db.driver&gt; &lt;db.url&gt;jdbc:mysql://localhost:3306/test&lt;/db.url&gt; &lt;db.username&gt;dev&lt;/db.username&gt; &lt;db.password&gt;dev-pwd&lt;/db.password&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;deploy&lt;/id&gt; &lt;properties&gt; &lt;db.driver&gt;com.mysql.jdbc.Driver&lt;/db.driver&gt; &lt;db.url&gt;jdbc:mysql://localhost:3306/deploy&lt;/db.url&gt; &lt;db.username&gt;deploy&lt;/db.username&gt; &lt;db.password&gt;deploy-pwd&lt;/db.password&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt; æœ‰äº†å±žæ€§å®šä¹‰ï¼Œé…ç½®æ–‡ä»¶ä¸­ä¹Ÿæœ‰äº†è¿™äº›å±žæ€§ã€‚ä½†æ˜¯Mavenå±žæ€§é»˜è®¤åªæœ‰åœ¨POMä¸­æ‰ä¼šè¢«è§£æžï¼Œæ”¾åœ¨src/main/resources/ä¸‹å¹¶ä¸ä¼šè¢«è§£æžã€‚å› æ­¤éœ€è¦å€ŸåŠ©maven-resource-pluginæ’ä»¶æ¥ä¸ºèµ„æºç›®å½•å¼€å¯è¿‡æ»¤ï¼Œè¿™æ ·Mavenå°±èƒ½è§£æžèµ„æºæ–‡ä»¶ä¸­çš„Mavenå±žæ€§äº†ã€‚12345678910&lt;resources&gt; &lt;resource&gt; &lt;directory&gt;$&#123;project.basedir&#125;/src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;$&#123;project.basedir&#125;/src/test/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt;&lt;/resources&gt; Mavenå…è®¸ç”¨æˆ·å£°æ˜Žå¤šä¸ªèµ„æºç›®å½•ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªèµ„æºç›®å½•æä¾›ä¸åŒçš„è¿‡æ»¤é…ç½®ã€‚æœ€åŽï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œæ¿€æ´»profileï¼ŒMavenå°±èƒ½å¤Ÿåœ¨æž„å»ºé¡¹ç›®çš„çš„æ—¶å€™ä½¿ç”¨profileä¸­å±žæ€§å€¼æ›¿æ¢æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸­çš„å±žæ€§å¼•ç”¨ã€‚è¿è¡Œå‘½ä»¤è¡Œå¦‚ä¸‹ï¼š$mvn clean install -Pdev Spring ProfileSpring profileæ˜¯Spring 3.1å¼•å…¥çš„æ¦‚å¿µï¼Œé€šè¿‡å®šä¹‰profileæ¥å°†è‹¥å¹²ä¸åŒçš„beanå®šä¹‰ç»„ç»‡èµ·æ¥ï¼Œä»Žè€Œå®žçŽ°ä¸åŒçŽ¯å¢ƒè‡ªåŠ¨æ¿€æ´»ä¸åŒçš„profileæ¥åˆ‡æ¢é…ç½®å‚æ•°çš„åŠŸèƒ½ã€‚ åœ¨å®žé™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘çŽ¯å¢ƒä¸€èˆ¬ä½¿ç”¨é¡¹ç›®ä¸­è‡ªå¸¦æ–‡ä»¶ï¼Œè€Œåœ¨éƒ¨ç½²ç”Ÿäº§çŽ¯å¢ƒçš„æ—¶å€™ä½¿ç”¨æŒ‡å®šç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œä¸‹é¢å°±ä»¥é…ç½®æ–‡ä»¶åˆ‡æ¢ä¸ºä¾‹æ¥è¯´æ˜Žprofileçš„ä½¿ç”¨æ–¹æ³•ï¼š åœ¨applicationContext.xmlé‡Œå®šä¹‰profile12345678910&lt;!-- devçŽ¯å¢ƒ --&gt;&lt;beans profile="dev"&gt; &lt;context:property-placeholder ignore-resource-not-found="true" location="classpath:config/xxxx.properties" /&gt; ....&lt;/beans&gt;&lt;!-- deployçŽ¯å¢ƒ --&gt;&lt;beans profile="deploy"&gt; &lt;context:property-placeholder ignore-resource-not-found="true" location="file:D:\xx\xxx\xxxx.properties"/&gt; ....&lt;/beans&gt; æˆ–è€…ï¼š123456789101112131415161718192021 &lt;context:property-placeholder system-properties-mode="OVERRIDE" file-encoding="UTF-8" properties-ref="configProperties" /&gt; &lt;beans profile="dev"&gt; &lt;bean id="configProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt; &lt;property name="locations"&gt; &lt;list&gt; &lt;value&gt;classpath:config/xxxx.properties&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt;&lt;beans profile="deploy"&gt; &lt;bean id="configProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt; &lt;property name="locations"&gt; &lt;list&gt; &lt;value&gt;file:D:\xx\xxx\xxxx.properties&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; åœ¨web.xmlå®šä¹‰é»˜è®¤profileé»˜è®¤profileæ˜¯æŒ‡åœ¨æ²¡æœ‰ä»»ä½•profileè¢«æ¿€æ´»çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤profileå†…å®šä¹‰çš„å†…å®¹å°†è¢«ä½¿ç”¨ã€‚1234 &lt;context-param&gt; &lt;param-name&gt;spring.profiles.default&lt;/param-name&gt; &lt;param-value&gt;dev&lt;/param-value&gt;&lt;/context-param&gt; æ¿€æ´»profilespringä¸ºæˆ‘ä»¬æä¾›äº†å¤§é‡çš„æ¿€æ´»profileçš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä»£ç æ¥æ¿€æ´»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç³»ç»ŸçŽ¯å¢ƒå˜é‡ã€JVMå‚æ•°ã€servletä¸Šä¸‹æ–‡å‚æ•°æ¥å®šä¹‰spring.profiles.activeå‚æ•°æ¿€æ´»profileï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡å®šä¹‰servletä¸Šä¸‹æ–‡å‚æ•°å‚æ•°å®žçŽ°ã€‚1234&lt;context-param&gt; &lt;param-name&gt;spring.profiles.active&lt;/param-name&gt; &lt;param-value&gt;$&#123;profiles.activation&#125;&lt;/param-value&gt;&lt;/context-param&gt; å…¶ä¸­ï¼Œ${profiles.activation}éœ€è¦åœ¨å®žé™…è¿è¡Œé¡¹ç›®çš„æ—¶å€™æŒ‡å®šçŽ¯å¢ƒå˜é‡ï¼Œè¿™æ ·æ—¢å¯ä»¥åšåˆ°ä¸åŒçš„çŽ¯å¢ƒä¸‹åˆ‡æ¢ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥è®¾ç½®å…·ä½“å€¼ï¼Œè¿™æ ·å¯ä»¥çœåŽ»2.4èŠ‚çš„çŽ¯å¢ƒå±žæ€§è®¾ç½®ã€‚ è¿è¡Œé¡¹ç›®è¿™é‡Œä»¥jettyæœåŠ¡å™¨åšä»‹ç»ï¼Œå¦‚æžœä½¿ç”¨mavenå†…ç½®jettyæ’ä»¶å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨pomä¸­å®šä¹‰çŽ¯å¢ƒå±žæ€§ï¼Œå¦‚ä¸‹å›¾ï¼šå¦‚æžœæ˜¯ä½¿ç”¨eclipse jettyæ’ä»¶å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨é…ç½®ä¸­å¢žåŠ çŽ¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹å›¾ï¼š Mavenæ•´åˆSpring profileå®žé™…é¡¹ç›®ä¸­æˆ‘ä»¬å¤§å¤šä»¥Mavenæ¥ç®¡ç†é¡¹ç›®ï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†æ¥ä»‹ç»å¦‚ä½•åœ¨Mavenä¸­æ•´åˆSpring profileã€‚1.3èŠ‚çš„ç¤ºä¾‹å·²ç»ä»‹ç»äº†åœ¨mavençš„pomæ–‡ä»¶ä¸­å¦‚ä½•å¢žåŠ profileï¼Œå¹¶ä¸”æŒ‡å®šäº†é»˜è®¤çš„æ¿€æ´»profileï¼ŒçŽ°åœ¨æˆ‘ä»¬å°†å…¶æ”¹ä¸º1234567891011121314151617&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; &lt;properties&gt; &lt;profiles.activation&gt;dev&lt;/profiles.activation&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;deploy&lt;/id&gt; &lt;properties&gt; &lt;profiles.activation&gt;deploy&lt;/profiles.activation&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt; æ³¨æ„è¿™é‡Œçš„&lt;profiles.actviation&gt;å±žæ€§åç§°è¦å’Œ2.3 æ¿€æ´»profileé‡Œé…ç½®çš„å±žæ€§å€¼${profiles.activation}å¯¹åº”ï¼Œç”¨äºŽåœ¨æ‰“åŒ…çš„æ—¶å€™æŒ‡å®šæ¿€æ´»çš„profile é…ç½®Mavenæ’ä»¶ï¼Œè¿›è¡Œèµ„æºè¿‡æ»¤1234567891011121314151617181920&lt;plugin&gt; &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt; &lt;version&gt;2.0.2&lt;/version&gt; &lt;configuration&gt; &lt;warName&gt;$&#123;profiles.activation&#125;&lt;/warName&gt; &lt;!-- æ¿€æ´»spring profile --&gt; &lt;webResources&gt; &lt;resource&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;directory&gt;$&#123;basedir&#125;/src/main/webapp&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/web.xml&lt;/include&gt; &lt;/includes&gt; &lt;/resource&gt; &lt;/webResources&gt; &lt;warSourceDirectory&gt;$&#123;basedir&#125;/src/main/webapp&lt;/warSourceDirectory&gt; &lt;webXml&gt;$&#123;basedir&#125;/src/main/webapp/WEB-INF/web.xml&lt;/webXml&gt; &lt;warName&gt;å®žé™…æ‰“åŒ…åç§°æˆ–è€…ç”¨$&#123;profiles.activation&#125;æ›¿ä»£ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°waråŒ…&lt;/warName&gt; &lt;/configuration&gt;&lt;/plugin&gt; è¿™ä¸€éƒ¨å¾ˆå…³é”®ï¼š é…ç½®çš„ç›®çš„æ˜¯ä¸ºäº†æ‰“åŒ…çš„æ—¶å€™ï¼Œæ›¿æ¢web.xmlä¸­é…ç½®çš„servletä¸Šä¸‹æ–‡å‚æ•°å€¼${profiles.activation}ï¼Œå¦‚æžœä¸é…ç½®ï¼Œä¼šå‘çŽ°æ‰“åŒ…åŽçš„web.xmlä¸­${profiles.activation}å¹¶æ²¡æœ‰è¢«æ›¿æ¢ã€‚ æ‰“åŒ…æ‰“åŒ…åˆ°éƒ¨ç½²çŽ¯å¢ƒ$mvn clean install -Pdeploy æ‰“åŒ…åˆ°ä½“éªŒçŽ¯å¢ƒ$mvn clean install -Pdev å‚è€ƒä¹¦ç±ï¼š Mavenå®žæˆ˜ è®¸æ™“æ–Œè‘— spring proflieå‚è€ƒç½‘ä¸Šèµ„æ–™ä»¥åŠå®žé™…ä½¿ç”¨]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>maven</tag>
        <tag>profile</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ—è¡¨æŽ’åºæ€è·¯]]></title>
    <url>%2F2017%2F12%2F20%2F%E5%88%97%E8%A1%A8%E6%8E%92%E5%BA%8F%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[åœ¨é¡¹ç›®é‡Œç¢°åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œå…³äºŽåˆ—è¡¨æŽ’åºçš„ï¼Œåˆšå¼€å§‹æ€è·¯ä¸€ç›´åœ¨åŸºç¡€çš„åˆ—è¡¨æŽ’åºç®—æ³•ä¸Šï¼Œæƒ³äº†åŠå¤©ä¹Ÿæ²¡æƒ³å‡ºæ¥æ€Žä¹ˆå¤„ç†è¿™ç§æƒ…å†µï¼Œè¶Šæƒ³è¶Šå¤æ‚ã€‚åœ¨ç½‘ä¸ŠæŸ¥è¯¢èµ„æ–™çš„æ—¶å€™ï¼Œæ„è¯†åˆ°å¯ä»¥åˆ©ç”¨æ•°æ®åº“æœ¬èº«åŽ»åšæŽ’åºæ›´æ–°ï¼Œæ„Ÿè§‰æ€è·¯æ¯”è¾ƒæ–°é¢–ï¼Œå› æ­¤åœ¨è¿™é‡Œåšä¸ªè®°å½•ã€‚ éœ€æ±‚ï¼š ä¸€ä¸ªä½ç½®åˆ—è¡¨ï¼Œåˆå§‹çš„æ—¶å€™è®°å½•æ˜¯æ²¡æœ‰æŽ’åºåºå·çš„ï¼Œç”¨æˆ·å¯ä»¥éšæ„è®¾ç½®æ¯æ¡è®°å½•çš„æŽ’åºåºå·ï¼Œè®¾ç½®å®ŒåŽï¼ŒåŽå°è¦æ›´æ–°æ•°æ®ï¼Œå¹¶å®Œæˆå…¶ä½™æ•°æ®çš„æ›´æ–°ï¼Œå¹¶ä¸”æœ€ç»ˆçš„æ•°æ®ä¸€å®šè¦æ˜¯æŒ‰é¡ºåºæŽ’åˆ—çš„ï¼Œä¸­é—´ä¸èƒ½æœ‰é—´éš”å€¼ã€‚ä¾‹å¦‚ï¼šåŽŸæœ¬ a:1ã€b:2ã€c:3ã€d:4 ï¼Œ3çš„ä½ç½®è¦æ›´æ–°ä¸º8ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„æŽ’åºæŽ’åºåº”è¯¥æ˜¯ï¼ša:1ã€b:2ã€d:3ã€c:4ã€‚ æ€è·¯ï¼š ä¸‰ä¸ªå˜é‡ï¼šåŽŸæœ¬çš„ä½ç½®mï¼Œè¦ä¿®æ”¹çš„ä½ç½®nï¼Œå½“å‰æŽ’åºæœ€å¤§å€¼maxã€‚1234567891011121314151617// ä»¥ä¸‹ä¸ºä¼ªä»£ç if(n &gt; max + 1) &#123; n = max+1;&#125;if(æ˜¯æ–°å¢žæ•°æ®ï¼‰&#123; if max&gt;=n &#123; update table set sort=sort+1 where sort&gt;=n and sort&lt;=max &#125;&#125; else if(ä¿®æ”¹æ•°æ®) &#123; if m&gt;n &#123; update table set sort=sort+1 where sort&gt;=n and sort&lt;m &#125; else if m&lt;n &#123; update table set sort=sort-1 where sort&gt;m and sort&lt;=n &#125;&#125;update table set num = n where id = ä¸šåŠ¡æ•°æ®ID]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>åˆ—è¡¨æŽ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°5-SpringAOPåŸºç¡€]]></title>
    <url>%2F2017%2F11%2F22%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B05-SpringAOP%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[Spring AOPæ˜¯AOPæŠ€æœ¯åœ¨Springä¸­çš„å…·ä½“å®žçŽ°ï¼ŒSpring AOPæž„å»ºäºŽIoCä¹‹ä¸Šï¼Œå’ŒIoCä¸€åŒæž„æˆäº†Springçš„ä¸¤å¤§æ ¸å¿ƒã€‚ AOPæ¦‚è¿°AOPï¼ˆAspect Oriented Programmingï¼‰ï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥è¯´æ˜¯OOPï¼ˆObject Oriented Programmingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æž„ï¼Œç”¨äºŽæ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚ä¸è¿‡OOPå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ¨ªå‘åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸Žå®ƒå¯¹åº”çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºŽå…¶å®ƒç±»åž‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜Žçš„æŒç»­æ€§ä¹Ÿéƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross cuttingï¼‰ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºŽå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚ AOPæŠ€æœ¯æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€æ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶å‘½åä¸ºâ€Aspectâ€ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“â€åˆ‡é¢â€ï¼Œç®€å•è¯´å°±æ˜¯é‚£äº›ä¸Žä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºŽå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½Žæ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºŽæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä½¿ç”¨â€æ¨ªåˆ‡â€æŠ€æœ¯ï¼ŒAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸Žä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„åŸºæœ¬ç›¸ä¼¼ï¼Œæ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹ç‰©ã€‚AOPçš„ä½œç”¨åœ¨äºŽåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚ AOPåŸºç¡€æ¦‚å¿µå­¦ä¹ ä¸€ä¸ªæ–°äº‹ç‰©é¦–å…ˆå°±è¦äº†è§£å…¶åŸºæœ¬æ¦‚å¿µå’Œå…³é”®æœ¯è¯­ï¼Œä¸ºäº†æ›´å¥½çš„ç†è§£AOPæ€æƒ³ï¼Œä¸‹é¢å…ˆæ¥çœ‹ä¸‹æœ‰å…³AOPçš„é‡è¦æ¦‚å¿µï¼š è¿žæŽ¥ç‚¹ï¼ˆJoinpointï¼‰ï¼šè¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»åž‹çš„è¿žæŽ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨Springä¸­è¿žæŽ¥ç‚¹æŒ‡çš„å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®žé™…ä¸Šè¿žæŽ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æž„é€ å™¨ã€‚è¿žæŽ¥ç‚¹æœ‰ä¸¤ä¸ªä¿¡æ¯ç¡®å®šï¼šç¬¬ä¸€æ˜¯æ–¹æ³•è¡¨ç¤ºçš„ç¨‹åºæ‰§è¡Œç‚¹ï¼›ç¬¬äºŒæ˜¯ç›¸å¯¹ç‚¹è¡¨ç¤ºçš„æ–¹ä½ã€‚Springä½¿ç”¨åˆ‡ç‚¹å¯¹æ‰§è¡Œç‚¹è¿›è¡Œå®šä½ï¼Œè€Œæ–¹ä½åœ¨å¢žå¼ºç±»åž‹ä¸­å®šä¹‰ã€‚ åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼šå¯¹è¿žæŽ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰ï¼ŒAOPé€šè¿‡â€œåˆ‡ç‚¹â€å®šä½ç‰¹å®šè¿žæŽ¥ç‚¹ï¼Œä¸€ä¸ªåˆ‡ç‚¹å¯ä»¥åŒ¹é…å¤šä¸ªè¿žæŽ¥ç‚¹ã€‚ å¢žå¼ºï¼ˆAdviceï¼‰ï¼šæŒ‡æ‹¦æˆªåˆ°è¿žæŽ¥ç‚¹ä¹‹åŽè¦æ‰§è¡Œçš„ä»£ç ï¼Œè¿˜åŒ…æ‹¬æ–¹ä½ä¿¡æ¯ï¼Œç»“åˆè¿™ä¸ªæ–¹ä½ä¿¡æ¯å’Œä¸Šé¢çš„åˆ‡ç‚¹å°±å¯ä»¥å®šä½åˆ°ç‰¹å®šçš„è¿žæŽ¥ç‚¹äº†ã€‚é€šçŸ¥åˆ†ä¸ºå‰ç½®ï¼ˆBeforeAdviceï¼‰ã€åŽç½®ï¼ˆAfterRetuningAdviceï¼‰ã€å¼‚å¸¸ï¼ˆThrowsAdviceï¼‰ã€æœ€ç»ˆã€çŽ¯ç»•é€šçŸ¥äº”ç±»ã€‚ ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ï¼šå¢žå¼ºé€»è¾‘çš„ç»‡å…¥ç›®æ ‡ç±»ã€‚ å¼•ä»‹ï¼ˆIntroductionï¼‰ï¼šåœ¨ä¸ä¿®æ”¹ä»£ç çš„å‰æä¸‹ï¼Œå¼•ä»‹å¯ä»¥åœ¨è¿è¡ŒæœŸä¸ºç±»åŠ¨æ€åœ°æ·»åŠ ä¸€äº›æ–¹æ³•æˆ–å­—æ®µã€‚ ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯å°†å¢žå¼ºæ·»åŠ åˆ°ç›®æ ‡ç±»å…·ä½“è¿žæŽ¥ç‚¹ä¸Šçš„è¿‡ç¨‹ã€‚æ ¹æ®ä¸åŒçš„å®žçŽ°æŠ€æœ¯ï¼ŒAOPæœ‰ä¸‰ç§ç»‡å…¥çš„æ–¹å¼: ç¼–è¯‘æœŸç»‡å…¥ï¼Œè¿™è¦æ±‚ä½¿ç”¨ç‰¹æ®Šçš„Javaç¼–è¯‘å™¨ï¼› ç±»è£…è½½æœŸç»‡å…¥ï¼Œè¿™è¦æ±‚ä½¿ç”¨ç‰¹æ®Šçš„ç±»è£…è½½å™¨ï¼› åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œåœ¨è¿è¡ŒæœŸä¸ºç›®æ ‡ç±»æ·»åŠ å¢žå¼ºç”Ÿæˆå­ç±»çš„æ–¹å¼ã€‚ ä»£ç†ï¼ˆProxyï¼‰ï¼šä¸€ä¸ªç±»è¢«AOPç»‡å…¥å¢žå¼ºåŽï¼Œå°±ç”Ÿæˆäº†ä¸€ä¸ªèžåˆåŽŸç±»å’Œå¢žå¼ºé€»è¾‘çš„ä»£ç†ç±»ã€‚ä»£ç†ç±»å¯èƒ½æ˜¯å’ŒåŽŸç±»å…·æœ‰ç›¸åŒæŽ¥å£çš„ç±»ï¼Œä¹Ÿå¯èƒ½å°±æ˜¯åŽŸç±»çš„å­ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨è°ƒç”¨åŽŸç±»ç›¸åŒçš„æ–¹å¼è°ƒç”¨ä»£ç†ç±»ã€‚ åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æŠ½è±¡ã€‚å®ƒç”±åˆ‡ç‚¹å’Œå¢žå¼º(å¼•ä»‹)ç»„æˆï¼Œå®ƒæ—¢åŒ…æ‹¬äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰ï¼Œä¹ŸåŒ…æ‹¬è¿žæŽ¥ç‚¹çš„å®šä¹‰ï¼ŒSpring AOPå°±æ˜¯è´Ÿè´£å®žæ–½åˆ‡é¢çš„æ¡†æž¶ï¼Œå®ƒå°†åˆ‡é¢æ‰€å®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ç»‡å…¥åˆ°åˆ‡é¢æ‰€æŒ‡å®šçš„è¿žæŽ¥ç‚¹ä¸­ã€‚ æç¤ºï¼š Springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œè€ŒAspectjé‡‡ç”¨ç¼–è¯‘å™¨ç»‡å…¥å’Œç±»è£…è½½å™¨ç»‡å…¥ã€‚ åŸºç¡€çŸ¥è¯†Spring AOPä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯åœ¨è¿è¡ŒæœŸç»‡å…¥å¢žå¼ºçš„ä»£ç ï¼ŒåŒ…æ‹¬ä¸¤ç§ä»£ç†æœºåˆ¶ï¼Œä¸€ç§æ˜¯åŸºäºŽJDkçš„åŠ¨æ€ä»£ç†ï¼›å¦ä¸€ç§æ˜¯åŸºäºŽCGLibçš„åŠ¨æ€ä»£ç†ã€‚ä¸‹é¢å…ˆçœ‹ä¸€ä¸ªæœªä½¿ç”¨åŠ¨æ€ä»£ç†çš„ä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031package com.hhxs.bbt.proxy;public class ForumServiceImpl implements ForumService &#123; @SuppressWarnings("static-access") @Override public void removeTopic(int topicId) &#123; // æ€§èƒ½ç›‘è§†å¼€å§‹ PerformanceMonitor.begin("com.hhxs.proxy.ForumServiceImpl.removeTopic"); System.out.println("æ¨¡æ‹Ÿåˆ é™¤Topicè®°å½•:" + topicId); try &#123; Thread.currentThread().sleep(20); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; // æ€§èƒ½ç›‘è§†ç»“æŸ PerformanceMonitor.end(); &#125; @SuppressWarnings("static-access") @Override public void removeForum(int forumId) &#123; PerformanceMonitor.begin("com.hhxs.proxy.ForumServiceImpl.removeForum"); System.out.println("æ¨¡æ‹Ÿåˆ é™¤Forumè®°å½•:" + forumId); try &#123; Thread.currentThread().sleep(40); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; PerformanceMonitor.end(); &#125;&#125; 1234567891011121314151617181920package com.hhxs.bbt.proxy;public class PerformanceMonitor &#123; // é€šè¿‡ä¸€ä¸ªThreadLocalä¿å­˜è°ƒç”¨çº¿ç¨‹ç›¸å…³çš„æ€§èƒ½ç›‘è§†ä¿¡æ¯ private static ThreadLocal&lt;MethodPerformance&gt; performanceRecord = new ThreadLocal&lt;MethodPerformance&gt;(); // å¯åŠ¨å¯¹æŸä¸€ç›®æ ‡æ–¹æ³•çš„æ€§èƒ½ç›‘è§† public static void begin(String method) &#123; System.out.println("begin monitor..."); MethodPerformance mp = new MethodPerformance(method); performanceRecord.set(mp); &#125; public static void end() &#123; System.out.println("end monitor..."); MethodPerformance mp = performanceRecord.get(); mp.printPerformance(); &#125;&#125; 123456789101112131415161718package com.hhxs.bbt.proxy;public class MethodPerformance &#123; private long begin; private long end; private String serviceMethod; public MethodPerformance(String serviceMethod) &#123; this.serviceMethod = serviceMethod; this.begin = System.currentTimeMillis(); &#125; public void printPerformance() &#123; end = System.currentTimeMillis(); long elapse = end - begin; System.out.println(serviceMethod + "èŠ±è´¹" + elapse + "æ¯«ç§’ã€‚"); &#125;&#125; 1234567891011package com.iflytek.bbt.proxy;import com.hhxs.bbt.proxy.ForumService;import com.hhxs.bbt.proxy.ForumServiceImpl;public class TestForumService &#123; public static void main(String[] args) &#123; ForumService forumService = new ForumServiceImpl(); forumService.removeForum(10); forumService.removeTopic(1012); &#125;&#125; è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š12345678begin monitor...æ¨¡æ‹Ÿåˆ é™¤Forumè®°å½•:10end monitor...com.hhxs.proxy.ForumServiceImpl.removeForumèŠ±è´¹46æ¯«ç§’ã€‚begin monitor...æ¨¡æ‹Ÿåˆ é™¤Topicè®°å½•:1012end monitor...com.hhxs.proxy.ForumServiceImpl.removeTopicèŠ±è´¹21æ¯«ç§’ã€‚ æ­£å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œå½“æŸä¸ªæ–¹æ³•éœ€è¦è¿›è¡Œæ€§èƒ½ç›‘è§†ï¼Œå°±å¿…é¡»è°ƒæ•´æ–¹æ³•ä»£ç ï¼Œåœ¨æ–¹æ³•å‰åŽåˆ†åˆ«æ·»åŠ ä¸Šå¼€å¯æ€§èƒ½ç›‘è§†å’Œç»“æŸæ€§èƒ½ç›‘è§†çš„ä»£ç ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ä»£ç†çš„æ–¹å¼ï¼Œå°†ä¸šåŠ¡ç±»æ–¹æ³•ä¸­å¼€å¯å’Œç»“æŸæ€§èƒ½ç›‘è§†çš„è¿™äº›æ¨ªåˆ‡ä»£ç ä»Žä¸šåŠ¡ç±»ä¸­å®Œå…¨å‰¥ç¦»å‡ºæ¥ã€‚å¹¶é€šè¿‡JDKåŠ¨æ€ä»£ç†æŠ€æœ¯æˆ–CGLibåŠ¨æ€ä»£ç†æŠ€æœ¯å°†æ¨ªåˆ‡ä»£ç ç»‡å…¥åˆ°ç›®æ ‡æ–¹æ³•çš„ç›¸åº”ä½ç½®ã€‚ JDKåŠ¨æ€ä»£ç†JDKçš„åŠ¨æ€ä»£ç†ä¸»è¦æ¶‰åŠåˆ°java.lang.reflectåŒ…ä¸­çš„ä¸¤ä¸ªç±»ï¼šProxyå’ŒInvocationHandlerã€‚å…¶ä¸­InvocationHandlerï¼Œé€šè¿‡å®žçŽ°è¯¥æŽ¥å£å®šä¹‰æ¨ªåˆ‡é€»è¾‘ã€‚è€ŒProxyåˆ©ç”¨InvocationHandleråŠ¨æ€åˆ›å»ºä¸€ä¸ªç¬¦åˆæŸä¸€æŽ¥å£çš„å®žä¾‹ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425package com.hhxs.bbt.proxy;public class ForumServiceImpl implements ForumService &#123; @SuppressWarnings("static-access") @Override public void removeTopic(int topicId) &#123; System.out.println("æ¨¡æ‹Ÿåˆ é™¤Topicè®°å½•:" + topicId); try &#123; Thread.currentThread().sleep(20); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; @SuppressWarnings("static-access") @Override public void removeForum(int forumId) &#123; System.out.println("æ¨¡æ‹Ÿåˆ é™¤Forumè®°å½•:" + forumId); try &#123; Thread.currentThread().sleep(40); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 123456789101112131415161718package com.hhxs.bbt.proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;public class PerformanceHandler implements InvocationHandler &#123; private Object target; public PerformanceHandler(Object target) &#123; this.target = target; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; PerformanceMonitor.begin(target.getClass().getName()+"."+method.getName()); Object obj = method.invoke(target, args); PerformanceMonitor.end(); return obj; &#125;&#125; é¦–å…ˆï¼Œæˆ‘ä»¬å®žçŽ°äº†InvocationHandleræŽ¥å£ï¼Œè¯¥æŽ¥å£å®šä¹‰äº†ä¸€ä¸ªinvode(Object proxy,Method method,Object[] args)çš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œmethodæ˜¯è¢«ä»£ç†ç›®æ ‡å®žä¾‹çš„æŸä¸ªå…·ä½“æ–¹æ³•ï¼Œé€šè¿‡å®ƒå¯ä»¥å‘èµ·ç›®æ ‡å®žä¾‹æ–¹æ³•çš„åå°„è°ƒç”¨ï¼›argsæ˜¯ä¼ ç»™è¢«ä»£ç†å®žä¾‹æŸä¸€ä¸ªæ–¹æ³•çš„å…¥å‚æ•°ç»„ï¼Œåœ¨æ–¹æ³•åå°„è°ƒç”¨æ—¶ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨æž„é€ å‡½æ•°é‡Œé€šè¿‡targetä¼ å…¥å¸Œæœ›è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œåœ¨InvocationHandleræŽ¥å£æ–¹æ³•invoke(Object proxy,Method method,Object[] args)é‡Œï¼Œå°†ç›®æ ‡å®žä¾‹ä¼ ç»™method.invoke()æ–¹æ³•ï¼Œè°ƒç”¨ç›®æ ‡å®žä¾‹çš„æ–¹æ³•ã€‚ 123456789101112131415161718192021package com.iflytek.bbt.proxy;import java.lang.reflect.Proxy;import com.hhxs.bbt.proxy.ForumService;import com.hhxs.bbt.proxy.ForumServiceImpl;import com.hhxs.bbt.proxy.PerformanceHandler;public class TestForumService &#123; public static void main(String[] args) &#123; // å¸Œæœ›è¢«ä»£ç†çš„ç›®æ ‡ä¸šåŠ¡ç±» ForumService target = new ForumServiceImpl(); // å°†ç›®æ ‡ä¸šåŠ¡ç±»å’Œæ¨ªåˆ‡ä»£ç ç¼–ç»‡åˆ°ä¸€èµ· PerformanceHandler handler = new PerformanceHandler(target); // æ ¹æ®ç¼–ç»‡äº†ç›®æ ‡ä¸šåŠ¡ç±»é€»è¾‘å’Œæ€§èƒ½ç›‘è§†æ¨ªåˆ‡é€»è¾‘çš„InvocationHandlerå®žä¾‹åˆ›å»ºä»£ç†å®žä¾‹ ForumService proxy = (ForumService) Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), handler); proxy.removeForum(10); proxy.removeTopic(1012); &#125;&#125; ä¸Šé¢çš„ä»£ç å®Œæˆä¸šåŠ¡ç±»ä»£ç å’Œæ¨ªåˆ‡ä»£ç çš„ç¼–ç»‡å·¥ä½œå¹¶ç”Ÿæˆäº†ä»£ç†å®žä¾‹ã€‚è¿è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æžœï¼š12345678begin monitor...æ¨¡æ‹Ÿåˆ é™¤Forumè®°å½•:10end monitor...com.hhxs.bbt.proxy.ForumServiceImpl.removeForumèŠ±è´¹42æ¯«ç§’ã€‚begin monitor...æ¨¡æ‹Ÿåˆ é™¤Topicè®°å½•:1012end monitor...com.hhxs.bbt.proxy.ForumServiceImpl.removeTopicèŠ±è´¹25æ¯«ç§’ã€‚ CGLibåŠ¨æ€ä»£ç†é€šè¿‡ä¸Šé¢çš„å®žä¾‹å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨JDKåˆ›å»ºä»£ç†æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå³å®ƒåªèƒ½ä¸ºæŽ¥å£åˆ›å»ºä»£ç†å®žä¾‹ã€‚å¯¹äºŽæ²¡æœ‰é€šè¿‡æŽ¥å£å®šä¹‰ä¸šåŠ¡æ–¹æ³•çš„ç±»ï¼ŒJDKçš„ä»£ç†æŠ€æœ¯å°±æ— æ³•å¤„ç†äº†ï¼Œè€ŒCGLibé‡‡ç”¨éžå¸¸åº•å±‚çš„å­—èŠ‚ç æŠ€æœ¯ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œå¹¶åœ¨å­ç±»ä¸­é‡‡ç”¨æ–¹æ³•æ‹¦æˆªæ‰€æœ‰çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶é¡ºåŠ¿ç»‡å…¥æ¨ªåˆ‡é€»è¾‘ã€‚ä¸‹é¢é‡‡ç”¨CGLibæŠ€æœ¯æ”¹é€ ä¸Šé¢çš„ä¾‹å­ï¼š1234567891011121314151617181920212223package com.hhxs.bbt.proxy;import java.lang.reflect.Method;import net.sf.cglib.proxy.Enhancer;import net.sf.cglib.proxy.MethodInterceptor;import net.sf.cglib.proxy.MethodProxy;public class CglibProxy implements MethodInterceptor &#123; private Enhancer enhancer = new Enhancer(); public Object getProxy(Class&lt;?&gt; clazz) &#123; enhancer.setSuperclass(clazz); enhancer.setCallback(this); // é€šè¿‡å­—èŠ‚ç æŠ€æœ¯åŠ¨æ€åˆ›å»ºå­ç±»å®žä¾‹ return enhancer.create(); &#125; @Override public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable &#123; PerformanceMonitor.begin(obj.getClass().getName()+"."+method.getName()); Object result = proxy.invokeSuper(obj, args); PerformanceMonitor.end(); return result; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œintercept(Object obj,Method method,Object[] args,MethodProxy proxy)æ˜¯CGLibå®šä¹‰InterceptoræŽ¥å£çš„æ–¹æ³•ï¼Œå®ƒæ‹¦æˆªæ‰€æœ‰ç›®æ ‡ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œobjè¡¨ç¤ºç›®æ ‡ç±»çš„å®žä¾‹ï¼šmethodä¸ºç›®æ ‡ç±»æ–¹æ³•çš„åå°„å¯¹è±¡ï¼›argsä¸ºæ–¹æ³•çš„åŠ¨æ€å…¥å‚ï¼›è€Œproxyä¸ºä»£ç†ç±»å®žä¾‹ã€‚12345678910111213package com.iflytek.bbt.proxy;import com.hhxs.bbt.proxy.CglibProxy;import com.hhxs.bbt.proxy.ForumServiceImpl;public class TestForumService &#123; public static void main(String[] args) &#123; CglibProxy proxy = new CglibProxy(); ForumServiceImpl forumService = (ForumServiceImpl) proxy.getProxy(ForumServiceImpl.class); forumService.removeForum(10); forumService.removeTopic(1024); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æžœï¼š12345678begin monitor...æ¨¡æ‹Ÿåˆ é™¤Forumè®°å½•:10end monitor...com.hhxs.bbt.proxy.ForumServiceImpl$$EnhancerByCGLIB$$5f4be940.removeForumèŠ±è´¹62æ¯«ç§’ã€‚begin monitor...æ¨¡æ‹Ÿåˆ é™¤Topicè®°å½•:1024end monitor...com.hhxs.bbt.proxy.ForumServiceImpl$$EnhancerByCGLIB$$5f4be940.removeTopicèŠ±è´¹24æ¯«ç§’ã€‚ ä»£ç†çŸ¥è¯†å°ç»“ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶é€šè¿‡PerformanceHandleræˆ–CglibProxyå®žçŽ°äº†æ€§èƒ½ç›‘è§†æ¨ªåˆ‡é€»è¾‘çš„åŠ¨æ€ç»‡å…¥ï¼Œä½†è¿™ç§å®žçŽ°æ–¹å¼å­˜åœ¨ä¸‰ä¸ªæ˜Žæ˜¾éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š ç›®æ ‡ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ·»åŠ äº†æ€§èƒ½ç›‘è§†æ¨ªåˆ‡é€»è¾‘ï¼Œè€Œæœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½åªæ˜¯å¸Œæœ›å¯¹ä¸šåŠ¡ç±»ä¸­çš„æŸäº›ç‰¹å®šæ–¹æ³•æ·»åŠ æ¨ªåˆ‡é€»è¾‘ã€‚ æˆ‘ä»¬é€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼æŒ‡å®šçš„ç»‡å…¥æ¨ªåˆ‡é€»è¾‘çš„åˆ‡å…¥ç‚¹ã€‚ éœ€è¦æ‰‹å·¥ç¼–å†™ä»£ç†å®žä¾‹çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¸ºä¸åŒç±»åˆ›å»ºä»£ç†æ—¶ï¼Œéœ€è¦åˆ†åˆ«ç¼–å†™ç›¸åº”ç¨‹åºä»£ç ï¼Œæ— æ³•åšåˆ°é€šç”¨ã€‚ ä»¥ä¸Šä¸‰ä¸ªé—®é¢˜ï¼Œåœ¨AOPä¸­å æœ‰é‡è¦çš„åœ°ä½ï¼ŒSpring AOPçš„ä¸»è¦å·¥ä½œå°±æ˜¯å›´ç»•ä»¥ä¸Šä¸‰ç‚¹å±•å¼€ï¼šSpring AOPé€šè¿‡Pointcutï¼ˆåˆ‡ç‚¹ï¼‰æŒ‡å®šåœ¨å“ªäº›ç±»çš„å“ªäº›æ–¹æ³•ä¸Šç»‡å…¥æ¨ªåˆ‡é€»è¾‘ï¼Œé€šè¿‡Adviceï¼ˆå¢žå¼ºï¼‰æè¿°æ¨ªåˆ‡é€»è¾‘å’Œæ–¹æ³•çš„å…·ä½“ç»‡å…¥ç‚¹ã€‚æ­¤å¤–ï¼ŒSpringé€šè¿‡Advisorï¼ˆåˆ‡é¢ï¼‰å°†Pointcutå’ŒAdviceä¸¤è€…ç»„è£…èµ·æ¥ã€‚æœ‰äº†Advisorçš„ä¿¡æ¯ï¼ŒSpringå°±å¯ä»¥åˆ©ç”¨JDKæˆ–CGLibçš„åŠ¨æ€ä»£ç†æŠ€æœ¯é‡‡ç”¨ç»Ÿä¸€çš„æ–¹å¼ä¸ºç›®æ ‡Beanåˆ›å»ºç»‡å…¥åˆ‡é¢çš„ä»£ç†å¯¹è±¡äº†ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç”±äºŽCGLibåŠ¨æ€åˆ›å»ºå­ç±»çš„æ–¹å¼ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½å¯¹ç›®æ ‡ç±»ä¸­çš„finalï¼Œprivateç­‰æ–¹æ³•è¿›è¡Œä»£ç†ã€‚]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°4-Springå®¹å™¨é«˜çº§ä¸»é¢˜]]></title>
    <url>%2F2017%2F11%2F15%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04-Spring%E5%AE%B9%E5%99%A8%E9%AB%98%E7%BA%A7%E4%B8%BB%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Springå®¹å™¨æ˜¯ä¸€éƒ¨è®¾è®¡ç²¾å¦™çš„æœºå™¨ï¼Œå…¶ä¼˜å¼‚çš„å¤–åœ¨è¡¨çŽ°æ˜¯é€šè¿‡ç²¾ç»†çš„å†…éƒ¨è®¾è®¡å®žçŽ°çš„ã€‚æœ¬ç¯‡å°†å¯¹Springå®¹å™¨è¿›è¡Œè§£æž„ï¼Œä»Žå†…éƒ¨æŽ¢ç©¶Springå®¹å™¨çš„ä½“ç³»ç»“æž„å’Œè¿è¡Œæµç¨‹ã€‚ 1ã€Springå®¹å™¨æŠ€æœ¯å†…å¹•1.1 å†…éƒ¨å·¥ä½œæœºåˆ¶ä¸‹å›¾æè¿°äº†Springå®¹å™¨ä»ŽåŠ è½½é…ç½®æ–‡ä»¶åˆ°åˆ›å»ºå‡ºä¸€ä¸ªå®Œæ•´Beançš„ä½œä¸šæµç¨‹ä»¥åŠå‚ä¸Žçš„è§’è‰²ï¼š ResourceLoaderä»Žå­˜å‚¨ä»‹è´¨ä¸­æŽ¥æ”¶Springé…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨Resourceè¡¨ç¤ºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„èµ„æºï¼› BeanDefinitionReaderè¯»å–Resourceæ‰€æŒ‡å‘çš„é…ç½®æ–‡ä»¶èµ„æºï¼Œç„¶åŽè§£æžé…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€ä¸ª&lt;bean&gt;è§£æžæˆä¸€ä¸ªBeanDefinitionå¯¹è±¡ï¼Œå¹¶ä¿å­˜åˆ°BeanDefinitionRegisteryä¸­ï¼› å®¹å™¨æ‰«æBeanDefinitionRegisteryä¸­çš„BeanDefinitionï¼Œä½¿ç”¨Javaçš„åå°„æœºåˆ¶è‡ªåŠ¨è¯†åˆ«å‡ºBeanå·¥åŽ‚åŽå¤„ç†å™¨ï¼ˆå®žçŽ°BeanFactoryPostProcessoræŽ¥å£ï¼‰çš„Beanï¼Œç„¶åŽè°ƒç”¨è¿™äº›Beanå·¥åŽ‚åŽå¤„ç†å™¨å¯¹BeanDefinitionRegisteryä¸­çš„BeanDefinitionè¿›è¡ŒåŠ å·¥å¤„ç†ã€‚ä¸»è¦å®Œæˆä»¥ä¸‹ä¸¤é¡¹å·¥ä½œï¼š å¯¹ä½¿ç”¨åˆ°å ä½ç¬¦çš„&lt;bean&gt;å…ƒç´ æ ‡ç­¾è¿›è¡Œè§£æžï¼Œå¾—åˆ°æœ€ç»ˆçš„é…ç½®å€¼ï¼Œè¿™æ„å‘³å¯¹ä¸€äº›åŠæˆå“çš„BeanDefinitionå¯¹è±¡è¿›è¡ŒåŠ å·¥å¤„ç†å¹¶å¾—åˆ°æˆå“çš„BeanDefinitionå¯¹è±¡ï¼› å¯¹BeanDefinitionRegisteryä¸­çš„BeanDefinitionè¿›è¡Œæ‰«æï¼Œé€šè¿‡Javaåå°„æœºåˆ¶æ‰¾å‡ºæ‰€æœ‰å±žæ€§ç¼–è¾‘å™¨çš„Bean(å®žçŽ°java.beans.PropertyEditoræŽ¥å£çš„Bean) ï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬æ³¨å†Œåˆ°Springå®¹å™¨çš„å±žæ€§ç¼–è¾‘å™¨æ³¨å†Œè¡¨ä¸­ï¼ˆPropertyEditorRegistryï¼‰ï¼› Springå®¹å™¨ä»ŽBeanDefinitionRegisteryä¸­å–å‡ºåŠ å·¥åŽçš„BeanDefinitionï¼Œå¹¶è°ƒç”¨InstantiationStrategyç€æ‰‹è¿›è¡ŒBeanå®žä¾‹åŒ–çš„å·¥ä½œï¼› åœ¨å®žä¾‹åŒ–Beanæ—¶ï¼ŒSpringå®¹å™¨ä½¿ç”¨BeanWrapperå¯¹Beanè¿›è¡Œå°è£…ï¼ŒBeanWrapperæä¾›äº†å¾ˆå¤šä»¥Javaåå°„æœºåˆ¶æ“ä½œBeançš„æ–¹æ³•ï¼Œå®ƒå°†ç»“åˆè¯¥Beançš„BeanDefinitionä»¥åŠå®¹å™¨ä¸­å±žæ€§ç¼–è¾‘å™¨ï¼Œå®ŒæˆBeanå±žæ€§çš„è®¾ç½®å·¥ä½œï¼› åˆ©ç”¨å®¹å™¨ä¸­æ³¨å†Œçš„BeanåŽå¤„ç†å™¨ï¼ˆå®žçŽ°BeanPostProcessoræŽ¥å£çš„Beanï¼‰å¯¹å·²ç»å®Œæˆå±žæ€§è®¾ç½®å·¥ä½œçš„Beanè¿›è¡ŒåŽç»­åŠ å·¥ï¼Œç›´æŽ¥è£…é…å‡ºä¸€ä¸ªå‡†å¤‡å°±ç»ªçš„Beanã€‚ Springç»„ä»¶æŒ‰å…¶æ‰€æ‰¿æ‹…çš„è§’è‰²å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç±»ï¼š ç‰©æ–™ç»„ä»¶ï¼šResourceã€BeanDefinitionã€PropertyEditorä»¥åŠæœ€ç»ˆçš„Beanç­‰ï¼Œå®ƒä»¬æ˜¯åŠ å·¥æµç¨‹ä¸­è¢«åŠ å·¥ã€è¢«æ¶ˆè´¹çš„ç»„ä»¶ï¼Œå°±åƒæµæ°´çº¿ä¸Šè¢«åŠ å·¥çš„ç‰©æ–™ï¼› åŠ å·¥è®¾å¤‡ç»„ä»¶ï¼šResourceloaderã€BeanDefinitionReaderã€BeanFactoryPostProcessorã€InstantiationStrategyä»¥åŠBeanWrapperç­‰ç»„ä»¶åƒæ˜¯æµæ°´çº¿ä¸Šä¸åŒçŽ¯èŠ‚çš„åŠ å·¥è®¾å¤‡ï¼Œå¯¹ç‰©æ–™ç»„ä»¶å°½å¿ƒå›½å®¶å…¬å¤„ç†ã€‚ 1.2 BeanDefinitionorg.springframework.beans.factory.config.BeanDefinitionæ˜¯é…ç½®æ–‡ä»¶&lt;bean&gt;å…ƒç´ æ ‡ç­¾çš„åœ¨å®¹å™¨ä¸­çš„å†…åœ¨è¡¨ç¤ºã€‚ RootBeanDefinitionæ˜¯æœ€å¸¸ç”¨çš„å®žçŽ°ç±»ï¼Œå®ƒå¯¹åº”ä¸€èˆ¬æ€§çš„&lt;bean&gt;å…ƒç´ æ ‡ç­¾ã€‚å¦‚æžœæœ‰çˆ¶å­å…³ç³»ï¼Œçˆ¶&lt;bean&gt;ç”¨RootBeanDefinitionè¡¨ç¤ºï¼Œå­&lt;bean&gt;ç”¨ChildBeanDefinitionè¡¨ç¤ºï¼Œè‹¥æ²¡æœ‰çˆ¶å­å…³ç³»ï¼Œ&lt;bean&gt;å°±ä½¿ç”¨RootBeanDefinitionè¡¨ç¤ºã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒBeanDefinitionåªåœ¨å®¹å™¨å¯åŠ¨æ—¶åŠ è½½å¹¶è§£æžï¼Œé™¤éžå®¹å™¨åˆ·æ–°æˆ–é‡å¯ï¼Œè¿™äº›ä¿¡æ¯ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ 1.3 InstantiationStrategyorg.springframework.beans.factory.support.InstantiationStrategyè´Ÿè´£æ ¹æ®BeanDefinitionå¯¹è±¡åˆ›å»ºä¸€ä¸ªBeanå®žä¾‹ã€‚ä¹‹æ‰€ä»¥å°†å®žä¾‹åŒ–Beançš„å·¥ä½œé€šè¿‡ä¸€ä¸ªç­–ç•¥æŽ¥å£è¿›è¡Œæè¿°ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å¯ä»¥é‡‡ç”¨ä¸åŒçš„å®žä¾‹åŒ–ç­–ç•¥ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åº”ç”¨éœ€æ±‚ã€‚ SimpleInstantiationStrategyç­–ç•¥åˆ©ç”¨Beanå®žçŽ°ç±»çš„é»˜è®¤æž„é€ å‡½æ•°ã€å¸¦å‚æž„é€ å‡½æ•°æˆ–å·¥åŽ‚æ–¹æ³•åˆ›å»ºBeançš„å®žä¾‹ã€‚CglibSubclassingInstantiationStrategyåˆ©ç”¨CGLibç±»åº“ä¸ºBeanåŠ¨æ€ç”Ÿæˆå­ç±»ï¼Œåœ¨å­ç±»ä¸­ç”Ÿæˆæ–¹æ³•æ³¨å…¥é€»è¾‘ï¼Œç„¶åŽç”¨è¿™ä¸ªå­ç±»åˆ›å»ºBeanå®žä¾‹ã€‚ InstantiationStrategyä»…è´Ÿè´£å®žä¾‹åŒ–Beançš„æ“ä½œï¼Œå®ƒå¹¶ä¸ä¼šå‚ä¸ŽBeanå±žæ€§çš„è®¾ç½®å·¥ä½œã€‚å±žæ€§å¡«å……çš„å·¥ä½œå°†ç”±ä¸‹é¢çš„BeanWrapperæ¥å®Œæˆã€‚ 1.4 BeanWrapperorg.springframework.beans.BeanWrapperæ˜¯Springå®¹å™¨ä¸­é‡è¦çš„ç»„ä»¶ç±»ã€‚BeanWrapperç›¸å½“äºŽä¸€ä¸ªä»£ç†å™¨ï¼ŒSpringé€šè¿‡BeanWrapperå®ŒæˆBeanå±žæ€§çš„å¡«å……å·¥ä½œã€‚ PropertyAccessoræŽ¥å£å®šä¹‰äº†å„ç§è®¿é—®Beanå±žæ€§çš„æ–¹æ³•ï¼Œè€ŒPropertyEditorRegistryæ˜¯å±žæ€§ç¼–è¾‘å™¨çš„æ³¨å†Œè¡¨ã€‚æ‰€ä»¥BeanWrapperå®žçŽ°ç±»BeanWrapperImplå…·æœ‰äº†ä¸‰é‡èº«ä»½ï¼š BeanåŒ…è£¹å™¨ å±žæ€§è®¿é—®å™¨ å±žæ€§ç¼–è¾‘å™¨æ³¨å†Œè¡¨ 2ã€å±žæ€§ç¼–è¾‘å™¨ä»»ä½•å®žçŽ°java.beans.PropertyEditoræŽ¥å£çš„ç±»éƒ½æ˜¯å±žæ€§ç¼–è¾‘å™¨ã€‚å±žæ€§ç¼–è¾‘å™¨çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å°†å¤–éƒ¨çš„è®¾ç½®å€¼ï¼Œè½¬æ¢ä¸ºJVMå†…éƒ¨çš„å¯¹åº”ç±»åž‹ï¼Œæ‰€ä»¥å±žæ€§ç¼–è¾‘å™¨å…¶å®žå°±æ˜¯ä¸€ä¸ªç±»åž‹è½¬æ¢å™¨ã€‚ 2.1 JavaBeançš„ç¼–è¾‘å™¨JavaBeanè§„èŒƒé€šè¿‡java.beans.PropertyEditorå®šä¹‰äº†è®¾ç½®JavaBeanå±žæ€§çš„æ–¹æ³•ï¼Œé€šè¿‡BeanInfoæè¿°äº†JavaBeanå“ªäº›å±žæ€§æ˜¯å¯å®šåˆ¶çš„ï¼Œæ­¤å¤–è¿˜æè¿°äº†å¯å®šåˆ¶å±žæ€§ä¸ŽPropertyEditorçš„å¯¹åº”å…³ç³»ã€‚ BeanInfoä¸ŽJavaBeanä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œé€šè¿‡ä¸¤è€…ä¹‹é—´è§„èŒƒçš„å‘½åç¡®ç«‹ï¼šå¯¹åº”JavaBeançš„BeanInfoé‡‡ç”¨å¦‚ä¸‹çš„å‘½åè§„èŒƒï¼š&lt;Bean&gt;BeanInfoã€‚å¦‚ChartBeanå¯¹åº”çš„BeanInfoä¸ºChartBeanBeanInfoã€‚ JavaBeanè§„èŒƒè¿˜æä¾›äº†ä¸€ä¸ªç®¡ç†é»˜è®¤å±žæ€§ç¼–è¾‘å™¨çš„ç®¡ç†å™¨ï¼šPropertyEditorManagerï¼Œè¯¥ç®¡ç†å™¨å†…ä¿å­˜ç€ä¸€äº›å¸¸è§ç±»åž‹çš„å±žæ€§ç¼–è¾‘å™¨ï¼Œå¦‚æžœæŸä¸ªJavaBeançš„å¸¸è§ç±»åž‹å±žæ€§æ²¡æœ‰é€šè¿‡BeanInfoæ˜¾ç¤ºæŒ‡å®šå±žæ€§ç¼–è¾‘å™¨ï¼ŒIDEå°†è‡ªåŠ¨ä½¿ç”¨PropertyEditorManagerä¸­æ³¨å†Œçš„å¯¹åº”é»˜è®¤å±žæ€§ç¼–è¾‘å™¨ã€‚ PropertyEditoræ˜¯å±žæ€§ç¼–è¾‘å™¨çš„æŽ¥å£ï¼Œå®ƒè§„å®šäº†å°†å¤–éƒ¨è®¾ç½®å€¼è½¬æ¢ä¸ºå†…éƒ¨JavaBeanå±žæ€§å€¼çš„è½¬æ¢æŽ¥å£æ–¹æ³•ã€‚PropertyEditorä¸»è¦çš„æŽ¥å£æ–¹æ³•è¯´æ˜Žå¦‚ä¸‹ï¼š Object getValues()ï¼šè¿”å›žå±žæ€§çš„å½“å‰å€¼ã€‚åŸºæœ¬ç±»åž‹è¢«å°è£…æˆå¯¹åº”çš„å°è£…ç±»å®žä¾‹ï¼› void setValue(Object newValue)ï¼šè®¾ç½®å±žæ€§çš„å€¼ï¼ŒåŸºæœ¬ç±»åž‹ä»¥å°è£…ç±»ä¼ å…¥ï¼› String getAsText()ï¼šå°†å±žæ€§å¯¹è±¡ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä»¥ä¾¿å¤–éƒ¨çš„å±žæ€§ç¼–è¾‘å™¨èƒ½ä»¥å¯è§†åŒ–æ–¹å¼æ˜¾ç¤ºã€‚ç¼ºçœè¿”å›žnullï¼Œè¡¨ç¤ºè¯¥å±žæ€§ä¸èƒ½ä»¥å­—ç¬¦ä¸²è¡¨ç¤ºï¼› void setAsText(String text)ï¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²åŽ»æ›´æ–°å±žæ€§çš„å†…éƒ¨å€¼ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸€èˆ¬ä»Žå¤–éƒ¨å±žæ€§ç¼–è¾‘å™¨ä¼ å…¥ï¼› String[] getTags()ï¼šè¿”å›žè¡¨ç¤ºæœ‰æ•ˆå±žæ€§å€¼çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥ä¾¿å±žæ€§ç¼–è¾‘å™¨èƒ½ä»¥ä¸‹æ‹‰æ¡†çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ç¼ºçœè¿”å›žnullï¼Œè¡¨ç¤ºè¯¥å±žæ€§æ²¡æœ‰åŒ¹é…çš„å­—ç¬¦å€¼æœ‰é™é›†åˆã€‚ String getJavaInitializationString()ï¼šä¸ºå±žæ€§æä¾›ä¸€ä¸ªè¡¨ç¤ºåˆå§‹å€¼çš„å­—ç¬¦ä¸²ï¼Œå±žæ€§ç¼–è¾‘å™¨ä»¥æ­¤å€¼ä½œä¸ºå±žæ€§çš„é»˜è®¤å€¼ã€‚ BeanInfoä¸»è¦æè¿°äº†å“ªäº›å±žæ€§å¯ä»¥ç¼–è¾‘ä»¥åŠå¯¹åº”çš„å±žæ€§ç¼–è¾‘å™¨ï¼Œæ¯ä¸€ä¸ªå±žæ€§å¯¹åº”ä¸€ä¸ªå±žæ€§æè¿°å™¨PropertyDescriptorã€‚BeanInfoæŽ¥å£æœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯ï¼šPropertyDescriptor[] getPropertyDescriptors()ï¼Œè¯¥æ–¹æ³•è¿”å›žJavaBeançš„å±žæ€§æè¿°å™¨æ•°ç»„ã€‚ 2.2 Springé»˜è®¤å±žæ€§ç¼–è¾‘å™¨SpringçŽ¯å¢ƒä¸‹çš„å±žæ€§ç¼–è¾‘å™¨åŠŸèƒ½éžå¸¸å•ä¸€ï¼Œä»…éœ€è¦å°†é…ç½®æ–‡ä»¶ä¸­å­—é¢å€¼è½¬æ¢ä¸ºå±žæ€§ç±»åž‹çš„å¯¹è±¡å³å¯ï¼Œå¹¶ä¸éœ€è¦æä¾›UIç•Œé¢ï¼ŒSpringä¸ºå¸¸è§çš„å±žæ€§ç±»åž‹æä¾›äº†é»˜è®¤çš„å±žæ€§ç¼–è¾‘å™¨ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š ç±»åˆ« è¯´æ˜Ž åŸºç¡€æ•°æ®ç±»åž‹ åˆ†ä¸ºå‡ ä¸ªå°ç±»ï¼š1) åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œå¦‚ï¼šbooleanã€byteã€shortã€intç­‰ï¼›2) åŸºæœ¬æ•°æ®ç±»åž‹å°è£…ç±»ï¼šå¦‚ï¼šLongã€Characterã€Integerç­‰ï¼›3) ä¸¤ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹çš„æ•°ç»„ï¼Œchar[]å’Œbyte[]ï¼›4) å¤§æ•°ç±»ï¼ŒBigDecimalå’ŒBigInteger é›†åˆç±» ä¸º5ç§ç±»åž‹çš„é›†åˆç±»Collectionã€Setã€SortedSetã€Listå’ŒSortedMapæä¾›äº†ç¼–è¾‘å™¨ èµ„æºç±» ç”¨äºŽè®¿é—®å¤–éƒ¨èµ„æºçš„8ä¸ªå¸¸è§ç±»Classã€Class[]ã€Fileã€InputSteamã€Localeã€Propertiesã€Resource[]å’ŒURLã€‚ è¿™äº›é»˜è®¤çš„å±žæ€§ç¼–è¾‘å™¨è§£å†³å¸¸è§å±žæ€§ç±»åž‹çš„æ³¨å†Œé—®é¢˜ï¼Œå¦‚æžœç”¨æˆ·çš„åº”ç”¨åŒ…æ‹¬ä¸€äº›ç‰¹æ®Šç±»åž‹çš„å±žæ€§ï¼Œä¸”å¸Œæœ›åœ¨é…ç½®æ–‡ä»¶ä¸­ä»¥å­—é¢å€¼æä¾›é…ç½®å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦ç¼–å†™è‡ªå®šä¹‰å±žæ€§ç¼–è¾‘å™¨å¹¶æ³¨å†Œåˆ°Springå®¹å™¨ä¸­ã€‚ï¼ˆåœ¨SpringçŽ¯å¢ƒä¸‹è‡ªå®šä¹‰å±žæ€§ç¼–è¾‘å™¨ä»…éœ€è¦è¦†ç›–PropertyEditorSupportçš„setAsText()æ–¹æ³•å°±å¯ä»¥äº†ã€‚ï¼‰ä¸‹é¢çœ‹ä¸€ä»£ç ç‰‡æ®µï¼šæˆ‘ä»¬çŽ°åœ¨å¸Œæœ›åœ¨é…ç½®Bossæ—¶ï¼Œä¸é€šè¿‡å¼•ç”¨Beançš„æ–¹å¼æ³¨å…¥Bossçš„carå±žæ€§ï¼Œè€Œå¸Œæœ›ç›´æŽ¥é€šè¿‡å­—ç¬¦ä¸²å­—é¢å€¼æä¾›é…ç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637// Carç±»public class Car &#123; private int maxSpeed; public String brand; pirvate double price; // çœç•¥get/setteræ–¹æ³•&#125;// Bossç±»public class Boss &#123; private String name; private Car car = new Car(); // çœç•¥get/setter&#125;// Carè‡ªå®šä¹‰å±žæ€§ç¼–è¾‘å™¨import java.beans.PropertyEditorSupportpublic class CustomCarEditor extends PropertyEditorSupport &#123; // 1.å°†å­—é¢å€¼è½¬æ¢ä¸ºå±žæ€§ç±»åž‹å¯¹è±¡ public void setAsText(String text) &#123; if(text == null || text.indexOf(",") == 1) &#123; throw new IllegalArgumentException("è®¾ç½®çš„å­—ç¬¦ä¸²æ ¼å¼ä¸æ­£ç¡®"); &#125; String[] infos = text.split(","); Car car = new Car(); car.setBrand(infos[0]); car.setMaxSpeed(Integer.parseInt(infos[1])); car.setPrice(Double.parseDouble(infos[2])); // 2.è°ƒç”¨çˆ¶ç±»çš„setValue()æ–¹æ³•è®¾ç½®è½¬æ¢åŽçš„å±žæ€§å¯¹è±¡ setValue(car); &#125;&#125; æ³¨å†Œè‡ªå®šä¹‰å±žæ€§ç¼–è¾‘å™¨ï¼šå¦‚æžœä½¿ç”¨BeanFactoryï¼Œç”¨æˆ·éœ€è¦æ‰‹å·¥è°ƒç”¨registerCustomEditor(Class requiredTypeï¼ŒPropertyEditor propertyEditor)æ–¹æ³•æ³¨å†Œè‡ªå®šä¹‰å±žæ€§ç¼–è¾‘å™¨ï¼›å¦‚æžœä½¿ç”¨ApplicationContextï¼Œåˆ™åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶é€šè¿‡CustomEditorConfigureræ³¨å†Œå³å¯ã€‚CustomEditorConfigurerå®žçŽ°BeanFactoryPostProcessoræŽ¥å£ï¼Œå› æ­¤æ˜¯ä¸€ä¸ªBeanå·¥åŽ‚åŽå¤„ç†å™¨ã€‚ 123456789101112131415161718&lt;!-- 1.é…ç½®è‡ªåŠ¨æ³¨å†Œå±žæ€§ç¼–è¾‘å™¨çš„CustomEditorConfigurer --&gt;&lt;bean class="org.springframework.beans.factory.config.CustomEditorConfigurer"&gt; &lt;property name="customEditors"&gt; &lt;map&gt; &lt;!-- 2.1 å±žæ€§ç¼–è¾‘å™¨å¯¹åº”çš„å±žæ€§ç±»åž‹--&gt; &lt;entry key="com.hhxs.editor.Car"&gt; &lt;!-- 2.2 å¯¹åº”çš„å±žæ€§ç¼–è¾‘å™¨Bean--&gt; &lt;bean class="com.hhxs.editorã€‚CustomCarEditor"/&gt; &lt;/entry&gt; &lt;/map&gt; &lt;/property&gt;&lt;/bean&gt;&lt;bean&gt; &lt;property name="name" value=â€œJohnâ€/&gt; &lt;!-- 3.è¯¥å±žæ€§å°†ä½¿ç”¨2å¤„çš„å±žæ€§ç¼–è¾‘å™¨å®Œæˆå±žæ€§å¡«å……æ“ä½œ --&gt; &lt;property name="car" value="çº¢æ——CA72,200,20000.00"/&gt;&lt;/bean&gt; æç¤ºï¼š æŒ‰ç…§JavaBeansçš„è§„èŒƒï¼ŒJavaBeansçš„åŸºç¡€è®¾æ–½ä¼šåœ¨JavaBeanç›¸åŒç±»åŒ…ä¸‹æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨&lt;JavaBean&gt;Editorçš„ç±»ï¼Œå¦‚æžœå­˜åœ¨ï¼Œè‡ªåŠ¨ä½¿ç”¨&lt;JavaBean&gt;Editorä½œä¸ºè¯¥JavaBeançš„PropertyEditorã€‚Springä¹Ÿæ”¯æŒè¿™ä¸ªè§„èŒƒï¼Œè¿™æ ·å°±æ— éœ€æ˜¾ç¤ºåœ¨CustomEditorConfigurerä¸­æ³¨å†Œäº†ã€‚ 3ã€ä½¿ç”¨å¤–éƒ¨å±žæ€§æ–‡ä»¶åœ¨è¿›è¡Œæ•°æ®æºä»¥åŠæ–‡ä»¶æœåŠ¡å™¨ç­‰èµ„æºé…ç½®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œä½†æ˜¯è¿™æ ·ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸€æ—¦ç›¸åº”çš„èµ„æºçŽ¯å¢ƒå˜äº†ï¼Œæˆ‘ä»¬å°±è¦åŽ»æ›´æ”¹é…ç½®æ–‡ä»¶ï¼Œè¿™ä¼šå¢žåŠ æˆ‘ä»¬çš„éƒ¨ç½²å¤æ‚åº¦ï¼Œå¢žåŠ ç»´æŠ¤å·¥ä½œé‡ã€‚è¿˜æœ‰ä¸€ç§æ›´å¥½çš„æ–¹å¼ï¼Œæ˜¯å°†è¿™äº›ç»å¸¸å˜åŠ¨çš„çš„é…ç½®ä¿¡æ¯ç‹¬ç«‹åˆ°ä¸€ä¸ªå¤–éƒ¨å±žæ€§æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨Springé…ç½®æ–‡ä»¶ä¸­é€šè¿‡å½¢å¦‚${user}ã€${password}ç­‰å ä½ç¬¦å¼•ç”¨å±žæ€§æ–‡ä»¶ä¸­çš„å±žæ€§é¡¹ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªé…ç½®æ•°æ®æºçš„ä¾‹å­ï¼š 123456789101112131415161718// jdbc.propertiesæ–‡ä»¶driverClassName=com.mysql.jdbc.Driver url=jdbc:mysql://localhost:3306/testuserName=rootpassword=1234// Springé…ç½®æ–‡ä»¶ä»£ç ç‰‡æ®µ&lt;!-- 1.å¼•å…¥jdbc.propertieså±žæ€§æ–‡ä»¶ --&gt;&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" p:location="classpath:com/hhxs/placeholder/jdbc.properties" p:fileEncoding="utf-8"/&gt;&lt;!-- 2.é€šè¿‡å±žæ€§åå¼•ç”¨å±žæ€§å€¼ --&gt;&lt;bean id="dataSource" class=â€org.apacheã€‚commons.dbcp.BasicDataSourceâ€ destroy-method="close" p:driverClassName="$&#123;driverClassName&#125;" p:url="$&#123;url&#125;" p:username="$&#123;userName&#125;" p:password="$&#123;password&#125;" /&gt; PropertyPlaceholderConfigurerå…¶ä»–å±žæ€§ locationsï¼šå¦‚æžœåªæœ‰ä¸€ä¸ªå±žæ€§æ–‡ä»¶ï¼Œç›´æŽ¥ä½¿ç”¨locationå±žæ€§æŒ‡å®šå°±å¯ä»¥äº†ï¼Œå¦‚æžœæ˜¯å¤šä¸ªå±žæ€§æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡locationså±žæ€§è¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥åƒé…ç½®Listä¸€æ ·é…ç½®locationså±žæ€§ã€‚ 1234567&lt;property name="locations"&gt; &lt;list&gt; &lt;value&gt;jdbc1.properties/value&gt; &lt;value&gt;jdbc2.properties &lt;/value&gt; &lt;value&gt;jdbc3.properties&lt;/value&gt; &lt;/list&gt;&lt;/property&gt; fileEncodingï¼š å±žæ€§æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼ŒSpringä½¿ç”¨æ“ä½œç³»ç»Ÿé»˜è®¤ç¼–ç è¯»å–å±žæ€§æ–‡ä»¶ï¼Œå¦‚æžœå±žæ€§æ–‡ä»¶é‡‡ç”¨äº†ç‰¹æ®Šç¼–ç ï¼Œéœ€è¦é€šè¿‡è¯¥å±žæ€§æ˜¾ç¤ºæŒ‡å®šã€‚ orderï¼šå¦‚æžœé…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†å¤šä¸ªPropertyPlaceHolderConfigurerï¼Œåˆ™é€šè¿‡è¯¥å±žæ€§æŒ‡å®šä¼˜å…ˆé¡ºåºã€‚ placeholderPrefixï¼šåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡${å±žæ€§å}å¼•ç”¨å±žæ€§æ–‡ä»¶ä¸­çš„å±žæ€§é¡¹ï¼Œå…¶ä¸­â€${â€œä¸ºé»˜è®¤çš„å ä½ç¬¦å‰ç¼€ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ”¹ä¸ºå…¶ä»–çš„å‰ç¼€ç¬¦ã€‚ placeholderSuffixï¼šå ä½ç¬¦åŽç¼€ï¼Œé»˜è®¤ä¸ºâ€}â€ã€‚ ä½¿ç”¨&lt;context:property-placeholder&gt;å¼•ç”¨å±žæ€§æ–‡ä»¶å¯ä»¥ä½¿ç”¨contextå‘½åç©ºé—´å®šä¹‰å±žæ€§æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š1&lt;context:property-placeholder location="classpath:com/hhxs/bbt/placeholder/jdbc.properties"/&gt; åŸºäºŽæ³¨è§£åŠåŸºäºŽJavaç±»é…ç½®ä¸­å¼•ç”¨å±žæ€§åŸºäºŽæ³¨è§£é…ç½®çš„Beanå¯ä»¥é€šè¿‡@Valueçš„æ³¨è§£ä¸ºBeançš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•å…¥å‚è‡ªåŠ¨æ³¨å…¥å®¹å™¨å·²æœ‰çš„å±žæ€§ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š12345678910111213141516171819202122import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;@Componentpublic class MyDataSource &#123; @Value("$&#123;driverClassName&#125;") private String driverClassName; @Value("$&#123;url&#125;") private String url; @Value("$&#123;userName&#125;") private String userName; @Value("$&#123;password&#125;") private String password; public String toString() &#123; return ToStringBuilder.reflectionToString(this); &#125;&#125; ç”±äºŽæ ‡æ³¨@Configurationçš„ç±»æœ¬èº«ç›¸å½“äºŽæ ‡æ³¨@Componentï¼Œæ‰€ä»¥åœ¨æ ‡æ³¨@Configurationç±»ä¸­å¼•ç”¨å±žæ€§çš„æ–¹å¼å’ŒåŸºäºŽæ³¨è§£é…ç½®çš„å¼•ç”¨æ–¹å¼æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ 5ã€å®¹å™¨äº‹ä»¶Springçš„ApplicationContextèƒ½å¤Ÿå‘å¸ƒäº‹ä»¶å¹¶ä¸”å…è®¸æ³¨å†Œç›¸åº”çš„äº‹ä»¶ç›‘å¬å™¨ã€‚Javaä¸­é€šè¿‡java.util.EventObjectç±»å’Œjava.util.EventListeneræŽ¥å£æè¿°äº‹ä»¶å’Œç›‘å¬å™¨ï¼ŒæŸä¸ªç»„ä»¶æˆ–æ¡†æž¶è¦å»ºç«‹è‡ªå·±çš„äº‹ä»¶å‘å¸ƒå’Œç›‘å¬æœºåˆ¶ï¼Œä¸€èˆ¬éƒ½é€šè¿‡æ‰©å±•å®ƒä»¬è¿›è¡Œå®šä¹‰ã€‚åœ¨äº‹ä»¶ä½“ç³»ä¸­ï¼Œé™¤äº†äº‹ä»¶å’Œç›‘å¬å™¨ä»¥å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸‰ä¸ªé‡è¦çš„æ¦‚å¿µï¼š äº‹ä»¶æºï¼šäº‹ä»¶çš„ç”Ÿäº§è€…ï¼Œä»»ä½•ä¸€ä¸ªEventObjectéƒ½å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªäº‹ä»¶æºï¼› äº‹ä»¶ç›‘å¬æ³¨å†Œè¡¨ï¼šä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨æ³¨å†Œåˆ°ç»„ä»¶æˆ–æ¡†æž¶ä¸­ï¼Œå…¶å®žå°±æ˜¯ä¿å­˜åœ¨ç›‘å¬å™¨æ³¨å†Œè¡¨é‡Œï¼Œå½“ç»„ä»¶å’Œæ¡†æž¶ä¸­çš„äº‹ä»¶æºäº§ç”Ÿäº‹ä»¶æ—¶å°±ä¼šå°†äº‹ä»¶é€šçŸ¥è¿™äº›ä½äºŽæ³¨å†Œè¡¨ä¸­çš„ç›‘å¬å™¨ï¼› äº‹ä»¶å¹¿æ’­å™¨ï¼šè´Ÿè´£æŠŠäº‹ä»¶é€šçŸ¥ç»™äº‹ä»¶ç›‘å¬å™¨ã€‚ å›¾ç‰‡ äº‹ä»¶ä½“ç³»è§’è‰² 5.1 Springäº‹ä»¶ç±»ç»“æž„ äº‹ä»¶ç±» ApplicationEventçš„å”¯ä¸€æž„é€ å‡½æ•°æ˜¯ApplicationEvent(Object source)ï¼Œé€šè¿‡SourceæŒ‡å®šäº‹ä»¶æºï¼Œå®ƒçš„ä¸¤ä¸ªå­ç±»åˆ†åˆ«æ˜¯ï¼š ApplicationContextEventï¼šå®¹å™¨äº‹ä»¶ï¼Œæ‹¥æœ‰4ä¸ªå­ç±»åˆ†åˆ«è¡¨ç¤ºå®¹å™¨å¯åŠ¨ã€åˆ·æ–°ã€åœæ­¢åŠå…³é—­çš„æ—¶é—´ï¼› RequestHandleEventï¼šè¿™æ˜¯ä¸€ä¸ªä¸ŽWebåº”ç”¨ç›¸å…³çš„äº‹ä»¶ï¼Œå½“ä¸€ä¸ªHTTPè¯·æ±‚è¢«å¤„ç†åŽï¼Œäº§ç”Ÿè¯¥äº‹ä»¶ã€‚åªæœ‰åœ¨web.xmlä¸­å®šä¹‰äº†DispatcherServletæ—¶æ‰ä¼šäº§ç”Ÿè¯¥äº‹ä»¶ã€‚ äº‹ä»¶ç›‘å¬å™¨æŽ¥å£ ApplicationListeneræŽ¥å£ä¹‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼šonApplicationEvent(E event)ï¼Œè¯¥æ–¹æ³•æŽ¥å—ApplicationEventäº‹ä»¶å¯¹è±¡ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ç¼–å†™äº‹ä»¶çš„å“åº”å¤„ç†é€»è¾‘ã€‚SmartApplicationListeneræŽ¥å£æ˜¯Spring3.0æ–°å¢žçš„ï¼Œå®ƒå®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼š boolean supportsEventType(Class&lt;? extends ApplicationEvent&gt; eventType)ï¼šæŒ‡å®šç›‘å¬å™¨æ”¯æŒå“ªç§ç±»åž‹çš„å®¹å™¨äº‹ä»¶ï¼Œå³å®ƒåªä¼šå¯¹è¯¥ç±»åž‹çš„äº‹ä»¶ä½œå‡ºå“åº”ï¼› boolean supportsSourceType(Class&lt;?&gt; sourceType)ï¼šè¯¥æ–¹æ³•æŒ‡å®šç›‘å¬å™¨ä»…å¯¹ä½•ç§äº‹ä»¶æºå¯¹è±¡ä½œå‡ºå“åº”ã€‚ äº‹ä»¶å¹¿æ’­å™¨å½“å‘ç”Ÿå®¹å™¨äº‹ä»¶æ—¶ï¼Œå®¹å™¨ä¸»æŽ§ç¨‹åºå°†è°ƒç”¨äº‹ä»¶å¹¿æ’­å™¨å°†äº‹ä»¶é€šçŸ¥æ³¨å†Œç»™æ³¨å†Œè¡¨ä¸­çš„äº‹ä»¶ç›‘å¬å™¨ã€‚Springä¸ºäº‹ä»¶å¹¿æ’­å™¨å®šä¹‰äº†æŽ¥å£ï¼Œå¹¶æä¾›äº†å®žçŽ°ç±»ï¼Œå¦‚å›¾ï¼š 5.2 è§£æž„Springæ—¶é—´ä½“ç³»çš„å…·ä½“å®žçŽ°Springåœ¨ApplicationContextæŽ¥å£çš„æŠ½è±¡å®žçŽ°ç±»AbstractApplicationContextä¸­å®Œæˆäº†äº‹ä»¶ä½“ç³»çš„æ­å»ºã€‚AbstractApplicationContextæ‹¥æœ‰ä¸€ä¸ªapplicationEventMulticasteræˆå‘˜å˜é‡ï¼ŒapplicationEventMulticasteræä¾›äº†å®¹å™¨ç›‘å¬å™¨çš„æ³¨å†Œè¡¨ã€‚AbstractApplicationContextåœ¨refresh()è¿™ä¸ªå®¹å™¨å¯åŠ¨æ–¹æ³•ä¸­é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤æ­å»ºäº†äº‹ä»¶çš„åŸºç¡€è®¾æ–½ï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š12345678910...// 1 åˆå§‹åŒ–åº”ç”¨ä¸Šä¸‹æ–‡äº‹ä»¶å¹¿æ’­å™¨initApplicationEventMulticaster();// 2 æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨registerListeners();// 3 å®Œæˆåˆ·æ–°å¹¶å‘å¸ƒå®¹å™¨åˆ·æ–°äº‹ä»¶finishRefresh();... 1å¤„ï¼ŒSpringåˆå§‹åŒ–äº‹ä»¶çš„å¹¿æ’­å™¨ã€‚ç”¨æˆ·å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸ºå®¹å™¨å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„äº‹ä»¶å¹¿æ’­å™¨ï¼ŒSpringä¼šé€šè¿‡åå°„çš„æœºåˆ¶å°†å…¶æ³¨å†Œæˆå®¹å™¨çš„äº‹ä»¶å¹¿æ’­å™¨ã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°é…ç½®çš„å¤–éƒ¨äº‹ä»¶å¹¿æ’­å™¨ï¼ŒSpringè‡ªåŠ¨ä½¿ç”¨SimpleApplicationEventMulticasterä½œä¸ºäº‹ä»¶å¹¿æ’­å™¨ã€‚2å¤„ï¼ŒSpringå°†æ ¹æ®åå°„æœºåˆ¶ï¼Œä»ŽBeanDefinitionRegistryä¸­æ‰¾å‡ºæ‰€æœ‰å®žçŽ°ApplicationListenerçš„Beanï¼Œå°†å®ƒä»¬æ³¨å†Œä¸ºå®¹å™¨çš„äº‹ä»¶ç›‘å¬å™¨ã€‚3å¤„ï¼Œå®¹å™¨å¯åŠ¨å®Œæˆï¼Œè°ƒç”¨äº‹ä»¶å‘å¸ƒæŽ¥å£å‘å®¹å™¨ä¸­æ‰€æœ‰çš„ç›‘å¬å™¨å‘å¸ƒäº‹ä»¶ã€‚ ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ¨¡æ‹Ÿçš„é‚®ä»¶å‘é€å™¨ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889// MailSendEventç±»package com.hhxs.bbt.event;import org.springframework.beans.BeansException;import org.springframework.context.ApplicationContext;import org.springframework.context.ApplicationContextAware;public class MailSender implements ApplicationContextAware &#123; private ApplicationContext ctx; @Override public void setApplicationContext(ApplicationContext ctx) throws BeansException &#123; this.ctx = ctx; &#125; public void sendMail(String to) &#123; System.out.println("MailSenderï¼šæ¨¡æ‹Ÿå‘é€é‚®ä»¶..."); MailSendEvent mse = new MailSendEvent(this.ctx, to); ctx.publishEvent(mse); &#125;&#125;// MailSendListenerç±»package com.hhxs.bbt.event;import org.springframework.context.ApplicationListener;public class MailSendListener implements ApplicationListener&lt;MailSendEvent&gt; &#123; @Override public void onApplicationEvent(MailSendEvent event) &#123; MailSendEvent mse = (MailSendEvent) event; System.out.println("MailSendListenerï¼šå‘" + mse.getTo() + "å‘é€å®Œä¸€å°é‚®ä»¶"); &#125;&#125;// MailSenderç±»package com.hhxs.bbt.event;import org.springframework.beans.BeansException;import org.springframework.context.ApplicationContext;import org.springframework.context.ApplicationContextAware;public class MailSender implements ApplicationContextAware &#123; private ApplicationContext ctx; @Override public void setApplicationContext(ApplicationContext ctx) throws BeansException &#123; this.ctx = ctx; &#125; public void sendMail(String to) &#123; System.out.println("MailSenderï¼šæ¨¡æ‹Ÿå‘é€é‚®ä»¶..."); MailSendEvent mse = new MailSendEvent(this.ctx, to); ctx.publishEvent(mse); &#125;&#125;// Springé…ç½®æ–‡ä»¶&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"&gt; &lt;bean class="com.hhxs.bbt.event.MailSendListener"/&gt; &lt;bean id="mailSender" class="com.hhxs.bbt.event.MailSender"/&gt;&lt;/beans&gt;// æµ‹è¯•ç±»ApplicatonEventTestpackage com.hhxs.bbt.event;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class ApplicatonEventTest &#123; public static void main(String[] args) &#123; String resourceFile = "com/hhxs/bbt/event/beans.xml"; ApplicationContext ctx = new ClassPathXmlApplicationContext(resourceFile); MailSender mailSender = ctx.getBean(MailSender.class); mailSender.sendMail("event@mail.com"); System.out.println("done."); &#125;&#125; è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š123MailSenderï¼šæ¨¡æ‹Ÿå‘é€é‚®ä»¶...MailSendListenerï¼šå‘event@mail.comå‘é€å®Œä¸€å°é‚®ä»¶done.]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°3-åŸºäºŽæ³¨è§£å’ŒåŸºäºŽJavaç±»çš„é…ç½®]]></title>
    <url>%2F2017%2F11%2F07%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E9%85%8D%E7%BD%AE%E5%92%8C%E5%9F%BA%E4%BA%8EJava%E7%B1%BB%E7%9A%84%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»äº†åŸºäºŽXML Schemalçš„é…ç½®æ–¹å¼ã€‚æœ¬ç¯‡æ–‡ç« é‡Œå°†ä»‹ç»å¦å¤–ä¸¤ç§æä¾›Beanå®šä¹‰çš„æ–¹å¼ï¼ŒåŸºäºŽæ³¨è§£å’ŒåŸºäºŽJavaç±»çš„é…ç½®ã€‚ 1ã€åŸºäºŽæ³¨è§£çš„é…ç½®ä¸ç®¡æ˜¯XMLè¿˜æ˜¯æ³¨è§£ï¼Œä»–ä»¬éƒ½æ˜¯è¡¨è¾¾Beanå®šä¹‰çš„è½½ä½“ï¼Œå…¶å®žè´¨éƒ½æ˜¯ä¸ºSpringå®¹å™¨æä¾›Beanå®šä¹‰çš„ä¿¡æ¯ï¼Œè¡¨çŽ°å½¢å¼ä¸Šæ˜¯å°†XMLå®šä¹‰çš„ä¸œè¥¿é€šè¿‡ç±»æ³¨è§£è¿›è¡Œæè¿°ã€‚Springä»Ž2.0å¼€å§‹å¼•å…¥åŸºäºŽæ³¨è§£çš„é…ç½®æ–¹å¼ï¼Œåœ¨3.0æ—¶å¾—åˆ°è¿›ä¸€æ­¥çš„å®Œå–„ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨æ³¨è§£å®šä¹‰ä¸€ä¸ªDAOçš„Bean:12345678package com.hhxs.bbt.dao;import org.springframework.stereotype.Component;// 1.é€šè¿‡Repositoryå®šä¹‰ä¸€ä¸ªDAOçš„Bean@Component("userDao")public class UserDao &#123; ...&#125; åœ¨ä¸Šé¢1å¤„ï¼Œä½¿ç”¨@Componentæ³¨è§£åœ¨UserDaoç±»å£°æ˜Žå¤„å¯¹ç±»è¿›è¡Œæ ‡æ³¨ï¼Œå®ƒå¯ä»¥è¢«Springå®¹å™¨è¯†åˆ«ï¼ŒSpringå®¹å™¨è‡ªåŠ¨å°†POJOè½¬æ¢ä¸ºå®¹å™¨ç®¡ç†çš„Beanã€‚å®ƒå’Œä»¥ä¸‹çš„XMLé…ç½®æ˜¯ç­‰æ•ˆçš„ï¼š1&lt;Bean id="userDao" class="com.hhxs.bbt.dao.UserDao"&gt; é™¤äº†@Componentä»¥å¤–ï¼ŒSpringæä¾›äº†ä¸‰ä¸ªåŠŸèƒ½åŸºæœ¬å’Œ@Componentç­‰æ•ˆçš„æ³¨è§£ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºŽå¯¹DAOã€ServiceåŠWebå±‚çš„Controllerè¿›è¡Œæ³¨è§£ï¼Œæ‰€ä»¥ä¹Ÿç§°è¿™äº›æ³¨è§£ä¸ºBeançš„è¡åž‹æ³¨è§£ï¼š @Repositoryï¼šç”¨äºŽå¯¹DAOå®žçŽ°ç±»è¿›è¡Œæ ‡æ³¨ï¼› @Serviceï¼šç”¨äºŽå¯¹Serviceå®žçŽ°ç±»è¿›è¡Œæ ‡æ³¨ï¼› @Controllerï¼šç”¨äºŽå¯¹Controllerå®žçŽ°ç±»è¿›è¡Œæ ‡æ³¨ã€‚ åœ¨@Componentä¹‹å¤–æä¾›è¿™ä¸‰ä¸ªæ³¨è§£ï¼Œæ˜¯ä¸ºäº†è®©æ³¨è§£ç±»æœ¬èº«çš„ç”¨é€”æ›´åŠ æ¸…æ™°ï¼Œæ­¤å¤–Springè¿˜èµ‹äºˆäº†å®ƒä»¬ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ã€‚ 1.1 ä½¿ç”¨æ³¨è§£é…ç½®ä¿¡æ¯å¯åŠ¨Springå®¹å™¨Springåœ¨2.5 åŽæä¾›äº†ä¸€ä¸ªcontextçš„å‘½åç©ºé—´ï¼Œå®ƒæä¾›äº†é€šè¿‡æ‰«æç±»åŒ…ä»¥åº”ç”¨æ³¨è§£å®šä¹‰Beançš„æ–¹å¼ï¼š 12345678910111213&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans" http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd&gt; &lt;description&gt;Springå…¬å…±é…ç½® &lt;/description&gt; &lt;!-- 1.æ‰«æç±»åŒ…ä»¥åº”ç”¨æ³¨è§£å®šä¹‰çš„Bean --&gt; &lt;context:component-scan base-package="com.hhxs.bbt" /&gt;&lt;/beans&gt; åœ¨ä¸Šé¢1å¤„é€šè¿‡contextå‘½åç©ºé—´çš„compnent-scançš„base-packageå±žæ€§æŒ‡å®šä¸€ä¸ªéœ€è¦æ‰«æçš„åŸºç±»åŒ…ï¼ŒSpringå®¹å™¨å°†ä¼šæ‰«æè¿™ä¸ªåŸºç±»åŒ…é‡Œçš„æ‰€æœ‰ç±»ï¼Œå¹¶ä»Žç±»çš„æ³¨è§£ä¿¡æ¯ä¸­èŽ·å–Beançš„å®šä¹‰ä¿¡æ¯ã€‚ å¦‚æžœä»…å¸Œæœ›æ‰«æç‰¹å®šçš„ç±»è€ŒéžåŸºåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨resource-patternå±žæ€§è¿‡æ»¤ç‰¹å®šçš„ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1&lt;context:component-scan base-package="com.hhxs.bbt" resource-pattern="dao/*.class"/&gt; é»˜è®¤æƒ…å†µä¸‹resource-patternå±žæ€§çš„å€¼ä¸º**/*.classï¼Œå³åŸºåŒ…é‡Œçš„æ‰€æœ‰ç±»ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºdao/*.classï¼Œåˆ™Springä»…ä¼šæ‰«æåŸºåŒ…é‡Œdaoå­åŒ…ä¸­çš„ç±»ã€‚é€šè¿‡resource-patternå±žæ€§ä»…å¯æŒ‰èµ„æºåç§°å¯¹åŸºåŒ…ä¸­çš„ç±»è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æžœéœ€è¦æ›´è¯¦ç»†çš„è¿‡æ»¤ï¼Œåˆ™éœ€è¦ç”¨åˆ°&lt;contex:component-scan&gt;çš„è¿‡æ»¤å­å…ƒç´ ï¼š 1234&lt;context:component-scan base-package="com.hhxs.bbt"&gt; &lt;context:include-filter type="regex" expression="com.\hhxs.\bbt.*"/&gt; &lt;context:exclude-filter type="aspectj" expression="com.hhxs.bbt..*Controller+"/&gt;&lt;/context&gt; &lt;context:include-filter&gt;è¡¨ç¤ºè¦åŒ…å«çš„ç›®æ ‡ç±» &lt;context:exclude-filter&gt;è¡¨ç¤ºè¦æŽ’é™¤åœ¨å¤–çš„ç›®æ ‡ç±» ä¸€ä¸ª&lt;context:component-scan&gt;ä¸‹å¯ä»¥åŒ…å«è‹¥å¹²ä¸ª&lt;context:include-filter&gt;å’Œ&lt;context:exclude-filter&gt;å…ƒç´ ã€‚è¿™ä¸¤ä¸ªè¿‡æ»¤å…ƒç´ å‡æ”¯æŒå¤šç§ç±»åž‹çš„è¿‡æ»¤è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š ç±»åˆ« ç¤ºä¾‹ è¯´æ˜Ž annotation com.hhxs.bbt.XxxAnnotation æ‰€æœ‰æ ‡æ³¨äº†XxxAnnotationçš„ç±»ã€‚è¯¥ç±»åž‹é‡‡ç”¨ç›®æ ‡ç±»æ˜¯å¦æ ‡æ³¨äº†æŸä¸ªæ³¨è§£è¿›è¡Œè¿‡æ»¤ã€‚ assignable com.hhxs.bbt.XxxService æ‰€æœ‰ç»§æ‰¿æˆ–æ‰©å±•XxxServiceçš„ç±»ã€‚è¯¥ç±»åž‹é‡‡ç”¨ç›®æ ‡ç±»æ˜¯å¦ç»§æ‰¿æˆ–æ‰©å±•æŸä¸ªç‰¹å®šç±»è¿›è¡Œè¿‡æ»¤ã€‚ aspectj com.hhxs.bbt..*Service+ æ‰€æœ‰ç±»åä»¥Serviceç»“æŸçš„ç±»åŠç»§æ‰¿æˆ–æ‰©å±•å®ƒä»¬çš„ç±»ã€‚è¯¥ç±»åž‹é‡‡ç”¨AspectJè¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤ã€‚ regex com.hhxs.bbt..* æ‰€æœ‰com.hhxs.bbtç±»åŒ…ä¸‹çš„ç±»ã€‚è¯¥ç±»åž‹é‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼æ ¹æ®ç›®æ ‡ç±»çš„ç±»åè¿›è¡Œè¿‡æ»¤ã€‚ custom com.hhxs.bbt.XxxTypeFilter é‡‡ç”¨XxxTypeFilteré€šè¿‡ä»£ç çš„æ–¹å¼æ ¹æ®è¿‡æ»¤è§„åˆ™ã€‚è¯¥ç±»å¿…é¡»å®žçŽ°org.springframework.core.type.TypeFilteræŽ¥å£ 1.2 è‡ªåŠ¨è£…é…Beanspringä½¿ç”¨@Autowiredæ³¨è§£å®žçŽ°Beançš„ä¾èµ–æ³¨å…¥ã€‚@Autowiredé»˜è®¤æŒ‰ç±»åž‹åŒ¹é…çš„æ–¹å¼ï¼Œåœ¨å®¹å™¨æŸ¥æ‰¾åŒ¹é…Bean,å½“ä¸”ä»…æœ‰ä¸€ä¸ªåŒ¹é…çš„Beanæ—¶ï¼ŒSpringå°†å…¶æ³¨å…¥åˆ°@Autowiredæ ‡æ³¨çš„å˜é‡ä¸­ã€‚ 123456789101112131415package com.hhxs.bbt.service;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@Servicepublic class LogonService &#123; @Autowired private LogDao logDao; @Autowired private UserDao userDao; ...&#125; å¦‚æžœå®¹å™¨ä¸­æ²¡æœ‰ä¸€ä¸ªå’Œæ ‡æ³¨å˜é‡ç±»åž‹åŒ¹é…çš„beanï¼ŒSpringå®¹å™¨å¯åŠ¨æ—¶å°†æŠ¥NoSuchBeanDefinitionExceptionå¼‚å¸¸ã€‚å¦‚æžœå¸Œæœ›ä¸æŠ›å‡ºå¼‚å¸¸å¯ä»¥ä½¿ç”¨@Autowired(required=false)è¿›è¡Œæ ‡æ³¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Autowiredçš„requiredå±žæ€§å€¼ä¸ºtrueã€‚ å¦‚æžœå®¹å™¨ä¸­æœ‰ä¸€ä¸ªä»¥ä¸ŠåŒ¹é…çš„Beanæ—¶ï¼Œå¯ä»¥é€šè¿‡@Qualifieræ³¨è§£é™å®šBeançš„åç§°ã€‚ 1234567891011121314151617package com.hhxs.bbt.service;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Service;@Servicepublic class LogonService &#123; @Autowired private LogDao logDao; @Autowired @Qualifier("userDao") private UserDao userDao; ...&#125; å¯¹é›†åˆç±»è¿›è¡Œæ ‡æ³¨å¦‚æžœå¯¹ç±»ä¸­é›†åˆç±»çš„å˜é‡å’Œæ–¹æ³•å…¥å‚è¿›è¡Œ@Autowiredæ ‡æ³¨ï¼ŒSpringä¼šå°†å®¹å™¨ä¸­ç±»åž‹åŒ¹é…çš„æ‰€æœ‰Beanéƒ½è‡ªåŠ¨æ³¨å…¥è¿›æ¥ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä»‹ç»ä¸‹ã€‚ 1234567891011121314151617package com.hhxs.bbt.service;import java.util.List;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Service;@Servicepublic class MyComponent &#123; // Springä¼šå°†å®¹å™¨ä¸­æ‰€æœ‰ç±»åž‹ä¸ºPluginçš„Beanæ³¨å…¥åˆ°è¿™ä¸ªå˜é‡ä¸­ @Autowired(required=false) private List&lt;Plugin&gt; plugins; public List&lt;Plugin&gt; getPlugins() &#123; return plugins; &#125;&#125; Springå¦‚æžœå‘çŽ°å˜é‡æ˜¯ä¸€ä¸ªé›†åˆç±»ï¼Œåˆ™å®ƒä¼šå°†å®¹å™¨ä¸­åŒ¹é…é›†åˆå…ƒç´ ç±»åž‹çš„æ‰€æœ‰Beanéƒ½æ³¨å…¥è¿›æ¥ã€‚è¿™é‡Œï¼ŒPluginä¸ºä¸€ä¸ªæŽ¥å£ï¼Œå®ƒæ‹¥æœ‰ä¸¤ä¸ªå®žçŽ°ç±»ï¼Œåˆ†åˆ«æ˜¯OnePluginå’ŒTwoPluginï¼Œè¿™ä¸¤ä¸ªå®žçŽ°ç±»éƒ½é€šè¿‡@Componentæ ‡æ³¨ä¸ºBeanï¼Œåˆ™Springä¼šå°†è¿™ä¸¤ä¸ªBeanéƒ½æ³¨å…¥åˆ°pluginsä¸­ã€‚ 2ã€åŸºäºŽJavaç±»çš„é…ç½®2.1 ä½¿ç”¨Javaç±»æä¾›Beanå®šä¹‰ä¿¡æ¯JavaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒæ—¨åœ¨é€šè¿‡Javaç±»çš„æ–¹å¼æä¾›Beançš„å®šä¹‰ä¿¡æ¯ã€‚Spring3.0åŸºäºŽJavaç±»é…ç½®çš„æ ¸å¿ƒå³å–æäºŽJavaConfigã€‚ æ™®é€šçš„POJOåªè¦æ ‡æ³¨@Configurationæ³¨è§£ï¼Œå°±å¯ä»¥ä¸ºSpringå®¹å™¨æä¾›Beanå®šä¹‰çš„ä¿¡æ¯äº†ï¼Œæ¯ä¸ªæ ‡æ³¨äº†@Beançš„ç±»æ–¹æ³•éƒ½ç›¸å½“äºŽæä¾›ä¸€ä¸ªBeançš„å®šä¹‰ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;// 1.å°†ä¸€ä¸ªPOJOæ ‡æ³¨å®šä¹‰ä¸ºBeançš„é…ç½®ç±»@Configurationpublic class AppConf &#123; // 2.ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å®šä¹‰äº†ä¸¤ä¸ªBeanï¼Œå¹¶æä¾›äº†Beançš„å®žä¾‹åŒ–é€»è¾‘ @Bean public UserDao userDao() &#123; return new UserDao(); &#125; @Bean public LogDao logDao() &#123; return new LogDao() &#125; @Bean public LogonService logonService() &#123; LogonServcie logonService = new LogonService(); // å°†ä¸Šé¢2å¤„å®šä¹‰çš„Beanæ³¨å…¥åˆ°logonServiceçš„Bean logonService.setLogDao(logDao()); logonService.setUserDao(userDao()); return logonService; &#125;&#125; 1å¤„åœ¨AppConfç±»çš„å®šä¹‰å¤„æ ‡æ³¨äº†@Configurationæ³¨è§£ï¼Œè¯´æ˜Žè¿™ä¸ªç±»å¯ç”¨äºŽä¸ºSpringæä¾›Beanä¿¡æ¯ã€‚ç±»çš„æ–¹æ³•å‡ºå¯ä»¥æ ‡æ³¨@Beanæ³¨è§£ï¼ŒBeançš„ç±»åž‹ç”±æ–¹æ³•è¿”å›žå€¼ç±»åž‹å†³å®šï¼Œåç§°é»˜è®¤å’Œæ–¹æ³•åç›¸åŒï¼Œä¹Ÿå¯é€šè¿‡@Bean(name=â€userDaoâ€)æ˜¾ç¤ºæŒ‡å®šBeançš„åç§°ã€‚ ä¸Šé¢çš„é…ç½®å’Œä»¥ä¸‹XMLé…ç½®ç­‰æ•ˆï¼š 1234&lt;bean id="userDao" class="com.hhxs.bbt.dao.UserDao" /&gt;&lt;bean id="logDao" class="com.hhxs.bbt.dao.LogDao" /&gt;&lt;bean id="userDao" class="com.hhxs.bbt.conf.LogonService" p:logDao-ref="userDao" p:userDao-ref="logDao" /&gt; 2.2 ä½¿ç”¨åŸºäºŽJavaç±»çš„é…ç½®ä¿¡æ¯å¯åŠ¨Springå®¹å™¨2.2.1 ç›´æŽ¥é€šè¿‡@Configurationç±»å¯åŠ¨Springå®¹å™¨Springæä¾›äº†ä¸€ä¸ªAnnotationConfigApplicationContextç±»ï¼Œå®ƒèƒ½å¤Ÿç›´æŽ¥é€šè¿‡æ ‡æ³¨@Configurationçš„Javaç±»å¯åŠ¨Springå®¹å™¨ã€‚ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ˜¯ç­‰æ•ˆçš„ï¼š ç¬¬ä¸€ç§ï¼š 123456789101112package com.hhxs.bbt.conf;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class JavaConfigTest &#123; public static void main(String[] args) &#123; ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConf.class); LogonService logonService = ctx.getBean(logonService.class); logonService.printHello(); &#125;&#125; ç¬¬äºŒç§ï¼š1234567891011121314151617package com.hhxs.bbt.conf;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class JavaConfigTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(); // æ³¨å†Œå¤šä¸ª@Configurationé…ç½®ç±» ctx.register(DaoConfig.Class); ctx.register(ServiceConfig.class); // åˆ·æ–°å®¹å™¨ä»¥åº”ç”¨è¿™äº›æ³¨å†Œçš„é…ç½®ç±» ctx.refresh(); LogonService logonService = ctx.getBean(logonService.class); logonService.printHello(); &#125;&#125; å¯ä»¥é€šè¿‡ä»£ç ä¸€ä¸ªä¸€ä¸ªæ³¨å†Œé…ç½®ç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡@Importå°†å¤šä¸ªé…ç½®ç±»ç»„è£…åˆ°ä¸€ä¸ªé…ç½®ç±»ä¸­ï¼Œè¿™æ ·ä»…éœ€è¦æ³¨å†Œè¿™ä¸ªç»„è£…å¥½çš„é…ç½®ç±»å°±å¯ä»¥å¯åŠ¨å®¹å™¨äº†ã€‚1234567891011121314package com.hhxs.bbt.conf;import org.springframework.beans.factory.annotation.Configurable;import org.springframework.context.annotation.Import;@Configurable@Import(DaoConfig.class)public class ServiceConfig &#123; @Bean public LogonService logonService() &#123; LogonService logonService = new LogonService(); return logonService; &#125;&#125; æˆ‘ä»¬æ—¢å¯ä»¥åœ¨XMLé…ç½®æ–‡ä»¶ä¸­å¼•ç”¨@Configurationçš„é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Configurationé…ç½®ç±»ä¸­å¼•ç”¨XMLé…ç½®ä¿¡æ¯ã€‚åªè¦ä¸åŒå½¢å¼çš„Beanå®šä¹‰ä¿¡æ¯èƒ½å¤ŸåŠ è½½åˆ°Springå®¹å™¨ä¸­ï¼ŒSpringå°±èƒ½è¶³å¤Ÿâ€œæ™ºèƒ½â€çš„å®ŒæˆBeanä¹‹é—´çš„è£…é…ã€‚ 3ã€ä¸åŒé…ç½®æ–¹å¼æ¯”è¾ƒé…ç½®æ–¹å¼æ¯”è¾ƒï¼š â€“ åŸºäºŽXMLé…ç½® åŸºäºŽæ³¨è§£é…ç½® åŸºäºŽJavaç±»é…ç½® Beanå®šä¹‰ &lt;bean class=&quot;com.hhxs.bbt.UserDao&quot;&gt; Beanå®žçŽ°ç±»å‡ºé€šè¿‡æ ‡æ³¨ @Componentã€@Repositoryã€@Serviceã€@Controller åœ¨æ ‡æ³¨äº†@Configurationçš„Javaç±»ä¸­ï¼Œé€šè¿‡åœ¨ç±»æ–¹æ³•ä¸Šæ ‡æ³¨@Beanå®šä¹‰ä¸€ä¸ªBeanã€‚æ–¹æ³•å¿…é¡»æä¾›Beançš„å®žä¾‹åŒ–é€»è¾‘ã€‚ Beanåç§° é€šè¿‡çš„idæˆ–nameå±žæ€§å®šä¹‰ é€šè¿‡æ³¨è§£çš„valueå±žæ€§å®šä¹‰ï¼Œå¦‚@Component(â€œuserDaoâ€)ã€‚é»˜è®¤åç§°ä¸ºå°å†™å­—æ¯æ‰“å¤´çš„ç±»åï¼ˆä¸å¸¦åŒ…åï¼‰ï¼šuserDao é€šè¿‡@Beançš„nameå±žæ€§å®šä¹‰ï¼Œå¦‚@Bean(â€œuserDaoâ€)ï¼Œé»˜è®¤åç§°ä¸ºæ–¹æ³•åã€‚ Beanæ³¨å…¥ é€šè¿‡å­å…ƒç´ æˆ–é€šè¿‡på‘½åç©ºé—´çš„åŠ¨æ€å±žæ€§ é€šè¿‡åœ¨æˆå‘˜å˜é‡æˆ–æ–¹æ³•å…¥å‚å‡ºæ ‡æ³¨@Autowiredï¼ŒæŒ‰ç±»åž‹åŒ¹é…è‡ªåŠ¨æ³¨å…¥ å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•å¤„é€šè¿‡@Autowiredä½¿æ–¹æ³•å…¥å‚ç»‘å®šBeanï¼Œç„¶åŽåœ¨æ–¹æ³•ä¸­é€šè¿‡ä»£ç è¿›è¡Œæ³¨å…¥ï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨é…ç½®ç±»çš„@Beanæ–¹æ³•è¿›è¡Œæ³¨å…¥ Beanç”Ÿå‘½è¿‡ç¨‹æ–¹æ³• é€šè¿‡çš„init-methodå’Œdestory-methodå±žæ€§æŒ‡å®šBeanå®žçŽ°ç±»çš„æ–¹æ³•åã€‚æœ€å¤šåªèƒ½æŒ‡å®šä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•å’Œä¸€ä¸ªé”€æ¯æ–¹æ³• é€šè¿‡åœ¨ç›®æ ‡æ–¹æ³•ä¸Šæ ‡æ³¨@PostConstructå’Œ@PreDestroyæ³¨è§£æŒ‡å®šåˆå§‹åŒ–æˆ–é”€æ¯æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰ä»»æ„å¤šä¸ªæ–¹æ³• é€šè¿‡@Beançš„initmethodæˆ–destoryMethodæŒ‡å®šä¸€ä¸ªåˆå§‹åŒ–æˆ–é”€æ¯æ–¹æ³•ã€‚ Beanä½œç”¨èŒƒå›´ é€šè¿‡çš„scopeå±žæ€§æŒ‡å®š é€šè¿‡åœ¨ç±»å®šä¹‰å‡ºæ ‡æ³¨@ScopeæŒ‡å®š é€šè¿‡åœ¨Beanæ–¹æ³•å®šä¹‰å¤„æ ‡æ³¨@ScopeæŒ‡å®š Beanå»¶è¿Ÿåˆå§‹åŒ– é€šè¿‡çš„lazy-initå±žæ€§æŒ‡å®šï¼Œé»˜è®¤ä¸ºdefaultï¼Œç»§æ‰¿ä¸Žçš„default-lazy-initè®¾ç½®ï¼Œè¯¥å€¼é»˜è®¤ä¸ºfalse é€šè¿‡åœ¨ç±»å®šä¹‰å¤„æ ‡æ³¨@LazyæŒ‡å®šï¼Œå¦‚@Lazy(true) é€šè¿‡åœ¨Beanæ–¹æ³•å®šä¹‰å¤„æ ‡æ³¨@LazyæŒ‡å®š ä½¿ç”¨åœºæ™¯å»ºè®®ï¼š â€“ åŸºäºŽXMLé…ç½® åŸºäºŽæ³¨è§£é…ç½® åŸºäºŽJavaç±»é…ç½® é€‚åˆåœºæ™¯ 1ï¼‰Beanå®žçŽ°ç±»æ¥æºäºŽç¬¬ä¸‰æ–¹ç±»åº“ 2ï¼‰å‘½åç©ºé—´çš„é…ç½® Beanå®žçŽ°ç±»æ˜¯å½“å‰é¡¹ç›®å¼€å‘çš„ï¼Œå¯ä»¥ç›´æŽ¥åœ¨Javaç±»ä¸­ä½¿ç”¨åŸºäºŽæ³¨è§£çš„é…ç½® åŸºäºŽJavaç±»é…ç½®çš„ä¼˜åŠ¿åœ¨äºŽå¯ä»¥é€šè¿‡ä»£ç æ–¹å¼æŽ§åˆ¶Beanåˆå§‹åŒ–çš„æ•´ä½“é€»è¾‘ã€‚]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Bean</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°2-Beançš„åŸºæœ¬é…ç½®]]></title>
    <url>%2F2017%2F11%2F07%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02-Bean%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[çŸ¥æ˜“è¡Œéš¾ï¼Œç”±äºŽä¹‹å‰å¾ˆå°‘å†™æŠ€æœ¯åšå®¢ï¼Œå¯¹äºŽå†™ä¸€ç¯‡â€œè¿˜ç®—æ­£å¼â€çš„æŠ€æœ¯æ–‡ç« éœ€è¦èŠ±è´¹å¤šå°‘æ—¶é—´å¹¶ä¸æ¸…æ¥šã€‚ç¬¬ä¸€ç¯‡ç¬”è®°æ•´ç†äº†å°†è¿‘ä¸€å‘¨ï¼Œè¿™è¿œè¿œè¶…å‡ºäº†æˆ‘çš„é¢„æœŸã€‚å†™å®Œçš„æ—¶å€™ï¼Œä¸å…æƒ³èµ·é‚£äº›ç»å¸¸å†™åšå®¢çš„äººä¸€å®šèŠ±è´¹äº†å¾ˆå¤šçš„å¿ƒæ€åœ¨ä¸Šé¢ï¼Œå› è€Œå¿ƒç”Ÿä½©æœã€‚å¾ˆå¤šäº‹æƒ…éƒ½æ˜¯è¿™æ ·ï¼Œåªæœ‰åšè¿‡æ‰ä¼šçŸ¥é“å…¶ä¸­çš„ä¸å®¹æ˜“ã€‚ 1ã€Springé…ç½®æ¦‚è¿°1.1 Springå®¹å™¨é«˜å±‚è§†å›¾Springå®¹å™¨æ ¹æ®å„ç§å½¢å¼çš„Beané…ç½®ä¿¡æ¯åœ¨å®¹å™¨å†…éƒ¨å»ºç«‹Beanå®šä¹‰æ³¨å†Œè¡¨ï¼Œç„¶åŽæ ¹æ®æ³¨å†Œè¡¨åŠ è½½ã€å®žä¾‹åŒ–Beanï¼Œå¹¶å»ºç«‹Beanå’ŒBeançš„ä¾èµ–å…³ç³»ã€‚Beançš„é…ç½®ä¿¡æ¯æ˜¯Beançš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒBeançš„å…ƒæ•°æ®ä¿¡æ¯åœ¨Springå®¹å™¨ä¸­çš„å†…éƒ¨å¯¹åº”ç‰©æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªBeanDefinitionå½¢æˆçš„Beanæ³¨å†Œè¡¨ï¼ŒSpringå®žçŽ°äº†Beanå…ƒæ•°æ®ä¿¡æ¯å†…éƒ¨è¡¨ç¤ºå’Œå¤–éƒ¨è¡¨ç¤ºçš„è§£è€¦ã€‚å¦‚ä¸‹å›¾ï¼š 1.2 åŸºäºŽXML Schemaçš„é…ç½®åŸºäºŽXMLçš„é…ç½®ï¼ŒSpring2.0ä»¥åŽå¼€å§‹ä½¿ç”¨Schemaæ ¼å¼ï¼Œç›¸æ¯”Spring1.0çš„DTDæ ¼å¼ï¼ŒSchemaè®©ä¸åŒç±»åž‹çš„é…ç½®æ‹¥æœ‰äº†è‡ªå·±çš„å‘½åç©ºé—´ï¼Œä½¿é…ç½®æ–‡ä»¶æ›´å…·æ‰©å±•æ€§ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š Schemaåœ¨æ–‡æ¡£æ ¹èŠ‚ç‚¹ä¸­é€šè¿‡xmlnså¯¹æ–‡æ¡£ä¸­çš„å‘½åç©ºé—´è¿›è¡Œå£°æ˜Žã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®šä¹‰äº†3ä¸ªå‘½åç©ºé—´ï¼š é»˜è®¤å‘½åç©ºé—´ï¼šå®ƒæ²¡æœ‰ç©ºé—´åï¼Œç”¨äºŽSpring Beançš„å®šä¹‰ï¼› xsiå‘½åç©ºé—´ï¼šè¿™ä¸ªå‘½åç©ºé—´ç”¨äºŽä¸ºæ¯ä¸ªæ–‡æ¡£ä¸­å‘½åç©ºé—´æŒ‡å®šç›¸åº”çš„Schemaæ ·å¼æ–‡ä»¶ï¼Œæ˜¯æ ‡å‡†ç»„ç»‡å®šä¹‰çš„æ ‡å‡†å‘½åç©ºé—´ï¼› aopå‘½åç©ºé—´ï¼šè¿™ä¸ªå‘½åç©ºé—´æ˜¯Springé…ç½®Aopçš„å‘½åç©ºé—´ï¼Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„å‘½åç©ºé—´ï¼› å‘½åç©ºé—´çš„å®šä¹‰åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šç¬¬ä¸€æ­¥æŒ‡å®šå‘½åç©ºé—´çš„åç§°ï¼Œç¬¬äºŒéƒ¨æŒ‡å®šå‘½åç©ºé—´Schemaæ–‡æ¡£æ ·å¼æ–‡ä»¶çš„ä½ç½®ï¼Œç”¨ç©ºæ ¼æˆ–å›žè½¦æ¢è¡Œè¿›è¡Œåˆ†å‰²ã€‚åœ¨ç¬¬äºŒæ­¥ä¸­ï¼ŒæŒ‡å®šå‘½åç©ºé—´çš„Schemaæ–‡ä»¶åœ°å€æœ‰ä¸¤ä¸ªç”¨é€”ï¼šXMLè§£æžå™¨å¯ä»¥èŽ·å–Schemaæ–‡ä»¶å¹¶å¯¹æ–‡æ¡£è¿›è¡Œæ ¼å¼åˆæ³•æ€§éªŒè¯ï¼›åœ¨å¼€å‘çŽ¯å¢ƒä¸‹ï¼ŒIDEå¯ä»¥å¼•ç”¨Schemaæ–‡ä»¶å¯¹æ–‡æ¡£ç¼–è¾‘æä¾›è¯±å¯¼åŠŸèƒ½ã€‚ 2ã€Beançš„åŸºæœ¬é…ç½®2.1 Beané…ç½®çš„åŸºç¡€çŸ¥è¯†ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpring IoCå®¹å™¨ä¸­çš„ä¸€ä¸ªBeanå³å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„ä¸€ä¸ª&lt;bean&gt;ï¼Œå…¶ä¸­idä¸ºè¿™ä¸ªBeançš„åç§°ï¼Œé€šè¿‡å®¹å™¨çš„getBean(id)å³å¯èŽ·å–å¯¹åº”çš„Beanï¼Œåœ¨å®¹å™¨ä¸­èµ·åˆ°å®šä½æŸ¥æ‰¾çš„ä½œç”¨ã€‚classå±žæ€§æŒ‡å®šäº†Beanå¯¹åº”çš„å®žçŽ°ç±»ã€‚1&lt;bean id="foo" class="com.hhxs.domain.Foo"&gt; idåœ¨IoCçš„å®¹å™¨ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œæ­¤å¤–idçš„å‘½åä¹Ÿéœ€è¦æ»¡è¶³XMLå¯¹idçš„å‘½åè§„èŒƒï¼ˆidæ˜¯XMLè§„å®šçš„ç‰¹æ®Šå±žæ€§ï¼‰ï¼šå¿…é¡»ä»¥å­—æ¯å¼€å§‹ï¼ŒåŽé¢å¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€è¿žå­—ç¬¦ã€ä¸‹åˆ’çº¿ã€å¥å·ã€å†’å·çš„å®Œæ•´ç»“æŸçš„ç¬¦å·ï¼Œé€—å·å’Œç©ºæ ¼è¿™äº›éžå®Œæ•´ç»“æŸç¬¦æ˜¯éžæ³•çš„ã€‚nameå±žæ€§æ²¡æœ‰å­—ç¬¦ä¸Šçš„é™åˆ¶ï¼Œå‡ ä¹Žå¯ä»¥ä½¿ç”¨ä»»ä½•å­—ç¬¦ã€‚å¦å¤–idå’Œnameéƒ½å¯ä»¥æŒ‡å®šå¤šä¸ªåå­—ï¼Œåå­—ä¹‹é—´ç”¨é€—å·ã€åˆ†å·æˆ–è€…ç©ºæ ¼è¿›è¡Œåˆ†éš”ï¼š1&lt;bean name="foo,#foo,$foo" class="com.hhxs.domain.Foo"&gt; å¯ä»¥ä½¿ç”¨getBean(â€œfooâ€)ã€getBean(â€œ#fooâ€)ã€getBean(â€œ$fooâ€)èŽ·å–IoCå®¹å™¨ä¸­çš„Foo Beanã€‚Springé…ç½®æ–‡ä»¶ä¸­ä¸å…è®¸å‡ºçŽ°ä¸¤ä¸ªç›¸åŒidçš„&lt;bean&gt;ï¼Œä½†å¯ä»¥å‡ºçŽ°ä¸¤ä¸ªç›¸åŒnameçš„&lt;bean&gt;ï¼Œå¤šä¸ªnameç›¸åŒçš„&lt;bean&gt;ï¼Œé€šè¿‡getBean(beanName)èŽ·å–Beanæ—¶ï¼Œå°†è¿”å›žæœ€åŽå£°æ˜Žçš„é‚£ä¸ªBeanã€‚å¦‚æžœidå’Œnameä¸¤å±žæ€§éƒ½æœªæŒ‡å®šï¼Œå¦‚&lt;bean class=&quot;com.baobaotao.simple.Car&quot;&gt;ï¼ŒSpringè‡ªåŠ¨å°†å…¨é™å®šç±»åä½œä¸ºBeançš„åç§°ã€‚ 2.2 æ³¨å…¥æ–¹å¼Springæ”¯æŒä¸¤ç§ä¾èµ–æ³¨å…¥æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å±žæ€§æ³¨å…¥å’Œæž„é€ å‡½æ•°æ³¨å…¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒSpringè¿˜æ”¯æŒå·¥åŽ‚æ–¹æ³•æ³¨å…¥æ–¹å¼ã€‚ 2.2.1 å±žæ€§æ³¨å…¥å±žæ€§æ³¨å…¥æ˜¯é…ç½®Beanä¹‹é—´çš„ä¾èµ–å…³ç³»æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå±žæ€§æ³¨å…¥è¦æ±‚Beanæä¾›ä¸€ä¸ªé»˜è®¤çš„æž„é€ å‡½æ•°ï¼Œå¹¶ä¸ºéœ€è¦æ³¨å…¥çš„å±žæ€§æä¾›å¯¹åº”çš„Setteræ–¹æ³•ã€‚Springå…ˆè°ƒç”¨Beançš„é»˜è®¤æž„é€ å‡½æ•°å®žä¾‹åŒ–Beanå¯¹è±¡ï¼Œç„¶åŽé€šè¿‡åå°„çš„æ–¹å¼è°ƒç”¨Setteræ–¹æ³•æ³¨å…¥å±žæ€§å€¼ã€‚JavaBeançš„å±žæ€§å‘½åè§„èŒƒï¼šxxxçš„å±žæ€§å¯¹åº”setXxx()æ–¹æ³•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJavaçš„å±žæ€§å˜é‡åéƒ½ä»¥å°å†™å­—æ¯èµ·å¤´ï¼Œç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¹Ÿå…è®¸å¤§å†™å­—æ¯èµ·å¤´çš„å±žæ€§å˜é‡åï¼Œä½†æ˜¯å¿…é¡»æ»¡è¶³â€œå˜é‡çš„å‰ä¸¤ä¸ªå­—æ¯è¦ä¹ˆå…¨éƒ¨å¤§å†™ï¼Œè¦ä¹ˆå…¨éƒ¨å°å†™â€ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š12345678910111213141516171819202122232425public class Car &#123; private String brand; private String color; private int maxSpeed; public void setBrand(String brand) &#123; System.out.println("è°ƒç”¨setBrand()è®¾ç½®å±žæ€§ã€‚"); this.brand = brand; &#125; public void setColor(String color) &#123; this.color = color; &#125; public void setMaxSpeed(int maxSpeed) &#123; this.maxSpeed = maxSpeed; &#125; ......&#125;// Springé…ç½®æ–‡ä»¶ä¸­çš„å±žæ€§æ³¨å…¥é…ç½®&lt;bean id="car" class="com.hhxs.bbt.web.Car" &gt; &lt;property name="brand"&gt;&lt;value&gt;çº¢æ——CA72&lt;/value&gt;&lt;/property&gt; &lt;property name="color"&gt;&lt;value&gt;çº¢è‰²&lt;/value&gt;&lt;/property&gt; &lt;property name="maxSpeed"&gt;&lt;value&gt;200&lt;/value&gt;&lt;/property&gt;&lt;/bean&gt; Beançš„æ¯ä¸€ä¸ªå±žæ€§å¯¹åº”ä¸€ä¸ªæ ‡ç­¾ï¼Œå¦‚maxSpeedå¯¹åº”setMaxSpeed()ã€‚ æç¤º:é»˜è®¤æž„é€ å‡½æ•°æ˜¯ä¸å¸¦å‚çš„æž„é€ å‡½æ•°ã€‚Javaè¯­è¨€è§„å®šå¦‚æžœç±»ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•æž„é€ å‡½æ•°ï¼Œåˆ™JVMè‡ªåŠ¨ä¸ºå…¶ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„æž„é€ å‡½æ•°ã€‚åä¹‹ï¼Œå¦‚æžœç±»ä¸­æ˜¾ç¤ºå®šä¹‰äº†æž„é€ å‡½æ•°ï¼Œåˆ™JVMä¸ä¼šä¸ºå…¶ç”Ÿæˆé»˜è®¤çš„æž„é€ å‡½æ•°ã€‚ 2.2.2 æž„é€ å‡½æ•°æ³¨å…¥æž„é€ å‡½æ•°æ³¨å…¥æ–¹å¼æ˜¯é™¤å±žæ€§æ³¨å…¥ä¹‹å¤–çš„å¦ä¸€ç§å¸¸ç”¨çš„æ³¨å…¥æ–¹å¼ï¼Œå®ƒä¿è¯ä¸€äº›å¿…è¦çš„å±žæ€§åœ¨Beanå®žä¾‹åŒ–æ—¶å°±å¾—åˆ°è®¾ç½®ï¼Œå®ƒä¿è¯äº†Beanå®žä¾‹åœ¨å®žä¾‹åŒ–åŽå°±å¯ä»¥ä½¿ç”¨ã€‚å…¶ä¸­æž„é€ å‚æ•°æ³¨å…¥åˆåˆ†ä¸ºï¼ŒæŒ‰ç±»åž‹åŒ¹é…å…¥å‚ã€æŒ‰ç´¢å¼•åŒ¹é…å…¥å‚ã€è”åˆä½¿ç”¨ç±»åž‹å’Œç´¢å¼•åŒ¹é…å…¥å‚ç­‰ã€‚è¿™æ˜¯å› ä¸ºJavaåå°„æœºåˆ¶å¹¶ä¸ä¼šè®°ä½æž„é€ å‡½æ•°çš„å…¥å‚åï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡æŒ‡å®šæž„é€ å‡½æ•°çš„å…¥å‚åè¿›è¡Œæž„é€ å‡½æ•°æ³¨å…¥çš„é…ç½®ï¼Œè€Œåªèƒ½é€šè¿‡å…¥å‚ç±»åž‹å’Œç´¢å¼•ä¿¡æ¯é—´æŽ¥ç¡®å®šæž„é€ å‡½æ•°é…ç½®é¡¹å’Œå…¥å‚çš„å¯¹åº”å…³ç³»ã€‚ä¸‹é¢ç›´æŽ¥çœ‹ä¸€ä¸ªè”åˆä½¿ç”¨ç±»åž‹å’Œç´¢å¼•åŒ¹é…å…¥å‚çš„ä»£ç ç‰‡æ®µï¼š123456789101112131415161718192021222324252627...public Car(String brand, String corp, double price) &#123; this.brand = brand; this.corp = corp; this.price = price;&#125;public Car(String brand, String corp, int maxSpeed) &#123; this.brand = brand; this.corp = corp; this.maxSpeed = maxSpeed;&#125;...// Springé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®&lt;!-- å¯¹åº”Car(String brand, String corp, int maxSpeed)æž„é€ å‡½æ•° --&gt;&lt;bean id="car" class="com.hhxs.bbt.web.Car" &gt; &lt;constructor-arg index="0" type="java.lang.String"&gt; &lt;value&gt;çº¢æ——CA72&lt;/value&gt; &lt;/constructor-arg&gt; &lt;constructor-arg index="1" type="java.lang.String"&gt; &lt;value&gt;ä¸­å›½ä¸€æ±½&lt;/value&gt; &lt;/constructor-arg&gt; &lt;constructor-arg index="2" type="int"&gt; &lt;value&gt;200&lt;/value&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; å¦‚æžœæž„é€ å‡½æ•°æ²¡æœ‰æ­§ä¹‰çš„è¯ï¼Œä¸Šé¢é…ç½®æ–‡ä»¶ä¸­çš„typeå±žæ€§å’Œindexå±žæ€§å‡å¯åŽ»é™¤ã€‚å¦å¤–å¦‚æžœï¼ŒBeanæž„é€ å‡½æ•°å…¥å‚çš„ç±»åž‹æ˜¯å¯è¾¨åˆ«çš„ï¼ˆéžåŸºç¡€æ•°æ®ç±»åž‹ä¸”å…¥å‚ç±»åž‹å„å¼‚ï¼‰ï¼Œæž„é€ å‡½æ•°æ³¨å…¥çš„é…ç½®ä¹Ÿæ˜¯å¯ä»¥ä¸æä¾›ç±»åž‹å’Œç´¢å¼•çš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸ºäº†é¿å…æ½œåœ¨é…ç½®æ­§ä¹‰é—®é¢˜ï¼Œå¦‚æžœBeanå­˜åœ¨å¤šä¸ªæž„é€ å‡½æ•°ï¼Œä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šindexå’Œtypeå±žæ€§ä¸å¤±ä¸ºä¸€ç§è‰¯å¥½çš„é…ç½®ä¹ æƒ¯ã€‚ 2.2.3 å·¥åŽ‚æ³¨å…¥æ–¹æ³•Spring IoCå®¹å™¨ä»¥æ¡†æž¶çš„æ–¹å¼æä¾›å·¥åŽ‚æ–¹æ³•çš„åŠŸèƒ½ï¼Œå¹¶ä»¥é€æ˜Žçš„æ–¹å¼å¼€æ”¾ç»™å¼€å‘è€…ï¼Œæ‰€ä»¥å¾ˆå°‘éœ€è¦æ‰‹å·¥ç¼–å†™åŸºäºŽå·¥åŽ‚æ–¹æ³•çš„ç±»ã€‚æ­£å› ä¸ºæ­¤ï¼Œå·¥ä½œæ–¹æ³•å¯¹äºŽå®žé™…ç¼–ç çš„é‡è¦æ€§å¤§å¤§é™ä½Žï¼Œå®ƒå°†æ…¢æ…¢åœ°æ·¡å‡ºå¼€å‘äººå‘˜çš„è§†é‡Žï¼Œè¿™é‡Œä¸åœ¨è¯´æ˜Žã€‚ 2.2.4 æ³¨å…¥æ–¹å¼çš„é€‰æ‹©æ”¯æŒæž„é€ å‡½æ•°æ³¨å…¥æ–¹å¼çš„ç†ç”±ï¼š æž„é€ å‡½æ•°å¯ä»¥ä¿è¯ä¸€äº›é‡è¦çš„å±žæ€§åœ¨Beanå®žä¾‹åŒ–æ—¶å°±è®¾ç½®å¥½ï¼Œé¿å…å› ä¸ºä¸€äº›é‡å¤å±žæ€§æ²¡æœ‰æä¾›ï¼Œå¯¼è‡´ä¸€ä¸ªæ— ç”¨Beanå®žä¾‹çš„æƒ…å†µï¼› ä¸éœ€è¦ä¸ºæ¯ä¸ªå±žæ€§æä¾›Setteræ–¹æ³•ï¼Œå‡å°‘äº†ç±»çš„æ–¹æ³•ä¸ªæ•°ï¼› å¯ä»¥æ›´å¥½åœ°å°è£…ç±»å˜é‡ï¼Œä¸éœ€è¦ä¸ºæ¯ä¸ªå±žæ€§æŒ‡å®šSetteræ–¹æ³•ï¼Œé¿å…å¤–éƒ¨é”™è¯¯çš„è°ƒç”¨ã€‚ æ”¯æŒå±žæ€§æ³¨å…¥æ–¹å¼çš„ç†ç”±ï¼š å¦‚æžœä¸€ä¸ªç±»çš„å±žæ€§ä¼—å¤šï¼Œæž„é€ å‡½æ•°çš„ç­¾åå°†å˜æˆä¸€ä¸ªåºžç„¶å¤§ç‰©ï¼Œå¯è¯»æ€§å¾ˆå·®ï¼› çµæ´»æ€§ä¸å¤Ÿï¼Œåœ¨æœ‰äº›å±žæ€§æ˜¯å¯é€‰çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœé€šè¿‡æž„é€ å‡½æ•°æ³¨å…¥ï¼Œä¹Ÿéœ€è¦ä¸ºå¯é€‰çš„å‚æ•°æä¾›ä¸€ä¸ªnullå€¼ï¼› å¦‚æžœæœ‰å¤šä¸ªæž„é€ å‡½æ•°ï¼Œéœ€è¦è€ƒè™‘é…ç½®æ–‡ä»¶å’Œå…·ä½“æž„é€ å‡½æ•°åŒ¹é…æ­§ä¹‰çš„é—®é¢˜ï¼Œé…ç½®ä¸Šç›¸å¯¹å¤æ‚ï¼› æž„é€ å‡½æ•°ä¸åˆ©äºŽç±»çš„ç»§æ‰¿å’Œæ‰©å±•ï¼Œå› ä¸ºå­ç±»éœ€è¦å¼•ç”¨åˆ°çˆ¶ç±»å¤æ‚çš„æž„é€ å‡½æ•°ï¼› æž„é€ å‡½æ•°æ³¨å…¥æœ‰æ—¶ä¼šé€ æˆå¾ªçŽ¯ä¾èµ–çš„é—®é¢˜ã€‚ ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œç”Ÿäº§çŽ¯å¢ƒä¸­è¦æ ¹æ®å®žé™…æƒ…å†µä½¿ç”¨ã€‚é™¤äº†å·¥åŽ‚æ–¹æ³•çš„æ³¨å…¥æ–¹å¼å·²ä¸å†ä½¿ç”¨ï¼Œå±žæ€§æ³¨å…¥å’Œæž„é€ å‡½æ•°æ³¨å…¥æ–¹å¼éƒ½æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ã€‚ 2.3 ç®€åŒ–é…ç½®æ–¹å¼åœ¨ä¹‹å‰çš„ä¾‹å­é‡Œæˆ‘ä»¬é‡‡ç”¨å®Œæ•´é…ç½®æ ¼å¼çš„é…ç½®æ–¹å¼ï¼Œä¹Ÿè®¸ä½ å·²ç»å‘çŽ°è¿™ç§æ–¹å¼æ˜¾å¾—æ¯”è¾ƒæ‹–æ²“ã€‚å¦‚æžœç³»ç»Ÿä¸­æ‹¥æœ‰å¤§é‡çš„ç±»éœ€è¦é…ç½®ï¼Œæˆ‘ä»¬ä¸€å®šä¼šæ„Ÿåˆ°å´©æºƒã€‚è¿˜å¥½Springä¸ºæˆ‘ä»¬æä¾›äº†ç®€åŒ–çš„é…ç½®æ–¹å¼ã€‚å¦‚æžœæ²¡æœ‰ç”¨åˆ°å®Œæ•´é…ç½®æ ¼å¼çš„ç‰¹æ®ŠåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½åªä½¿ç”¨ç®€åŒ–çš„é…ç½®æ–¹å¼ã€‚ å­—é¢å€¼å±žæ€§ï¼š ç®€åŒ–å‰ ç®€åŒ–åŽ å­—é¢å€¼å±žæ€§ &lt;property name=&quot;maxSpeed&quot;&gt; &lt;value&gt;ä½ å¥½&lt;/value&gt; &lt;/property&gt; &lt;property name=&quot;maxSpeed&quot; value=&quot;200&quot;/&gt; æž„é€ å‡½æ•°å‚æ•° &lt;constructor-arg type=&quot;java.lang.String&quot;&gt; &lt;value&gt;çº¢æ——CA72&lt;/value&gt; &lt;/constructor-arg&gt; &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;çº¢æ——CA72&quot;/&gt; é›†åˆå…ƒç´  &lt;map&gt; &lt;entry&gt; &lt;key&gt;&lt;value&gt;AM&lt;/value&gt;&lt;/key&gt; &lt;value&gt;ä¼šè§å®¢æˆ·&lt;value&gt; &lt;/entry&gt; &lt;/map&gt; &lt;map&gt; &lt;entry key=&quot;AM&quot; value=&quot;ä¼šè§å®¢æˆ·&quot;/&gt; &lt;/map&gt; å¼•ç”¨å¯¹è±¡å±žæ€§ï¼š ç®€åŒ–å‰ ç®€åŒ–åŽ å­—é¢å€¼å±žæ€§ &lt;property name=&quot;car&quot;&gt; &lt;ref bean=&quot;car&quot;&gt;&lt;/ref&gt; &lt;/property&gt; &lt;property name=&quot;car&quot; ref=&quot;car&quot;/&gt; æž„é€ å‡½æ•°å‚æ•° &lt;constructor-arg&gt; &lt;ref bean=&quot;car&quot;/&gt; &lt;/constructor-arg&gt; &lt;constructor-arg ref=&quot;car&quot;/&gt; é›†åˆå…ƒç´  &lt;map&gt; &lt;entry&gt; &lt;key&gt;&lt;ref bean=&quot;keyBean&quot;/&gt;&lt;/key&gt; &lt;ref bean=&quot;valueBean&quot;/&gt; &lt;/entry&gt; &lt;/map&gt; &lt;map&gt; &lt;entry key-ref=&quot;keyBean&quot; value-ref=&quot;valueBean&quot;/&gt; &lt;/map&gt; ä½¿ç”¨På‘½åç©ºé—´ï¼šä¸ºäº†ç®€åŒ–XMLæ–‡ä»¶çš„é…ç½®ï¼Œè¶Šæ¥è¶Šå¤šçš„XMLæ–‡ä»¶é‡‡ç”¨å±žæ€§è€Œéžå­å…ƒç´ é…ç½®ä¿¡æ¯ã€‚Springä»Ž2.5ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†ä¸€ä¸ªæ–°çš„på‘½åç©ºé—´ï¼Œå¯ä»¥é€šè¿‡&lt;bean&gt;å…ƒç´ å±žæ€§çš„æ–¹å¼é…ç½®Beançš„å±žæ€§ã€‚ æœªé‡‡ç”¨På‘½åç©ºé—´å‰ï¼š123456789101112131415&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt; &lt;bean id="car" class="com.hhxs.bbt.web.Car" &gt; &lt;property name="brand" value="çº¢æ——CA72" /&gt; &lt;property name="color" value="çº¢è‰²" /&gt; &lt;property name="maxSpeed" value="200" /&gt; &lt;/bean&gt; &lt;bean id="boss" class="com.hhxs.bbt.web.Boss"&gt; &lt;property name="car" ref="car"/&gt; &lt;/bean&gt;&lt;/beans&gt; é‡‡ç”¨På‘½åç©ºé—´åŽï¼š1234567891011121314&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt; &lt;bean id="car" class="com.hhxs.bbt.web.Car" p:brand="çº¢æ——CA72" p:color="çº¢è‰²" p:maxSpeed="200"/&gt; &lt;bean id="boss" class="com.hhxs.bbt.web.Boss" p:car-ref="car"/&gt;&lt;/beans&gt; æœªé‡‡ç”¨på‘½åç©ºé—´å‰&lt;bean&gt;ä½¿ç”¨&lt;property&gt;å­å…ƒç´ é…ç½®Beançš„å±žæ€§ï¼Œé‡‡ç”¨på‘½åç©ºé—´åŽï¼Œé‡‡ç”¨&lt;bean&gt;çš„å…ƒç´ å±žæ€§é…ç½®Beançš„å±žæ€§ã€‚ å¯¹äºŽå­—é¢å€¼å±žæ€§ï¼Œå…¶æ ¼å¼ä¸ºï¼š p:&lt;å±žæ€§å&gt;=&quot;xxx&quot; å¯¹äºŽå¼•ç”¨å¯¹è±¡çš„å±žæ€§ï¼Œå…¶æ ¼å¼ä¸ºï¼šp:&lt;å±žæ€§å&gt;-ref=â€œxxxâ€ ç”±äºŽpå‘½åç©ºé—´ä¸­çš„å±žæ€§åæ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥på‘½åç©ºé—´æ²¡æœ‰å¯¹åº”çš„Scheamå®šä¹‰æ–‡ä»¶ï¼Œä¹Ÿå°±ä¸éœ€è¦åœ¨xsi:schemaLocationä¸­ä¸ºpå‘½åç©ºé—´æŒ‡å®šSchemaå®šä¹‰æ–‡ä»¶ã€‚ 3. è‡ªåŠ¨è£…é…Spring IoCå®¹å™¨äº†è§£å®¹å™¨ä¸­æ‰€æœ‰Beançš„é…ç½®ä¿¡æ¯ï¼Œæ­¤å¤–é€šè¿‡Javaåå°„æœºåˆ¶è¿˜å¯ä»¥èŽ·å–å·²çŸ¥å®žçŽ°ä½ ç±»çš„ç»“æž„ä¿¡æ¯ï¼ˆå¦‚æž„é€ å‡½æ•°æ–¹æ³•çš„ç»“æž„ã€å±žæ€§ç­‰ä¿¡æ¯ï¼‰ã€‚æŽŒæ¡å®¹å™¨ä¸­æ‰€æœ‰Beançš„è¿™äº›ä¿¡æ¯åŽï¼ŒSpring IoCå®¹å™¨å°±å¯ä»¥æŒ‰ç…§æŸç§è§„åˆ™å¯¹å®¹å™¨ä¸­çš„Beanè¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œè€Œæ— é¡»æˆ‘ä»¬é€šè¿‡æ˜¾ç¤ºçš„æ–¹å¼è¿›è¡Œé…ç½®ã€‚ &lt;bean&gt;å…ƒç´ æä¾›äº†ä¸€ä¸ªæŒ‡å®šè‡ªåŠ¨ä¸ªè£…é…ç±»åž‹çš„å±žæ€§ï¼šautowire=â€&lt;è‡ªåŠ¨è£…é…ç±»åž‹&gt;â€ã€‚Springæä¾›äº†4ç§è‡ªåŠ¨è£…é…ç±»åž‹ï¼š è‡ªåŠ¨è£…é…ç±»åž‹ è¯´æ˜Ž byName æ ¹æ®åç§°è¿›è¡Œè‡ªåŠ¨åŒ¹é…ã€‚å‡è®¾Bossæœ‰ä¸€ä¸ªåä¸ºcarçš„å±žæ€§ï¼Œå¦‚æžœå®¹å™¨ä¸­åˆšå¥½æœ‰ä¸€ä¸ªåä¸ºcarçš„Beanï¼ŒSpringå°±ä¼šè‡ªåŠ¨å°†å…¶è£…é…ç»™Bossçš„carå±žæ€§ã€‚ byType æ ¹æ®ç±»åž‹è¿›è¡Œè‡ªåŠ¨åŒ¹é…ã€‚å‡è®¾Bossæœ‰ä¸€ä¸ªcarç±»åž‹çš„å±žæ€§ï¼Œå¦‚æžœå®¹å™¨ä¸­åˆšå¥½æœ‰ä¸€ä¸ªcarç±»åž‹çš„Beanï¼ŒSpringå°±ä¼šè‡ªåŠ¨å°†å…¶è£…é…ç»™Bossçš„è¿™ä¸ªå±žæ€§ã€‚ constructor ä¸ŽByTypeç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæ˜¯é’ˆå¯¹æž„é€ å‡½æ•°æ³¨å…¥è€Œè¨€çš„ï¼Œå¦‚æžœBossæœ‰ä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œæž„é€ å‡½æ•°åŒ…å«ä¸€ä¸ªCarç±»åž‹çš„å…¥å‚ï¼Œå¦‚æžœå®¹å™¨ä¸­æœ‰ä¸€ä¸ªCarç±»åž‹çš„Beanï¼Œåˆ™Springå°†è‡ªåŠ¨æŠŠè¿™ä¸ªBeanä½œä¸ºBossæž„é€ å‡½æ•°çš„å…¥å‚ï¼Œå¦‚æžœå®¹å™¨ä¸­æ²¡æœ‰æ‰¾åˆ°å’Œæž„é€ å‡½æ•°å…¥å‚åŒ¹é…ç±»åž‹çš„Beanï¼ŒSpringå°†æŠ›å‡ºå¼‚å¸¸ã€‚ autodetect æ ¹æ®Beançš„è‡ªçœæœºåˆ¶å†³å®šé‡‡ç”¨byTypeè¿˜æ˜¯constructorè¿›è¡Œè‡ªåŠ¨è£…é…ï¼šå¦‚æžœBeanæä¾›äº†é»˜è®¤çš„æž„é€ å‡½æ•°ï¼Œåˆ™é‡‡ç”¨byType; å¦åˆ™é‡‡ç”¨constructor &lt;beans&gt;å…ƒç´ æ ‡ç­¾ä¸­çš„default-autowireå±žæ€§å¯ä»¥é…ç½®å…¨å±€è‡ªåŠ¨åŒ¹é…ï¼Œdefault-autowireå±žæ€§çš„é»˜è®¤å€¼ä¸ºnoï¼Œè¡¨ç¤ºä¸å¯ç”¨è‡ªåŠ¨è£…é…ï¼Œå…¶ä»–å‡ ä¸ªé…ç½®å€¼ä¸ºï¼šbyNameã€byTypeã€constructorã€autodetectï¼Œæ„ä¹‰åŒä¸Šé¢çš„è¡¨æ ¼ã€‚æ³¨æ„ï¼š&lt;beans&gt;ä¸­å®šä¹‰çš„è‡ªåŠ¨è£…é…ç­–ç•¥å¯ä»¥è¢«&lt;bean&gt;çš„è‡ªåŠ¨è£…é…ç­–ç•¥è¦†ç›–ã€‚ æ³¨æ„ï¼šè‡ªåŠ¨è£…é…æœºåˆ¶åœ¨å‡è½»é…ç½®å·¥ä½œé‡çš„åŒæ—¶ä¹Ÿä¼šé€ æˆé…ç½®æ–‡ä»¶ä¸­Beanä¹‹é—´å…³ç³»ä¸æ¸…æ™°çš„é—®é¢˜ï¼Œç”Ÿäº§ä½¿ç”¨æ—¶è¦æ ¹æ®å®žé™…é¡¹ç›®æƒ…å†µã€‚ 4. æ•´åˆå¤šä¸ªé…ç½®æ–‡ä»¶å¯¹äºŽä¸€ä¸ªå¤§åž‹åº”ç”¨æ¥è¯´ï¼Œå¯èƒ½æœ‰å¤šä¸ªXMLé…ç½®æ–‡ä»¶ï¼Œåœ¨å¯åŠ¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªStringæ•°ç»„æŒ‡å®šè¿™äº›é…ç½®æ–‡ä»¶ã€‚Springè¿˜å…è®¸æˆ‘ä»¬é€šè¿‡&lt;import&gt;å°†å¤šä¸ªé…ç½®æ–‡ä»¶å¼•å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿›è¡Œé…ç½®æ–‡ä»¶çš„é›†æˆã€‚å¦‚ä¸‹ï¼Œbeans2.xmlå¼•å…¥äº†beans1.xmlé…ç½®æ–‡ä»¶ï¼š123&lt;import resource="classpath:beans1.xml"/&gt;&lt;bean id="boss1" class="com.hhsx.bbt.web.Boss" p:car-ref="car1"/&gt;&lt;bean id="boss2" class="com.hhxs.bbt.web.Boss" p:car-ref="car2"/&gt; å‡è®¾æˆ‘ä»¬å·²ç»åœ¨beans1.xmlä¸­é…ç½®äº†car1å’Œcar2çš„Bean,é€šè¿‡&lt;import&gt;å¼•å…¥beans1.xmlï¼Œbeans2.xmlå°±æ‹¥æœ‰äº†å®Œæ•´çš„é…ç½®ä¿¡æ¯ã€‚Springå®¹å™¨ä»…éœ€è¦é€šè¿‡beans2.xmlå°±å¯ä»¥åŠ è½½åˆ°æ‰€æœ‰çš„é…ç½®ä¿¡æ¯äº†ã€‚ 5. Beanä½œç”¨åŸŸåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰Beanæ—¶ï¼Œé™¤äº†å¯ä»¥é…ç½®Beançš„å±žæ€§å€¼ä»¥åŠç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè¿˜å¯ä»¥å®šä¹‰Beançš„ä½œç”¨åŸŸã€‚ Beançš„ä½œç”¨åŸŸç±»åž‹ï¼š ç±»åˆ« è¯´æ˜Ž singleton åœ¨Spring IoCå®¹å™¨ä¸­ä»…å­˜åœ¨ä¸€ä¸ªBeanå®žä¾‹ï¼ŒBeanä»¥å•å®žä¾‹çš„æ–¹å¼å­˜åœ¨ ã€‚åœ¨Springä¸­ï¼ŒBeançš„é»˜è®¤ä½œç”¨åŸŸä¸ºsingletonã€‚å¦‚æžœä¸å¸Œæœ›åœ¨å®¹å™¨å¯åŠ¨æ—¶æå‰å®žä¾‹åŒ–Beanï¼Œå¯ä»¥é€šè¿‡lazy-initå±žæ€§è¿›è¡ŒæŽ§åˆ¶ã€‚ prototype æ¯æ¬¡ä»Žå®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›žä¸€ä¸ªæ–°çš„å®žä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºŽæ‰§è¡Œnew XxxBean()çš„æ“ä½œ request æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanã€‚è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºŽWeApplicationContextçŽ¯å¢ƒã€‚ session åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒHTTP Sessionä½¿ç”¨ä¸åŒçš„Beanã€‚è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºŽWeApplicationContextçŽ¯å¢ƒã€‚ globalSession åŒä¸€ä¸ªå…¨å±€Sessionå…±äº«ä¸€ä¸ªBeanï¼Œ ä¸€èˆ¬ç”¨äºŽPorletåº”ç”¨çŽ¯å¢ƒã€‚è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºŽWeApplicationContextçŽ¯å¢ƒã€‚ ä½¿ç”¨æ–¹å¼æ˜¯ï¼š scope=&quot;&lt;ä½œç”¨åŸŸç±»åž‹&gt;&quot;]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Bean</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring3.Xå­¦ä¹ ç¬”è®°1-IoCå®¹å™¨æ¦‚è¿°]]></title>
    <url>%2F2017%2F10%2F28%2FSpring3.X%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01-IoC%E5%AE%B9%E5%99%A8%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[2017å³å°†æŽ¥è¿‘å°¾å£°ï¼Œæ¯å½“å¹´æœ«çš„æ—¶å€™æ€»è¦æ£€æŸ¥ä¸‹ä»Šå¹´è¿˜æœ‰ä»€ä¹ˆäº‹æƒ…æ²¡åšï¼Œç»“æžœå´å‘çŽ°ä»Šå¹´å¥½åƒä¹Ÿæ²¡åšå¤šå°‘äº‹æƒ…ðŸ˜¶ã€‚äºŽæ˜¯å°±æƒ³ç€æŠŠä¹‹å‰ä¸€ç›´æƒ³æ¢³ç†çš„SpringçŸ¥è¯†ï¼Œè¶ç€å¹´æœ«å¥½å¥½æ•´ç†ä¸‹ã€‚æœ¬ç³»åˆ—ç¬”è®°åŸºäºŽâ€Spring3.xä¼ä¸šåº”ç”¨å¼€å‘å®žæˆ˜â€œä¸€ä¹¦ï¼Œè¯´æ¥æƒ­æ„§ï¼Œä¹¦ä¹°äº†å¥½å¤šå¹´äº†ä¹Ÿæ²¡è®¤çœŸçš„çœ‹ä¸€éï¼ŒäºŽæ˜¯å°±æœ‰äº†è¿™ä¸ªæƒ³æ³•ï¼Œç®—æ˜¯2017å¹´çš„æœ€åŽç»™è‡ªå·±çš„ä¸€ä»½äº¤ä»£ã€‚ åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆç®€è¦ä»‹ç»ä¸‹Springå§ï¼ Springæ˜¯åˆ†å±‚çš„Java SE/EEåº”ç”¨ä¸€ç«™å¼çš„è½»é‡çº§å¼€æºæ¡†æž¶ï¼Œç”±Rod Johnsonåˆ›å»ºï¼Œä»¥IoCå’ŒAOPä¸ºå†…æ ¸ï¼Œæä¾›äº†å±•çŽ°å±‚Spring MVCå’ŒæŒä¹…å±‚Spring JDBCä»¥åŠä¸šåŠ¡å±‚äº‹åŠ¡ç®¡ç†ç­‰ä¼—å¤šä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œå¹¶ä»¥æµ·çº³ç™¾å·çš„èƒ¸æ€€æ•´åˆäº†å¼€æºä¸–ç•Œé‡Œä¼—å¤šçš„ä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œé€æ¸æˆä¸ºä½¿ç”¨æœ€å¤šçš„Java EEä¼ä¸šåº”ç”¨å¼€å‘æ¡†æž¶ã€‚ 1ã€IoCæ¦‚è¿°1.1 IoCçš„æ¦‚å¿µIoCï¼ˆæŽ§åˆ¶åè½¬ï¼šInverse of Controlï¼‰æ˜¯ä¸€ä¸ªé‡è¦çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ç†è®ºï¼ŒSpringæ ¸å¿ƒæ¨¡å—å®žçŽ°äº†IoCçš„åŠŸèƒ½ã€‚Springä¸­çš„å…¶ä»–æ¨¡å—ï¼ŒåƒAOPã€å£°æ˜Žå¼äº‹åŠ¡ç­‰åŠŸèƒ½éƒ½æ˜¯å»ºç«‹åœ¨IoCçš„åŸºç¡€ä¹‹ä¸Šï¼Œå®ƒå°†ç±»å’Œç±»ä¹‹é—´çš„ä¾èµ–ä»Žä»£ç ä¸­è„±ç¦»å‡ºæ¥ï¼Œç”¨é…ç½®çš„æ–¹å¼è¿›è¡Œä¾èµ–å…³ç³»æè¿°ï¼Œç”±IoCå®¹å™¨è´Ÿè´£ä¾èµ–ç±»ä¹‹é—´çš„åˆ›å»ºã€æ‹¼æŽ¥ã€ç®¡ç†ã€èŽ·å–ç­‰å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´IoCçš„æ¦‚å¿µæœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼Œä¸€ä¸ªå«æŽ§åˆ¶åè½¬ï¼Œä¸€ä¸ªå«ä¾èµ–æ³¨å…¥ã€‚ç”±äºŽæŽ§åˆ¶åè½¬å¹¶ä¸å¥½ç†è§£ï¼Œä¸šç•Œä¹Ÿæ›¾è¿›è¡Œå¹¿æ³›çš„è®¨è®ºï¼Œæœ€ç»ˆè½¯ä»¶ç•Œçš„æ³°æ–—çº§äººç‰©Martin Folweræå‡ºäº†DIï¼ˆä¾èµ–æ³¨å…¥ï¼šDependency Injectionï¼‰çš„æ¦‚å¿µç”¨ä»¥ä»£æ›¿IoCã€‚ æŽ§åˆ¶åè½¬ï¼šå¯¹äºŽè½¯ä»¶æ¥è¯´ï¼Œå³æŸä¸€æŽ¥å£å…·ä½“å®žçŽ°ç±»çš„é€‰æ‹©æŽ§åˆ¶æƒä»Žè°ƒç”¨ç±»ä¸­ç§»é™¤ï¼Œè½¬äº¤ç»™ç¬¬ä¸‰æ–¹å†³å®šã€‚ ä¾èµ–æ³¨å…¥ï¼šè°ƒç”¨ç±»å¯¹æŸä¸€æŽ¥å£å®žçŽ°ç±»çš„ä¾èµ–å…³ç³»ç”±ç¬¬ä¸‰æ–¹ï¼ˆå®¹å™¨æˆ–åä½œç±»ï¼‰æ³¨å…¥ï¼Œä»¥ç§»é™¤è°ƒç”¨ç±»å¯¹æŸä¸€æŽ¥å£å®žçŽ°ç±»çš„ä¾èµ–ã€‚ ä¸Šé¢ä¸¤ä¸ªæ¦‚å¿µç¬¬ä¸€æ¬¡æŽ¥è§¦çš„æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°éƒ½ä¸å¤ªå¥½ç†è§£ï¼Œé‚£æ˜¯å› ä¸ºè¿˜ä¸æ¸…æ¥šIoCçš„å®žçŽ°æœºåˆ¶ï¼Œéšç€å¯¹IoCäº†è§£çš„æ·±å…¥ï¼Œä½ ä¼šå‘çŽ°ä¾èµ–æ³¨å…¥çš„æ¦‚å¿µç›´æŽ¥æ˜Žäº†ã€‚ 1.2 IoCçš„ç±»åž‹ä»Žæ³¨å…¥æ–¹æ³•ä¸Šçœ‹ï¼Œä¸»è¦å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ç§ç±»åž‹ï¼šæž„é€ å‡½æ•°æ³¨å…¥ã€å±žæ€§æ³¨å…¥å’ŒæŽ¥å£æ³¨å…¥ã€‚Springæ”¯æŒæž„é€ å‡½æ•°æ³¨å…¥å’Œå±žæ€§æ³¨å…¥ã€‚ æž„é€ å‡½æ•°æ³¨å…¥: åœ¨æž„é€ å‡½æ•°æ³¨å…¥ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ç±»çš„æž„é€ å‡½æ•°ï¼Œå°†æŽ¥å£å®žçŽ°ç±»é€šè¿‡æž„é€ å‡½æ•°å˜é‡ä¼ å…¥ã€‚ å±žæ€§æ³¨å…¥: å±žæ€§æ³¨å…¥æ˜¯æŒ‡é€šè¿‡Setteræ–¹æ³•å®Œæˆè°ƒç”¨ç±»æ‰€éœ€ä¾èµ–çš„æ³¨å…¥ã€‚ æŽ¥å£æ³¨å…¥: å°†è°ƒç”¨ç±»æ‰€æœ‰ä¾èµ–æ³¨å…¥çš„æ–¹æ³•æŠ½å–åˆ°ä¸€ä¸ªæŽ¥å£ä¸­ï¼Œè°ƒç”¨ç±»é€šè¿‡å®žçŽ°è¯¥æŽ¥å£æä¾›ç›¸åº”çš„æ³¨å…¥æ–¹æ³•ã€‚ ç”±äºŽé€šè¿‡æŽ¥å£æ³¨å…¥éœ€è¦é¢å¤–å£°æ˜Žä¸€ä¸ªæŽ¥å£ï¼Œå¢žåŠ äº†ç±»çš„æ•°ç›®ï¼Œè€Œä¸”å®ƒçš„æ•ˆæžœå’Œå±žæ€§æ³¨å…¥å¹¶æ— æœ¬è´¨åŒºåˆ«ï¼Œæ‰€ä»¥ä¸æå€¡é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ 2ã€IoCçš„åº•å±‚å®žçŽ°åŽŸç†Springçš„æ ¸å¿ƒæ¨¡å—å®žçŽ°äº†IoCçš„åŠŸèƒ½ï¼Œå®ƒé€šè¿‡é…ç½®æ–‡ä»¶æˆ–æ³¨è§£æè¿°ç±»å’Œç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè‡ªåŠ¨å®Œæˆç±»çš„åˆå§‹åŒ–å’Œä¾èµ–æ³¨å…¥çš„å·¥ä½œã€‚è®©å¼€å‘è€…ä»¬ä»Žåº•å±‚å®žçŽ°ç±»çš„å®žä¾‹åŒ–ã€ä¾èµ–å…³ç³»è£…é…ç­‰å·¥ä½œä¸­è„±ç¦»å‡ºæ¥ï¼Œä¸“æ³¨äºŽæ›´æœ‰æ„ä¹‰çš„ä¸šåŠ¡é€»è¾‘å¼€å‘å·¥ä½œã€‚è¿™ç§â€œç¥žå¥‡â€çš„åŠ›é‡å½’åŠŸäºŽJavaè¯­è¨€æœ¬èº«çš„ç±»åå°„åŠŸèƒ½ã€‚ 2.1 Javaåå°„çŸ¥è¯†Javaè¯­è¨€å…è®¸é€šè¿‡ç¨‹åºåŒ–çš„æ–¹å¼é—´æŽ¥å¯¹Classçš„å¯¹è±¡å®žä¾‹æ“ä½œï¼ŒClassæ–‡ä»¶ç”±ç±»è£…è½½å™¨è£…è½½åŽï¼Œåœ¨JVMä¸­å°†å½¢æˆä¸€ä»½æè¿°CLassç»“æž„çš„å…ƒä¿¡æ¯å¯¹è±¡ï¼Œé€šè¿‡è¯¥å…ƒä¿¡æ¯å¯¹è±¡å¯ä»¥èŽ·çŸ¥Classçš„ç»“æž„ä¿¡æ¯ï¼šå¦‚æž„é€ å‡½æ•°ã€å±žæ€§å’Œæ–¹æ³•ç­‰ã€‚Javaå…è®¸ç”¨æˆ·å€Ÿç”±è¿™ä¸ªClassç›¸å…³çš„å…ƒä¿¡æ¯å¯¹è±¡é—´æŽ¥è°ƒç”¨Classå¯¹è±¡çš„åŠŸèƒ½ï¼Œè¿™å°±ä¸ºä½¿ç”¨ç¨‹åºåŒ–æ–¹å¼æ“ä½œClasså¯¹è±¡å¼€è¾Ÿäº†é€”å¾„ã€‚ä¸‹é¢å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class Car &#123; private String brand; private String color; private int maxSpeed; public Car() &#123;&#125; public Car(String brand, String color, int maxSpeed) &#123; this.brand = brand; this.color = color; this.maxSpeed = maxSpeed; &#125; public void introduce() &#123; System.out.println("brand:" + brand + ";color:" + color + ";maxSpeed:" + maxSpeed); &#125; // çœç•¥å‚æ•°çš„getter/Setteræ–¹æ³•&#125;public class ReflectTest &#123; public static Car initByDefaultConst() throws Throwable &#123; // é€šè¿‡ç±»è£…è½½å™¨èŽ·å–Carç±»å¯¹è±¡ ClassLoader loader = Thread.currentThread().getContextClassLoader(); Class&lt;?&gt; clazz = loader.loadClass("com.hhxs.bbt.web.Car"); // èŽ·å–ç±»çš„é»˜è®¤æž„é€ å™¨å¯¹è±¡å¹¶é€šè¿‡å®ƒå®žä¾‹åŒ–Car Constructor&lt;?&gt; cons = clazz.getDeclaredConstructor((Class[]) null); Car car = (Car) cons.newInstance(); // é€šè¿‡åå°„æ–¹æ³•è®¾ç½®å±žæ€§ Method setBrand = clazz.getMethod("setBrand", String.class); setBrand.invoke(car, "çº¢æ——CA72"); Method setColor = clazz.getMethod("setColor", String.class); setColor.invoke(car, "é»‘è‰²"); Method setMaxSpeed = clazz.getMethod("setMaxSpeed", int.class); setMaxSpeed.invoke(car, 200); return car; &#125; public static void main(String[] args) throws Throwable &#123; Car car1 = initByDefaultConst(); car1.introduce(); &#125;&#125; é€šè¿‡æŸ¥çœ‹è¿è¡Œç»“æžœï¼Œå¯ä»¥çœ‹åˆ°è¿™å’Œç›´æŽ¥é€šè¿‡æž„é€ å‡½æ•°å’Œæ–¹æ³•è°ƒç”¨ç±»åŠŸèƒ½çš„æ•ˆæžœæ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡å‰è€…æ˜¯é—´æŽ¥è°ƒç”¨ï¼ŒåŽè€…æ˜¯ç›´æŽ¥è°ƒç”¨ç½¢äº†ã€‚è¿™è¯´æ˜Žæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼è°ƒç”¨Classçš„å„é¡¹åŠŸèƒ½ã€‚å¦‚æžœæˆ‘ä»¬å°†è¿™äº›ä¿¡æ¯ä»¥ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„æ–¹å¼æä¾›ï¼Œå°±å¯ä»¥ä½¿ç”¨Javaè¯­è¨€çš„åå°„åŠŸèƒ½ç¼–å†™ä¸€æ®µé€šç”¨ä»£ç å¯¹ç±»ä¼¼äºŽCarçš„ç±»è¿›è¡Œå®žä¾‹åŒ–åŠåŠŸèƒ½è°ƒç”¨æ“ä½œäº†ã€‚æœ‰æ²¡æœ‰æ„Ÿè§‰è¿™å’Œä¸Šé¢æåˆ°çš„Springæ¡†æž¶çš„å®žçŽ°æœºåˆ¶å¾ˆç›¸ä¼¼ï¼ŒSpringæ­£æ˜¯åŸºäºŽJavaè¯­è¨€è‡ªå¸¦çš„åå°„æœºåˆ¶å®žçŽ°äº†IoCçš„åŠŸèƒ½ã€‚ ä¸‹é¢ç®€è¦ä»‹ç»ä¸‹ä¸Šè¿°ä¾‹å­ç”¨åˆ°å¾—ä¸‰ä¸ªä¸»è¦åå°„ç±»ï¼Œè¿™äº›åå°„å¯¹è±¡ç±»åœ¨java.reflectåŒ…ä¸­å®šä¹‰: Constructor: ç±»çš„æž„é€ å‡½æ•°åå°„ç±»ï¼Œé€šè¿‡Class#getConstructors()æ–¹æ³•å¯ä»¥èŽ·å¾—ç±»çš„æ‰€æœ‰æž„é€ å‡½æ•°åå°„å¯¹è±¡æ•°ç»„ã€‚Constructorçš„ä¸€ä¸ªä¸»è¦æ–¹æ³•æ˜¯newInstance(Object[]â€¦ initargs)ï¼Œé€šè¿‡è¯¥æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç±»çš„å®žä¾‹ï¼Œç›¸å½“newå…³é”®å­—ã€‚ Method: ç±»æ–¹æ³•çš„åå°„ç±»ï¼Œé€šè¿‡Class#getDeclaredMethods()æ–¹æ³•å¯ä»¥èŽ·å–ç±»çš„æ‰€æœ‰æ–¹æ³•å‘å°„ç±»å¯¹è±¡æ•°ç»„Method[]ã€‚Methodæœ€ä¸»è¦çš„æ–¹æ³•æ˜¯invoke(Object obj, Objcetâ€¦ args)ï¼Œobjè¡¨ç¤ºæ“ä½œçš„ç›®æ ‡å¯¹è±¡ï¼Œargsä¸ºæ–¹æ³•å…¥å‚ã€‚ Field: ç±»çš„æˆå‘˜å˜é‡åå°„ç±»ï¼Œé€šè¿‡Class#getDeclaredFields()æ–¹æ³•å¯ä»¥èŽ·å–ç±»çš„æˆå‘˜å˜é‡åå°„å¯¹è±¡æ•°ç»„ã€‚Filedç±»æœ€ä¸»è¦çš„æ–¹æ³•æ˜¯set(Object obj, Object value)ï¼Œobjè¡¨ç¤ºæ“ä½œçš„ç›®æ ‡å¯¹è±¡ï¼Œé€šè¿‡valueä¸ºç›®æ ‡ç±»å¯¹è±¡çš„æˆå‘˜å˜é‡è®¾ç½®å€¼ã€‚ æ­¤å¤–ï¼ŒJavaè¿˜ä¸ºåŒ…æä¾›äº†Packageåå°„ç±»ï¼Œåœ¨JDK5.0ä¸­è¿˜æœªæ³¨è§£æä¾›äº†AnnotatedElementåå°„ç±»ã€‚æ€»ä¹‹ï¼ŒJavaçš„åå°„ä½“ç³»ä¿è¯äº†å¯ä»¥é€šè¿‡ç¨‹åºåŒ–çš„æ–¹å¼è®¿é—®ç›®æ ‡ç±»ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯¹äºŽprivateæˆ–protectedçš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œåªè¦JVMçš„å®‰å…¨æœºåˆ¶å…è®¸ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå°„è¿›è¡Œè°ƒç”¨setAccessible(boolean access)ã€‚ 3ã€ä¸‰ä¸ªæ ¸å¿ƒæŽ¥å£Springé€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æè¿°BeanåŠBeanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåˆ©ç”¨Javaè¯­è¨€çš„åå°„åŠŸèƒ½å®žä¾‹åŒ–Beanå¹¶å»ºç«‹Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚Springçš„IoCå®¹å™¨åœ¨å®Œæˆè¿™äº›åº•å±‚å·¥ä½œçš„åŸºç¡€ä¸Šï¼Œè¿˜æä¾›äº†Beanå®žä¾‹ç¼“å­˜ã€å£°æ˜Žå‘¨æœŸç®¡ç†ã€Beanå®žä¾‹ä»£ç†ã€äº‹ä»¶å‘å¸ƒã€èµ„æºè£…è½½ç­‰é«˜çº§æœåŠ¡ã€‚ 3.1 BeanFactoryBeanå·¥åŽ‚(com.springframework.beans.factory.BeanFactory)æ˜¯Springæ¡†æž¶æœ€æ ¸å¿ƒçš„æŽ¥å£ï¼Œå®ƒæä¾›äº†é«˜çº§IoCçš„é…ç½®æœºåˆ¶ã€‚BeanFactoryä½¿ç®¡ç†ä¸åŒä¸åŒç±»åž‹çš„Javaå¯¹è±¡æˆä¸ºå¯èƒ½ï¼Œä¸€èˆ¬ç§°BeanFactoryä¸ºIoCå®¹å™¨ã€‚BeanFactoryæ˜¯ç±»çš„é€šç”¨å·¥åŽ‚ï¼Œå®ƒå¯ä»¥åˆ›å»ºå¹¶ç®¡ç†å„ç§ç±»çš„å¯¹è±¡ï¼ŒSpringç§°è¿™äº›è¢«åˆ›å»ºå’Œç®¡ç†çš„Javaå¯¹è±¡ä¸ºBeanã€‚Beanæœ€ä¸»è¦çš„æ–¹æ³•å°±æ˜¯getBean(String beanName)ï¼Œè¯¥æ–¹æ³•ä»Žå®¹å™¨ä¸­è¿”å›žç‰¹å®šåç§°çš„Beanã€‚ä¸‹é¢çœ‹ä¸€ä¸ªå°ä¾‹å­:1234567891011121314151617181920212223242526// springæ–‡ä»¶&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt; &lt;bean id="car" class="com.hhxs.bbt.web.Car" p:brand="çº¢æ——CA72" p:color="é»‘è‰²" p:maxSpeed="200" /&gt;&lt;/beans&gt;// JAVAä»£ç public class BeanFactoryTest &#123; public static void main(String[] args) throws Throwable&#123; ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver(); Resource res = resolver.getResource("classpath:spring/beans.xml"); System.out.println(res.getURL()); BeanFactory bf = new XmlBeanFactory(res); System.out.println("init BeanFactory."); Car car = bf.getBean("car",Car.class); System.out.println("car bean is ready for use!"); car.introduce(); &#125;&#125; æ³¨æ„ï¼š é€šè¿‡BeanFactoryå¯åŠ¨IoCå®¹å™¨æ—¶ï¼Œå¹¶ä¸ä¼šåˆå§‹åŒ–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„Beanï¼Œåˆå§‹åŒ–åŠ¨ä½œå‘ç”Ÿåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ã€‚å¯¹äºŽå•å®žä¾‹çš„Beanæ¥è¯´ï¼ŒBeanFactoryä¼šç¼“å­˜Beanå®žä¾‹ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡ä½¿ç”¨getBean()èŽ·å–Beanæ—¶å°†ç›´æŽ¥ä»ŽIoCå®¹å™¨çš„ç¼“å­˜ä¸­èŽ·å–Beanå®žä¾‹ã€‚Springåœ¨DefaultSingletonBeanRegistryç±»ä¸­æä¾›äº†ä¸€ä¸ªç”¨äºŽç¼“å­˜å•å®žä¾‹Beançš„ç¼“å­˜å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨HashMapå®žçŽ°çš„ç¼“å­˜å™¨ï¼Œå•å®žä¾‹çš„Beanä»¥beanNameä¸ºé”®ä¿å­˜åœ¨è¿™ä¸ªHashMapä¸­ã€‚ 3.2 ApplicationContextåº”ç”¨ä¸Šä¸‹æ–‡(com.springframework.context.ApplicationContext)å»ºç«‹åœ¨BeanFactoryåŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†å›½é™…åŒ–æ”¯æŒå’Œæ¡†æž¶äº‹ä»¶ä½“ç³»ï¼Œæ›´æ˜“äºŽåˆ›å»ºå®žé™…åº”ç”¨ã€‚ä¸€èˆ¬ç§°ApplicationContextä¸ºåº”ç”¨ä¸Šä¸‹æ–‡æˆ–è€…Springå®¹å™¨ã€‚ ApplicationContextçš„ä¸»è¦å®žçŽ°ç±»æ˜¯ClassPathXmlApplicationContextå’ŒFileSystemXmlApplicationContextï¼Œå‰è€…é»˜è®¤ä»Žç±»è·¯å¾„ä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼ŒåŽè€…é»˜è®¤ä»Žæ–‡ä»¶ç³»ç»Ÿä¸­è£…è½½é…ç½®æ–‡ä»¶ã€‚ 123ApplicationContext ctx = new ClassPathXmlApplicationContext("spring/beans.xml"); //æˆ–è€…ApplicationContext ctx = new FileSystemXmlApplicationContext("spring/beans.xml"); åœ¨èŽ·å–ApplicationContextå®žä¾‹åŽï¼Œå°±å¯ä»¥åƒBeanFactoryä¸€æ ·è°ƒç”¨getBean(beanName)è¿”å›žBeanäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šApplicationContextåœ¨åˆå§‹åŒ–åº”ç”¨ä¸Šä¸‹æ–‡æ—¶å°±å®žä¾‹åŒ–æ‰€æœ‰å•å®žä¾‹çš„Beanã€‚å› æ­¤ï¼Œç›¸æ¯”BeanFactoryï¼Œåˆå§‹åŒ–æ—¶é—´ä¹Ÿä¼šç›¸å¯¹è¾ƒé•¿äº›ï¼Œä¸è¿‡ä¹‹åŽçš„è°ƒç”¨å°±ä¸åœ¨æœ‰â€œç¬¬ä¸€æ¬¡æƒ©ç½šâ€çš„é—®é¢˜ã€‚ 3.3 WebApplicationContextWebApplicationContextæ˜¯ä¸“é—¨ä¸ºWebåº”ç”¨å‡†å¤‡çš„ï¼Œå®ƒå…è®¸åº”ç”¨ä»Žç›¸å¯¹äºŽWebæ ¹ç›®å½•çš„è·¯å¾„ä¸­è£…è½½é…ç½®æ–‡ä»¶å®Œæˆåˆå§‹åŒ–å·¥ä½œã€‚ä»ŽWebApplicationContextä¸­å¯ä»¥èŽ·å¾—ServletContextçš„å¼•ç”¨ï¼Œæ•´ä¸ªWebåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å°†ä½œä¸ºå±žæ€§æ”¾ç½®åˆ°ServletContextä¸­ï¼Œä»¥ä¾¿Webåº”ç”¨çŽ¯å¢ƒå¯ä»¥è®¿é—®Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚ WebApplicationContextçš„åˆå§‹åŒ–æ–¹å¼å’ŒBeanFactoryã€ApplicationContextæœ‰æ‰€åŒºåˆ«ï¼Œå› ä¸ºWebApplicationContextéœ€è¦ServletContextå®žä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¿…é¡»åœ¨æ‹¥æœ‰Webå®¹å™¨çš„å‰æä¸‹æ‰èƒ½å®Œæˆå¯åŠ¨çš„å·¥ä½œã€‚æœ‰è¿‡Webå¼€å‘ç»éªŒçš„è¯»è€…éƒ½çŸ¥é“å¯ä»¥åœ¨web.xmlä¸­é…ç½®è‡ªå¯åŠ¨çš„Servlet(spring3.0åŠä»¥åŽç‰ˆæœ¬ä¸­å·²ç»åˆ é™¤)æˆ–å®šä¹‰Webå®¹å™¨ç›‘å¬å™¨ï¼ˆServletContextListenerï¼‰ï¼Œå€ŸåŠ©è¿™ä¸¤è€…ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥å®Œæˆå¯åŠ¨Spring Webåº”ç”¨ä¸Šä¸‹æ–‡çš„å·¥ä½œã€‚é€šè¿‡webå®¹å™¨ç›‘å¬å™¨å¯åŠ¨ï¼šweb.xml 1234567891011&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt; classpath:/spring/spring-context.xml &lt;/param-value&gt;&lt;/context-param&gt;&lt;!-- springå®¹å™¨å¯åŠ¨ç›‘å¬å™¨ --&gt;&lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;&lt;/listener&gt; 4ã€Beançš„ç”Ÿå‘½å‘¨æœŸ4.1 BeanFactoryä¸­Beançš„ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬çŸ¥é“Webå®¹å™¨ä¸­çš„Servletæ‹¥æœ‰æ˜Žç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼ŒSpringå®¹å™¨ä¸­çš„Beanä¹Ÿæ‹¥æœ‰ç›¸ä¼¼çš„ç”Ÿå‘½å‘¨æœŸã€‚æˆ‘ä»¬å¯ä»¥ä»Žä¸¤ä¸ªå±‚é¢å®šä¹‰Beançš„ç”Ÿå‘½å‘¨æœŸï¼šç¬¬ä¸€ä¸ªå±‚é¢æ˜¯Beançš„ä½œç”¨èŒƒå›´ï¼›ç¬¬äºŒä¸ªå±‚é¢æ˜¯å®žä¾‹åŒ–Beanæ—¶æ‰€ç»åŽ†çš„ä¸€ç³»åˆ—é˜¶æ®µã€‚ å½“è°ƒç”¨è€…é€šè¿‡getBean(beanName)å‘å®¹å™¨è¯·æ±‚æŸä¸€ä¸ªBeanæ—¶ï¼Œå¦‚æžœå®¹å™¨æ³¨å†Œäº†org.springframework.beans.factory.config.InstantiationAwareBeanPostProcessoræŽ¥å£ï¼Œåœ¨å®žä¾‹åŒ–Beanä¹‹å‰ï¼Œå°†è°ƒç”¨æŽ¥å£çš„postProcessBeforeInstantiation()æ–¹æ³•; æ ¹æ®é…ç½®æƒ…å†µè°ƒç”¨Beanæž„é€ å‡½æ•°æˆ–å·¥åŽ‚æ–¹æ³•å®žä¾‹åŒ–Beanï¼› å¦‚æžœå®¹å™¨æ³¨å†Œäº†InstantiationAwareBeanPostProcessoræŽ¥å£ï¼Œåœ¨å®žä¾‹åŒ–Beanä¹‹åŽï¼Œè°ƒç”¨è¯¥æŽ¥å£çš„postProcessAfterInstantiationn()æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¯¹å·²ç»å®žä¾‹åŒ–çš„å¯¹è±¡è¿›è¡Œå¤„ç†ã€‚ å¦‚æžœBeané…ç½®äº†å±žæ€§ä¿¡æ¯ï¼Œå®¹å™¨åœ¨è¿™ä¸€æ­¥ç€æ‰‹å°†é…ç½®å€¼è®¾ç½®åˆ°Beanå¯¹åº”çš„å±žæ€§ä¸­ï¼Œä¸è¿‡åœ¨è®¾ç½®æ¯ä¸ªå±žæ€§å€¼ä¹‹å‰å…ˆè°ƒç”¨InstantiationAwareBeanPostProcessoræŽ¥å£çš„postProcessPropertyValues()æ–¹æ³•ï¼› è°ƒç”¨Beançš„å±žæ€§è®¾ç½®æ–¹æ³•è®¾ç½®å±žæ€§å€¼ï¼› å¦‚æžœBeanå®žçŽ°äº†org.springframework.beans.factory.BeanNameAwareæŽ¥å£ï¼Œå°†è°ƒç”¨setBeanName()æŽ¥å£æ–¹æ³•ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­è¯¥Beanå¯¹åº”çš„åç§°è®¾ç½®åˆ°Beanä¸­ï¼› å¦‚æžœBeanå®žçŽ°äº†org.springframework.bean.factory.BeanFactoryAwareæŽ¥å£ï¼Œå°†è°ƒç”¨setBeanFactory()æŽ¥å£æ–¹æ³•ï¼Œå°†BeanFactoryå®¹å™¨å®žä¾‹è®¾ç½®åˆ°Beanä¸­ï¼› å¦‚æžœBeanFactoryè£…é…äº†org.springframework.beans.factory.config.BeanPostProcessoråŽå¤„ç†å™¨ï¼Œå°†è°ƒç”¨BeanPostProcessorçš„Object postProcessBeforeInstantiation(Object bean, Stringn beanName)æŽ¥å£æ–¹æ³•å¯¹Beanè¿›è¡ŒåŠ å·¥æ“ä½œã€‚å…¶ä¸­å…¥å‚beanæ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„Beanï¼Œè€ŒbeanNameæ˜¯å½“å‰Beançš„é…ç½®åï¼Œè¿”å›žçš„å¯¹è±¡ä¸ºåŠ å·¥å¤„ç†åŽçš„Beanã€‚BeanPostProcessoråœ¨Springæ¡†æž¶ä¸­å æœ‰é‡è¦çš„åœ°ä½ï¼Œä¸ºå®¹å™¨æä¾›duiBeanè¿›è¡ŒåŽç»­æž¶æž„å¤„ç†çš„åˆ‡å…¥ç‚¹ï¼ŒSpringå®¹å™¨æ‰€æä¾›çš„å„ç§â€œç¥žå¥‡åŠŸèƒ½â€ï¼ˆå¦‚AOPï¼ŒåŠ¨æ€ä»£ç†ç­‰ï¼‰éƒ½é€šè¿‡BeanPostProcessorå®žæ–½ï¼› å¦‚æžœBeanå®žçŽ°äº†InitializingBeançš„æŽ¥å£ï¼Œå°†è°ƒç”¨è¯¥æŽ¥å£çš„afterPropertiesSet()æ–¹æ³•ï¼› å¦‚æžœåœ¨é€šè¿‡init-methodå±žæ€§å®šä¹‰äº†åˆå§‹åŒ–æ–¹æ³•ï¼Œå°†æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼› BeanPostProcessoråŽå¤„ç†å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼šå…¶ä¸€æ—¶postProcessBeforeInstantiation()åœ¨ç¬¬8æ­¥è°ƒç”¨ï¼›å…¶äºŒæ˜¯Object postProcessAfterInstantiationn(Object bean, String beanName)æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ­¤æ—¶è°ƒç”¨ï¼Œå®¹å™¨ä¸­å†æ¬¡èŽ·å¾—å¯¹Beanè¿›è¡ŒåŠ å·¥å¤„ç†çš„æœºä¼šã€‚ å¦‚æžœåœ¨ä¸­æŒ‡å®šBeançš„ä½œç”¨èŒƒå›´æ˜¯scope=â€prototypeâ€ï¼Œå°†Beanè¿”å›žç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…è´Ÿè´£BeanåŽç»­ç”Ÿå‘½çš„ç®¡ç†ï¼ŒSpringä¸å†ç®¡ç†è¿™ä¸ªBeançš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æžœä½œç”¨èŒƒå›´è®¾ç½®ä¸ºscope=â€œsingletonâ€ï¼Œåˆ™å°†Beanæ”¾å…¥åˆ°Spring IoCå®¹å™¨çš„ç¼“å­˜æ± ä¸­ï¼Œå¹¶å°†Beanå¼•ç”¨è¿”å›žç»™è°ƒç”¨è€…ï¼ŒSpringç»§ç»­å¯¹è¿™äº›Beanè¿›è¡ŒåŽç»­çš„ç”Ÿå‘½ç®¡ç†ã€‚ å¯¹äºŽscope=â€œsingletonâ€çš„Beanï¼Œå½“å®¹å™¨å…³é—­æ—¶ï¼Œå°†è§¦å‘Springå¯¹Beançš„åŽç»­ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†å·¥ä½œï¼Œé¦–å…ˆå¦‚æžœBeanå®žçŽ°äº†DisposableBeanæŽ¥å£ï¼Œåˆ™å°†è°ƒç”¨æŽ¥å£çš„afterPropertiesSet()æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ­¤ç¼–å†™é‡Šæ”¾èµ„æºã€è®°å½•æ—¥å¿—ç­‰æ“ä½œã€‚ å¯¹äºŽscope=â€œsingletonâ€çš„Beanï¼Œå¦‚æžœé€šè¿‡çš„destroy-methodå±žæ€§æŒ‡å®šäº†Beançš„é”€æ¯æ–¹æ³•ï¼ŒSpringå°†æ‰§è¡ŒBeançš„è¿™ä¸ªæ–¹æ³•ï¼Œå®ŒæˆBeanèµ„æºçš„é‡Šæ”¾ç­‰æ“ä½œã€‚ Beanç”Ÿå‘½å‘¨æœŸå®žä¾‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184public class Car implements BeanFactoryAware, BeanNameAware, InitializingBean, DisposableBean &#123; private String brand; private String color; private int maxSpeed; private BeanFactory beanFactory; private String beanName; public Car() &#123; System.out.println("è°ƒç”¨Car()æž„é€ å‡½æ•°ã€‚"); &#125; public Car(String brand, String color, int maxSpeed) &#123; this.brand = brand; this.color = color; this.maxSpeed = maxSpeed; &#125; public void introduce() &#123; System.out.println("brand:" + brand + ";color:" + color + ";maxSpeed:" + maxSpeed); &#125; public String getBrand() &#123; return brand; &#125; public void setBrand(String brand) &#123; System.out.println("è°ƒç”¨setBrand()è®¾ç½®å±žæ€§ã€‚"); this.brand = brand; &#125; public String getColor() &#123; return color; &#125; public void setColor(String color) &#123; this.color = color; &#125; public int getMaxSpeed() &#123; return maxSpeed; &#125; public void setMaxSpeed(int maxSpeed) &#123; this.maxSpeed = maxSpeed; &#125; // 5 DisposableBeanæ–¹æ³• @Override public void destroy() throws Exception &#123; System.out.println("è°ƒç”¨DisposaleBean.destroy()ã€‚"); &#125; // 4 IntializingBeanæŽ¥å£æ–¹æ³• @Override public void afterPropertiesSet() throws Exception &#123; System.out.println("è°ƒç”¨IntializingBean.afterPropertiesSet()ã€‚"); &#125; // 3 BeanNameAwareæŽ¥å£æ–¹æ³• @Override public void setBeanName(String name) &#123; System.out.println("è°ƒç”¨BeanNameAware.setBeanName()ã€‚"); this.beanName = beanName; &#125; // 2 BeanFactoryAwareæŽ¥å£æ–¹æ³• @Override public void setBeanFactory(BeanFactory beanFactory) throws BeansException &#123; System.out.println("è°ƒç”¨BeanFactoryAware.setBeanFactory()ã€‚"); this.beanFactory = beanFactory; &#125; // 6 é€šè¿‡&lt;bean&gt;çš„init-methodå±žæ€§æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³• public void myInit() &#123; System.out.println("è°ƒç”¨init-methodæ‰€æŒ‡å®šçš„myInit()ï¼Œå°†maxSpeedè®¾ç½®ä¸º240ã€‚"); this.maxSpeed = 240; &#125; // 7 é€šè¿‡&lt;bean&gt;çš„destroy-methodå±žæ€§æŒ‡å®šçš„é”€æ¯æ–¹æ³• public void myDestroy() &#123; System.out.println("è°ƒç”¨destroy-methodæ‰€æŒ‡å®šçš„myDestroy()ã€‚"); &#125;&#125;public class MyInstantiationAwareBeanPostProcessor extends InstantiationAwareBeanPostProcessorAdapter &#123; // 1 åœ¨å®žä¾‹åŒ–Beanå‰è¿›è¡Œè°ƒç”¨ public Object postProcessBeforeInitialization(Class beanClass, String beanName) throws BeansException &#123; // 1-1 ä»…å¯¹å®¹å™¨ä¸­Car Beanè¿›è¡Œå¤„ç† if ("car".equals(beanName)) &#123; System.out.println("InstantiationAware BeanPostProcessor.postProcessBeforeInstantiation"); &#125; return null; &#125; // 2 åœ¨å®žä¾‹åŒ–BeanåŽè°ƒç”¨ public boolean postProcessAfterInstantiation(Object bean, String beanName) &#123; // 2-1 ä»…å¯¹å®¹å™¨ä¸­Car Beanè¿›è¡Œå¤„ç† if ("car".equals(beanName)) &#123; System.out.println("InstantiationAware BeanPostProcessor.postProcessAfterInstantiation"); &#125; return true; &#125; // 3 åœ¨è®¾ç½®æŸä¸ªå±žæ€§æ—¶è°ƒç”¨ public PropertyValues postProcessPropertyValues(PropertyValues pvs, PropertyDescriptor[] pds, Object bean, String beanName) throws BeansException &#123; // 3-1 ä»…å¯¹å®¹å™¨ä¸­Car Beanè¿›è¡Œå¤„ç†,è¿˜å¯ä»¥é€šè¿‡pdstå…¥å‚è¿›è¡Œè¿‡æ»¤ï¼Œä»…å¯¹carçš„æŸä¸ªç‰¹å®šå±žæ€§æ—¶è¿›è¡Œå¤„ç† if("car".equals(beanName)) &#123; System.out.println("InstantiationAware AwareBeanPostProcessor.postProcessPropertyValues"); &#125; return pvs; &#125;&#125;public class MyBeanPostProcessor implements BeanPostProcessor &#123; @Override public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; if(beanName.equals("car")) &#123; Car car = (Car)bean; if(car.getColor() == null) &#123; System.out.println("è°ƒç”¨BeanPostProcessor.postProcessBeforeInitialization(),colorä¸ºç©ºï¼Œè®¾ç½®ä¸ºé»˜è®¤é»‘è‰²ã€‚"); car.setColor("é»‘è‰²"); &#125; &#125; return bean; &#125; @Override public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; if(beanName.equals("car")) &#123; Car car = (Car)bean; if(car.getMaxSpeed() &gt;= 200) &#123; System.out.println("è°ƒç”¨BeanPostProcessor.postProcess AfterInitialization(), å°†maxSpeedè°ƒæ•´ä¸º200ã€‚"); car.setMaxSpeed(200); &#125; &#125; return bean; &#125;&#125;**beans.xml**&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt; &lt;bean id="car" class="com.hhxs.bbt.web.Car" init-method="myInit" destroy-method="myDestroy" p:brand="çº¢æ——CA72" p:maxSpeed="200" scope="singleton" /&gt;&lt;/beans&gt;public class BeanLifeCycle &#123; private static void lifeCycleInBeanFactory() &#123; Resource res = new ClassPathResource("spring/beans.xml"); BeanFactory bf = new XmlBeanFactory(res); // å‘å®¹å™¨ä¸­æ³¨å†ŒåŽå¤„ç†å™¨ ((ConfigurableBeanFactory)bf).addBeanPostProcessor(new MyBeanPostProcessor()); ((ConfigurableBeanFactory)bf).addBeanPostProcessor(new MyInstantiationAwareBeanPostProcessor()); // ç¬¬ä¸€æ¬¡ä»Žå®¹å™¨ä¸­èŽ·å–Carï¼Œå°†è§¦å‘å®¹å™¨å®žä¾‹åŒ–è¯¥Bean,è¿™å°†å¼•å‘Beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨ã€‚ Car car1 = (Car)bf.getBean("car"); car1.introduce(); car1.setColor("çº¢è‰²"); car1.introduce(); // ç¬¬äºŒæ¬¡ä»Žå®¹å™¨ä¸­èŽ·å–Carï¼Œç›´æŽ¥ä»Žç¼“å­˜æ± ä¸­èŽ·å– Car car2 = (Car)bf.getBean("car"); // æŸ¥çœ‹car1å’Œcar2æ˜¯å¦æŒ‡å‘åŒä¸€å¼•ç”¨ System.out.println("car1==car2:" + (car1==car2)); // å…³é—­å®¹å™¨ ((XmlBeanFactory)bf).destroySingletons(); &#125; public static void main(String[] args) &#123; lifeCycleInBeanFactory(); &#125;&#125; è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬åœ¨æŽ§åˆ¶å°ä¸Šå¾—åˆ°ä»¥ä¸‹è¾“å‡ºä¿¡æ¯ï¼Œä»”ç»†è§‚å¯Ÿï¼Œå°†å‘çŽ°å®ƒéªŒè¯äº†æˆ‘ä»¬å‰é¢æ‰€ä»‹ç»çš„Beanç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ã€‚123456789101112131415è°ƒç”¨Car()æž„é€ å‡½æ•°ã€‚InstantiationAware BeanPostProcessor.postProcessAfterInstantiationInstantiationAware AwareBeanPostProcessor.postProcessPropertyValuesè°ƒç”¨setBrand()è®¾ç½®å±žæ€§ã€‚è°ƒç”¨BeanNameAware.setBeanName()ã€‚è°ƒç”¨BeanFactoryAware.setBeanFactory()ã€‚è°ƒç”¨BeanPostProcessor.postProcessBeforeInitialization(),colorä¸ºç©ºï¼Œè®¾ç½®ä¸ºé»˜è®¤é»‘è‰²ã€‚è°ƒç”¨IntializingBean.afterPropertiesSet()ã€‚è°ƒç”¨init-methodæ‰€æŒ‡å®šçš„myInit()ï¼Œå°†maxSpeedè®¾ç½®ä¸º240ã€‚è°ƒç”¨BeanPostProcessor.postProcess AfterInitialization(), å°†maxSpeedè°ƒæ•´ä¸º200ã€‚brand:çº¢æ——CA72;color:é»‘è‰²;maxSpeed:200brand:çº¢æ——CA72;color:çº¢è‰²;maxSpeed:200car1==car2:trueè°ƒç”¨DisposaleBean.destroy()ã€‚è°ƒç”¨destroy-methodæ‰€æŒ‡å®šçš„myDestroy()ã€‚ 4.2 ApplicationContextä¸­Beançš„ç”Ÿå‘½å‘¨æœŸBeanåœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ç”Ÿå‘½å‘¨æœŸå’ŒBeanFactoryä¸­ç”Ÿå‘½å‘¨æœŸç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œå¦‚æžœBeanå®žçŽ°org.springframework.context.ApplicationContextAwareæŽ¥å£ï¼Œä¼šå¢žåŠ ä¸€ä¸ªè°ƒç”¨è¯¥æŽ¥å£æ–¹æ³•setApplicationContext()çš„æ­¥éª¤ã€‚ æ­¤å¤–ï¼Œå¦‚æžœé…ç½®æ–‡ä»¶ä¸­å£°æ˜Žäº†å·¥ä½œåŽå¤„ç†å™¨æŽ¥å£BeanFactoryPostProcessorçš„å®žçŽ°ç±»ï¼Œåˆ™åº”ç”¨ä¸Šä¸‹æ–‡åœ¨è£…è½½é…ç½®æ–‡ä»¶ä¹‹åŽåˆå§‹åŒ–Beanå®žä¾‹ä¹‹å‰å°†è°ƒç”¨è¿™äº›BeanFactoryPostProcessorå¯¹é…ç½®ä¿¡æ¯è¿›è¡ŒåŠ å·¥å¤„ç†ã€‚å·¥åŽ‚åŽå¤„ç†å™¨æ˜¯å®¹å™¨çº§çš„ï¼Œä»…åœ¨åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œå…¶ç›®çš„æ˜¯å®Œæˆä¸€äº›é…ç½®æ–‡ä»¶çš„åŠ å·¥å¤„ç†å·¥ä½œã€‚ ApplicationContextå’ŒBeanFactoryå¦ä¸€æœ€å¤§çš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼šå‰è€…ä¼šåˆ©ç”¨Javaåå°„æœºåˆ¶è‡ªåŠ¨è¯†åˆ«å‡ºé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„BeanPostProcessorã€InstantiationAwareBeanPostProcessorå’ŒBeanFactoryPostProcessorï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬æ³¨å†Œåˆ°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼›è€ŒåŽè€…éœ€è¦åœ¨ä»£ç ä¸­æ‹¿ä½ ç»™é€šè¿‡æ‰‹å·¥è°ƒç”¨addBeanPostProcessor()æ–¹æ³•è¿›è¡Œæ³¨å†Œã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨åº”ç”¨å¼€å‘å®¤ï¼Œæˆ‘ä»¬æ™®éä½¿ç”¨ApplicationContextè€Œå¾ˆå°‘ä½¿ç”¨BeanFactoryçš„åŽŸå› ä¹‹ä¸€ã€‚]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>IoC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Activitiå·¥ä½œæµä¹‹é¡¹ç›®ä¸­çš„ä½¿ç”¨]]></title>
    <url>%2F2017%2F10%2F19%2FActiviti%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%AD%A6%E4%B9%A02%2F</url>
    <content type="text"><![CDATA[Activitiå·¥ä½œæµç‰¹ç‚¹çš„å…¶ä¸­ä¹‹ä¸€å°±æ˜¯åŽŸç”Ÿæ”¯æŒSpringã€‚å‰ä¸€ç« èŠ‚æˆ‘ä»¬ä»‹ç»äº†Activitå·¥ä½œæµçš„åŸºæœ¬æ¦‚å¿µï¼Œè®©å¤§å®¶å¯¹å·¥ä½œæµçŸ¥è¯†æœ‰äº†ä¸€ä¸ªå¤§ä½“çš„å°è±¡ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬è¯´ä¸‹åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ã€‚ 1ã€Springé›†æˆé¦–å…ˆåœ¨Mavenä¸­å°†Springé›†æˆåŒ…å¼•å…¥è¿›æ¥ã€‚12345&lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;5.22.0&lt;&lt;/version&gt;&lt;/dependency&gt; å¯ä»¥æŠŠæµç¨‹å¼•æ“Žï¼ˆProcessEngineï¼‰ä½œä¸ºä¸€ä¸ªæ™®é€šçš„Springbeanè¿›è¡Œé…ç½®ã€‚ç±»org.activiti.spring.ProcessEngineFactoryBeanæ˜¯é›†æˆçš„åˆ‡å…¥ç‚¹,è¿™ä¸ªbeanéœ€è¦ä¸€ä¸ªæµç¨‹å¼•æ“Žé…ç½®æ¥åˆ›å»ºæµç¨‹å¼•æ“Žã€‚ 1234567891011121314151617&lt;!-- activiti config --&gt;&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt; &lt;property name="databaseType" value="oracle" /&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;property name="transactionManager" ref="transactionManager" /&gt; &lt;property name="databaseSchemaUpdate" value="true" /&gt;&lt;/bean&gt;&lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt; &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt;&lt;/bean&gt;&lt;bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService" /&gt;&lt;bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService" /&gt;&lt;bean id="taskService" factory-bean="processEngine" factory-method="getTaskService" /&gt;&lt;bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService" /&gt;&lt;bean id="managementService" factory-bean="processEngine" factory-method="getManagementService" /&gt;z å…¶ä¸­datasourceæ˜¯æŒ‡é¡¹ç›®ä¸­é…ç½®çš„æ•°æ®æºï¼ŒtransactionManageræ˜¯æŒ‡é¡¹ç›®ä¸­é…ç½®çš„äº‹åŠ¡ç®¡ç†å™¨é…ç½®ã€‚å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839&lt;!-- æ•°æ®æºé…ç½® --&gt;&lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt; &lt;!-- åŸºæœ¬å±žæ€§ urlã€userã€password --&gt; &lt;property name="driverClassName" value="$&#123;jdbc.driver&#125;" /&gt; &lt;property name="url" value="$&#123;jdbc.url&#125;" /&gt; &lt;property name="username" value="$&#123;jdbc.username&#125;" /&gt; &lt;property name="password" value="$&#123;jdbc.password&#125;" /&gt; &lt;!-- é…ç½®åˆå§‹åŒ–å¤§å°ã€æœ€å°ã€æœ€å¤§ --&gt; &lt;property name="initialSize" value="$&#123;jdbc.pool.initialSize&#125;" /&gt; &lt;property name="minIdle" value="$&#123;jdbc.pool.minIdle&#125;" /&gt; &lt;property name="maxActive" value="$&#123;jdbc.pool.maxActive&#125;" /&gt; &lt;!-- é…ç½®èŽ·å–è¿žæŽ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´ --&gt; &lt;property name="maxWait" value="60000" /&gt; &lt;!-- é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿žæŽ¥ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt; &lt;property name="timeBetweenEvictionRunsMillis" value="30000" /&gt; &lt;!-- é…ç½®ä¸€ä¸ªè¿žæŽ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ --&gt; &lt;property name="minEvictableIdleTimeMillis" value="300000" /&gt; &lt;property name="validationQuery" value="SELECT 'x' from dual" /&gt; &lt;property name="testWhileIdle" value="true" /&gt; &lt;property name="testOnBorrow" value="false" /&gt; &lt;property name="testOnReturn" value="false" /&gt; &lt;!-- æ‰“å¼€PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿žæŽ¥ä¸ŠPSCacheçš„å¤§å°ï¼ˆOracleä½¿ç”¨ï¼‰ --&gt; &lt;property name="poolPreparedStatements" value="true" /&gt; &lt;property name="maxPoolPreparedStatementPerConnectionSize"value="20" /&gt; &lt;!-- é…ç½®ç›‘æŽ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼ŒåŽ»æŽ‰åŽç›‘æŽ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ --&gt; &lt;property name="filters" value="stat" /&gt;&lt;/bean&gt;&lt;!-- äº‹åŠ¡ç®¡ç†å™¨é…ç½®,å•æ•°æ®æºäº‹åŠ¡ --&gt;&lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt;&lt;/bean&gt; è‡³æ­¤ï¼Œé›†æˆæˆåŠŸï¼Œåƒä½¿ç”¨ä¸€èˆ¬beanå¯¹è±¡çš„æ–¹å¼ä½¿ç”¨Activitå¯¹è±¡å³å¯ã€‚ 2ã€åŸºç¡€APIä»‹ç»é¡¹ç›®é‡Œç”¨åˆ°çš„åŸºæœ¬éƒ½æ˜¯é¡ºåºæµï¼Œæ²¡æœ‰ç”¨åˆ°ç½‘å…³ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸ä¼šä»‹ç»ç½‘å…³çš„ä¸œè¥¿ï¼Œåªä»‹ç»é¡¹ç›®ç”¨åˆ°ç›¸å…³çŸ¥è¯†ã€‚ 2.1 ä¸ƒé¡¹åŸºæœ¬æ“ä½œ è®¾è®¡æµç¨‹å›¾ï¼ˆå„ç§ç»„ä»¶ï¼Œå¦‚è¿žçº¿ã€ç”¨æˆ·ä»»åŠ¡ã€ç½‘å…³ï¼‰ æµç¨‹å®šä¹‰å¢žåˆ æ”¹æŸ¥ æµç¨‹å˜é‡å¢žåˆ æ”¹æŸ¥ å¯åŠ¨æµç¨‹å®šä¹‰ ä»»åŠ¡å¢žåˆ æ”¹æŸ¥ å®Œæˆä»»åŠ¡ åŽ†å²ä¿¡æ¯æŸ¥è¯¢ ä¸Šé¢åˆ—ä¸¾äº†Activitiä¸­ç”¨åˆ°çš„ä¸ƒé¡¹æ“ä½œç§ç±»ï¼Œæ¯ä¸€ç§æ“ä½œéƒ½æœ‰ç€å¯¹åº”çš„APIï¼Œéœ€è¦ç”¨åˆ°å“ªäº›APIè¯·æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ï¼Œæˆ–è€…Googleï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ 2.2 å¸¸ç”¨æ“ä½œ2.2.1 ä½¿ç”¨Eclipseå¼€å§‹æµç¨‹è®¾è®¡Eclipseæ’ä»¶å®‰è£…è¯·å‚ç…§Activitiå·¥ä½œæµä¹‹åŸºç¡€æ¦‚å¿µä»‹ç» é¼ æ ‡é€‰ä¸­è¦æ–°å»ºæµç¨‹å›¾çš„æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»å³é”®ï¼Œé€‰æ‹©new-&gt;others-&gt;Activiti Diagramï¼Œå³å¯æ–°å»ºä¸€ä¸ªå›¾è¡¨ã€‚è®°å¾—è¦æŠŠEclipseåˆ‡æ¢åˆ°Activitè§†å›¾ï¼Œä¸€ä¸ªç®€å•çš„æµç¨‹å›¾ç±»ä¼¼ä¸‹å›¾ï¼Œåªéœ€è¦å…³æ³¨çº¢æ¡†é‡Œçš„å…ƒä»¶å°±å¯ä»¥äº†ï¼Œå¦‚æžœå¤æ‚çš„å°±éœ€è¦ç”¨åˆ°å…¶å®ƒå…ƒä»¶äº†ï¼Œæ¯”å¦‚ç½‘å…³ã€‚å¯ä»¥è‡ªè¡Œæ‹–æ‹½è¯•è¯•ï¼Œç½‘ä¸Šè¿™éƒ¨åˆ†æ“ä½œçŸ¥è¯†å¾ˆå¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ 2.2.1 å·¥ä½œæµéƒ¨ç½²å…¶ä¸­recourceClassPathè¡¨ç¤ºå·¥ä½œæµç›¸å¯¹é¡¹ç›®classpathä¸‹çš„è·¯å¾„ï¼Œä¾‹å¦‚mavené¡¹ç›®ä¸­src/main/resourceä¸‹çš„â€bpmn/HelloWorldProcess.bpmnâ€œã€‚resourceNameè¡¨ç¤ºä½ è¦éƒ¨ç½²å·¥ä½œæµçš„åç§°ï¼Œè¿™ä¸ªåç§°ä¸€èˆ¬ç”¨æ¥è¯´æ˜Žå·¥ä½œæµçš„ä½œç”¨ï¼Œæ¯”å¦‚â€œè¯·å‡æµç¨‹â€œã€‚12345public Deployment deployProcess(String resourceClassPath, String resourceName) &#123; Deployment deployMent = repositoryService.createDeployment().name(resourceName) .addClasspathResource(resourceClassPath).deploy(); return deployMent;&#125; æ¯é‡å¤éƒ¨ç½²ä¸€æ¬¡ï¼Œact_re_deploymentè¡¨ä¸­æ–°å¢žåŠ çš„è®°å½•çš„IDå€¼éƒ½ä¼šéšä¹‹å¢žå¤§ï¼Œç›¸åº”æµç¨‹å¯åŠ¨çš„æ—¶å€™å–å¾—æ˜¯æœ€æ–°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„å€¼ã€‚å¦‚æžœæƒ³é¿å…é‡å¤éƒ¨ç½²ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼š123456public Deployment deployProcess(String resourceClassPath, String resourceName) &#123; //è¿‡æ»¤å…³é”®æ˜¯ä¸ºæµç¨‹éƒ¨ç½²èµ·ä¸€ä¸ªåå­—`fileName`ï¼Œæ²¡æœ‰åå­—ä¸ä¼šè¿‡æ»¤ Deployment deployMent = repositoryService.createDeployment().enableDuplicateFiltering().name(fileName) .name(resourceName).addClasspathResource(resourceClassPath).deploy(); return deployMent;&#125; 2.2.2 æµç¨‹å¯åŠ¨å…¶ä¸­procDefkeyè¡¨ç¤ºæµç¨‹å®šä¹‰key, businessKeyè¡¨ç¤ºä¸šåŠ¡key, processVariablesè¡¨ç¤ºæµç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„å˜é‡ã€‚123456789public ProcessInstance startProcessInstance(String procDefKey, String businessKey, Map&lt;String, Object&gt; processVariables) &#123; // æ ¹æ®æµç¨‹å®šä¹‰KEYæŸ¥è¯¢æœ€æ–°ç‰ˆæœ¬çš„æµç¨‹å®šä¹‰ ProcessDefinitionEntity procDef = (ProcessDefinitionEntity) getProcessDefinitionByKey(procDefKey); if (procDef == null) &#123; throw new RuntimeException("æµç¨‹å®šä¹‰KEYä¸º" + procDefKey + "æµç¨‹å®šä¹‰æœªæ‰¾åˆ°ï¼Œè¯·é‡æ–°å‘å¸ƒ"); &#125; return runtimeService.startProcessInstanceByKey(procDefKey, businessKey, processVariables);&#125; 2.2.3 ä»»åŠ¡å®Œæˆå…¶ä¸­taskIdè¡¨ç¤ºè¦å®Œæˆçš„ä»»åŠ¡ID,variablesè¡¨ç¤ºæµç¨‹å˜é‡123456private void commitProcess(String taskId, Map&lt;String, Object&gt; variables) &#123; if (variables == null) &#123; variables = new HashMap&lt;String, Object&gt;(); &#125; taskService.complete(taskId, variables); &#125; 2.2.4 æµç¨‹è·³è½¬è¿™é‡Œåªè¯´æ˜Žä¸»è¦ç®—æ³•ï¼Œå…¶ä¸­taskIdè¡¨ç¤ºä»»åŠ¡IDï¼ŒactivityIdè¡¨ç¤ºå¾…è·³è½¬çš„â€œæ´»åŠ¨èŠ‚ç‚¹Idâ€123456789101112131415161718private void commitProcess(String taskId, String activityId) &#123; // å½“å‰èŠ‚ç‚¹ ActivityImpl currActivity = findActivitiImpl(taskId, null); // æ¸…ç©ºå½“å‰æµå‘ List&lt;PvmTransition&gt; oriPvmTransitionList = clearTransition(currActivity); // åˆ›å»ºæ–°æµå‘ TransitionImpl newTransition = currActivity.createOutgoingTransition(); // ç›®æ ‡èŠ‚ç‚¹ ActivityImpl pointActivity = findActivitiImpl(taskId, activityId); // è®¾ç½®æ–°æµå‘çš„ç›®æ ‡èŠ‚ç‚¹ newTransition.setDestination(pointActivity); // æäº¤ä»»åŠ¡ taskService.complete(taskId, variables); // åˆ é™¤ç›®æ ‡èŠ‚ç‚¹æ–°æµå…¥ pointActivity.getIncomingTransitions().remove(newTransition); // è¿˜åŽŸä»¥å‰æµå‘ restoreTransition(currActivity, oriPvmTransitionList); &#125; 2.2.4 æµç¨‹ç»ˆæ­¢å…¶ä¸­procIdè¡¨ç¤ºæµç¨‹å®žä¾‹ID12345678public void terminateByBillCode(String procId) &#123; try &#123; // ç»ˆæ­¢æµç¨‹ runtimeService.deleteProcessInstance(procId, "åˆ é™¤åŽŸå› "); &#125; catch (Throwable e) &#123; LOG.error("ç»ˆæ­¢æµç¨‹Byä¸šåŠ¡å•å·-controller" + e.getMessage(), e); &#125;&#125; 2.2.5 å·¥ä½œæµåˆ é™¤å…¶ä¸­deploymentIdè¡¨ç¤ºå·¥ä½œæµéƒ¨ç½²IDï¼Œè¿™ä¸ªæ–¹æ³•ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨ï¼Œæ–°å·¥ä½œæµå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨é€‰æ‹©æœ€æ–°éƒ¨ç½²çš„å·¥ä½œæµã€‚å¦‚æžœå·¥ä½œæµéœ€è¦æ›´æ–°ï¼Œåªéœ€è¦é‡æ–°éƒ¨ç½²å·¥ä½œå°±å³å¯ã€‚1234567public void deleteDeployment(String deploymentId) throws Exception &#123; RepositoryService repositoryService = processEngine.getRepositoryService(); // æ™®é€šåˆ é™¤ï¼Œå¦‚æžœå½“å‰è§„åˆ™ä¸‹æœ‰æ­£åœ¨æ‰§è¡Œçš„æµç¨‹ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ //repositoryService.deleteDeployment(deploymentId); // çº§è”åˆ é™¤ï¼Œä¼šåˆ é™¤å’Œå½“å‰è§„åˆ™ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ­£åœ¨æ‰§è¡Œçš„ä¿¡æ¯ï¼Œä¹ŸåŒ…æ‹¬åŽ†å²ä¿¡æ¯ repositoryService.deleteDeployment(deploymentId,true);&#125; 2.3 é›†æˆè‡ªå·±çš„ç”¨æˆ·ç®¡ç†ç³»ç»ŸActivitiè‡ªå¸¦çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»ŸåŠŸèƒ½ä¸å¤Ÿå¼ºå¤§ï¼Œè€Œä¸€èˆ¬ä¸šåŠ¡ç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†å¹³å°ï¼Œä½ å¯ä»¥é€‰æ‹©ä»¥æŸç§æ–¹å¼æ¥åŒæ­¥ä¸¤è€…ä¹‹é—´çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨ä¸šåŠ¡ç³»ç»Ÿçš„ç”¨æˆ·ç®¡ç†å¹³å°ä½œä¸ºå·¥ä½œæµæƒé™ç®¡ç†ã€‚ä¸‹é¢è¯´ä¸‹æ€è·¯ï¼š æ–°å»ºä¸€ä¸ªä¸­é—´è¡¨æ¯”å¦‚ACT_PROC_CONFIG,å­—æ®µåŒ…æ‹¬æµç¨‹key/è§’è‰²ID/ç»„ç»‡ID/ç”¨æˆ·IDã€‚ æä¾›ä¸€ä¸ªé¡µé¢ç”¨äºŽè®¾ç½®å¯¹æ¯ä¸ªå·¥ä½œæµè¿›è¡Œè®¾ç½®ï¼Œåˆ†åˆ«å°†å„çŽ¯èŠ‚çš„ä»»åŠ¡åˆ†é…ç»™æŸä¸ªéƒ¨é—¨ä¸­çš„æŸä¸ªè§’è‰²çš„æŸäº›äººå‘˜ã€‚è¿™æ ·å°±å°†è‡ªå·±çš„ç”¨æˆ·ç®¡ç†å¹³å°å’ŒActivitiå·¥ä½œæµæœ‰æ•ˆé›†æˆèµ·æ¥äº†ã€‚ é’ˆå¯¹å·¥ä½œæµç¼–å†™ä¸šåŠ¡ä»£ç çš„æ—¶å€™ï¼Œå°†ACT_PROC_CONFIGè¡¨èžè¿›æ¥ï¼Œæ¯”å¦‚åˆ¤æ–­æŸä¸ªç”¨æˆ·æ˜¯å¦æœ‰å½“å‰ä»»åŠ¡çš„å¤„ç†æƒé™ï¼Œä¸‹ä¸€çŽ¯èŠ‚ä»»åŠ¡æœ‰å“ªäº›äººå‘˜å¯ä»¥å¤„ç†ç­‰ã€‚ 2.4 æµç¨‹å®šåˆ¶ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå·¥ä½œæµéƒ¨ç½²ä»¥åŽæµç¨‹å°±æ˜¯å›ºå®šçš„ã€‚å…·ä½“æ¯ä¸ªç”¨æˆ·ä»»åŠ¡å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦æå‰è®¾ç½®å¥½ç›¸åº”çš„éƒ¨é—¨å¤„ç†äººå‘˜ï¼Œè¿™æ ·å½“æ‰§è¡Œåˆ°æŸä¸ªç”¨æˆ·ä»»åŠ¡çš„æ—¶å€™ï¼Œè‡ªç„¶ä¼šæœ‰æ»¡è¶³æ¡ä»¶çš„äººå‘˜å¯ä»¥å¤„ç†ã€‚ä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚èµ°åˆ°æŸä¸ªç”¨æˆ·ä»»åŠ¡çš„æ—¶å€™ï¼Œè¦æ ¹æ®å½“å‰çš„å®žé™…å·¥ä½œæ¥åˆ¤æ–­åŽé¢çš„æµç¨‹è¿˜éœ€ä¸éœ€è¦èµ°ï¼Œè¿˜éœ€è¦å“ªäº›æµç¨‹å¤„ç†ï¼Œå“ªäº›æµç¨‹å¯ä»¥è·³è¿‡ï¼Œå“ªäº›æµç¨‹æˆ‘æƒ³æŒ‡å®šæŸä¸ªäººæ¥å¤„ç†ï¼Œè¿™å°±ç‰µæ‰¯åˆ°æµç¨‹å®šåˆ¶çš„é—®é¢˜ã€‚è€Œè¿™äº›åŠŸèƒ½åŸºæœ¬ä¸Šéƒ½æ˜¯éœ€è¦ç»“åˆæµç¨‹å˜é‡è‡ªå·±ç¼–ç å®žçŽ°çš„ã€‚éœ€è¦æ ¹æ®å®žé™…çš„ä¸šåŠ¡è‡ªè¡Œè®¾è®¡ï¼Œä¸»è¦å°±æ˜¯ç”¨åˆ°äº†æµç¨‹å˜é‡å’Œæµç¨‹è·³è½¬åŠŸèƒ½ï¼Œä¸šåŠ¡ä¸åŒè®¾è®¡ä¹Ÿä¸åŒï¼Œè¿™é‡Œä¹Ÿä¸å†è®²è¿°ï¼Œåªæ˜¯è¯´æ˜Žä¸€ç§åº”ç”¨åœºæ™¯ã€‚ 2.5ã€èµ„æºçš„è‡ªåŠ¨éƒ¨ç½²Springçš„é›†æˆä¹Ÿæœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºŽå¯¹èµ„æºéƒ¨ç½²çš„ç‰¹æ€§ã€‚åœ¨æµç¨‹å¼•æ“Žçš„é…ç½®ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ç»„èµ„æºã€‚å½“æµç¨‹å¼•æ“Žè¢«åˆ›å»ºçš„æ—¶å€™ï¼Œ æ‰€æœ‰åœ¨è¿™é‡Œçš„èµ„æºéƒ½å°†ä¼šè¢«è‡ªåŠ¨æ‰«æä¸Žéƒ¨ç½²ã€‚åœ¨è¿™é‡Œæœ‰è¿‡æ»¤ä»¥é˜²æ­¢èµ„æºé‡æ–°éƒ¨ç½²ï¼Œåªæœ‰å½“è¿™ä¸ªèµ„æºçœŸæ­£å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå‘Activitiä½¿ç”¨çš„æ•°æ®åº“åˆ›å»ºæ–°çš„éƒ¨ç½²ã€‚ è¿™å¯¹äºŽå¾ˆå¤šç”¨ä¾‹æ¥è¯´ï¼Œå½“Springå®¹å™¨ç»å¸¸é‡å¯çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ æµ‹è¯•ï¼‰ï¼Œä½¿ç”¨å®ƒæ˜¯éžå¸¸ä¸é”™çš„é€‰æ‹©ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š12345678&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt; ... &lt;property name="deploymentResources" value="classpath*:/activiti/*.bpmn" /&gt;&lt;/bean&gt;&lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt; &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt;&lt;/bean&gt; é»˜è®¤ï¼Œä¸Šé¢çš„é…ç½®ä¼šæŠŠæ‰€æœ‰åŒ¹é…çš„èµ„Activitiå¼•æ“Žçš„ä¸€ä¸ªå•ç‹¬å‘å¸ƒåŒ…ä¸‹ã€‚ç”¨æ¥æ£€æµ‹é˜²æ­¢æœªä¿®æ”¹èµ„æºé‡å¤å‘å¸ƒçš„æœºåˆ¶ä¼šä½œç”¨åˆ°æ•´ä¸ªå‘å¸ƒåŒ…ä¸­ã€‚ æœ‰æ—¶å€™ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚æ¯”å¦‚ï¼Œå¦‚æžœä½ å‘å¸ƒäº†å¾ˆå¤šæµç¨‹èµ„æºï¼Œä½†æ˜¯åªä¿®æ”¹é‡Œå…¶ä¸­æŸä¸€ä¸ªå•ç‹¬çš„æµç¨‹å®šä¹‰ï¼Œ æ•´ä¸ªå‘å¸ƒåŒ…éƒ½ä¼šè¢«è®¤ä¸ºå˜æ›´äº†ï¼Œå¯¼è‡´æ•´ä¸ªå‘å¸ƒåŒ…ä¸‹çš„æ‰€æœ‰æµç¨‹å®šä¹‰éƒ½ä¼šè¢«é‡æ–°å‘å¸ƒï¼Œ ç»“æžœå°±æ˜¯æ¯ä¸ªæµç¨‹å®šä¹‰éƒ½ç”Ÿæˆäº†æ–°ç‰ˆæœ¬ï¼Œè™½ç„¶å…¶ä¸­åªæœ‰ä¸€ä¸ªæµç¨‹å‘ç”Ÿäº†æ”¹å˜ã€‚ ä¸ºäº†å®šåˆ¶å‘å¸ƒæ–¹å¼ï¼Œä½ å¯ä»¥ä¸ºSpringProcessEngineConfigurationæŒ‡å®šä¸€ä¸ªé¢å¤–çš„å‚æ•°deploymentModeã€‚ è¿™ä¸ªå‚æ•°æŒ‡å®šäº†åŒ¹é…å¤šä¸ªèµ„æºæ—¶çš„å‘å¸ƒå¤„ç†æ–¹å¼ã€‚é»˜è®¤ä¸‹è¿™ä¸ªå‚æ•°æ”¯æŒè®¾ç½®ä¸‰ä¸ªå€¼ï¼š default: æŠŠæ‰€æœ‰èµ„æºæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„å‘å¸ƒåŒ…ä¸­ï¼Œå¯¹è¿™ä¸ªå‘å¸ƒåŒ…è¿›è¡Œé‡å¤æ£€æµ‹ã€‚ è¿™æ˜¯é»˜è®¤å€¼ï¼Œå¦‚æžœä½ æ²¡æœ‰æŒ‡å®šå‚æ•°å€¼ï¼Œå°±ä¼šä½¿ç”¨å®ƒã€‚ single-resource: ä¸ºæ¯ä¸ªå•ç‹¬çš„èµ„æºåˆ›å»ºä¸€ä¸ªå‘å¸ƒåŒ…ï¼Œå¹¶å¯¹è¿™äº›å‘å¸ƒåŒ…è¿›è¡Œé‡å¤æ£€æµ‹ã€‚ ä½ å¯ä»¥å•ç‹¬å‘å¸ƒæ¯ä¸ªæµç¨‹å®šä¹‰ï¼Œå¹¶åœ¨ä¿®æ”¹æµç¨‹å®šä¹‰åŽåªåˆ›å»ºä¸€ä¸ªæ–°çš„æµç¨‹å®šä¹‰ç‰ˆæœ¬ã€‚ resource-parent-folder: æŠŠæ”¾åœ¨åŒä¸€ä¸ªä¸Šçº§ç›®å½•ä¸‹çš„èµ„æºå‘å¸ƒåœ¨ä¸€ä¸ªå•ç‹¬çš„å‘å¸ƒåŒ…ä¸­ï¼Œå¹¶å¯¹å‘å¸ƒåŒ…è¿›è¡Œé‡å¤æ£€æµ‹ã€‚ å½“éœ€è¦å¤šèµ„æºéœ€è¦åˆ›å»ºå‘å¸ƒåŒ…ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å…±åŒçš„æ–‡ä»¶å¤¹æ¥ç»„åˆä¸€äº›èµ„æºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å®ƒã€‚ 12345&lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt; ... &lt;property name="deploymentResources" value="classpath*:/activiti/*.bpmn" /&gt; &lt;property name="deploymentMode" value="single-resource" /&gt;&lt;/bean&gt; é¡¹ç›®ä¸­è™½ç„¶æ²¡ç”¨åˆ°å·¥ä½œæµçš„ç½‘å…³ç­‰åŠŸèƒ½ï¼Œä½†æ˜¯å› ä¸ºé¡¹ç›®ä¸­çš„æµç¨‹å®šåˆ¶ä¸šåŠ¡è¾ƒå¤šï¼ŒåŠ ä¸Šå®žé™…ä½¿ç”¨åœºæ™¯è¦è€ƒè™‘å¾ˆå¤šé—®é¢˜ï¼Œå®žé™…ä½¿ç”¨æ—¶è¿˜æ˜¯è›®å¤æ‚çš„ã€‚è¿™è¿˜éœ€è¦åœ¨å®žé™…é¡¹ç›®ä¸­åŽ†ç»ƒï¼Œæ‰èƒ½æ›´åŠ æ¸…æ™°æŽŒæ¡å·¥ä½œæµçš„ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æžœåªæ˜¯æƒ³è¦ç®€å•çš„å…¥é—¨ï¼Œæ‰¾å‡ ä¸ªä¾‹å­å­¦ä¹ ä¸‹å°±å¯ä»¥äº†ã€‚]]></content>
      <categories>
        <category>Activitiå·¥ä½œæµ</category>
      </categories>
      <tags>
        <tag>Activiti</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Activitiå·¥ä½œæµä¹‹åŸºç¡€æ¦‚å¿µä»‹ç»]]></title>
    <url>%2F2017%2F10%2F13%2FActiviti%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%AD%A6%E4%B9%A01%2F</url>
    <content type="text"><![CDATA[è‡ªæˆ‘é©±åŠ¨åŠ›çš„æ¥æºæ˜¯åˆšéœ€ã€‚ å‰æ®µæ—¶é—´ä»Žå¦å¤–ä¸€ä¸ªå›¢é˜Ÿæ‰‹é‡ŒæŽ¥è¿‡æ¥ä¸€ä¸ªåŠæˆå“é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªå·¥ä½œæµç³»ç»Ÿã€‚åŠæˆå“å°±ç®—äº†ï¼Œè¿˜è¦å¿«é€Ÿå®Œæˆå·¥ä½œä»»åŠ¡ï¼Œè¯´å¤šäº†éƒ½æ˜¯æ³ªï¼Œç®—æ˜¯æŽ¥äº†ä¸€ä¸ªå¤§é”…ã€‚ä¸ºäº†å¿«é€Ÿä¸Šæ‰‹Activitiå·¥ä½œæµçš„ä½¿ç”¨ï¼ŒåŸºæœ¬ä¸Šæ˜¯è¾¹å­¦ä¹ å˜å®žè·µï¼Œå› æ­¤æ•´ä¸ªé¡¹ç›®åšä¸‹æ¥å¯¹å·¥ä½œæµçŸ¥è¯†ä¾ç„¶å¤„äºŽæ¯”è¾ƒæ•£ä¹±çš„é˜¶æ®µï¼Œè¶ç€é¡¹ç›®æš‚æ—¶å‘Šä¸€æ®µè½æŠŠçŸ¥è¯†æ¢³ç†ä¸‹ã€‚è¨€å½’æ­£ä¼ ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ï¼š 1ã€åŸºæœ¬æ¦‚å¿µ å·¥ä½œæµï¼šä¸šåŠ¡è¿‡ç¨‹çš„éƒ¨åˆ†æˆ–æ•´ä½“åœ¨è®¡ç®—æœºåº”ç”¨çŽ¯å¢ƒä¸‹çš„è‡ªåŠ¨åŒ– å·¥ä½œæµç®¡ç†ç³»ç»Ÿï¼šå·¥ä½œæµçš„å®šä¹‰å’Œç®¡ç†ï¼ŒæŒ‰ç…§åœ¨ç³»ç»Ÿä¸­é¢„å®šä¹‰å¥½çš„å·¥ä½œæµè§„åˆ™è¿›è¡Œå·¥ä½œæµå®žä¾‹çš„æ‰§è¡Œã€‚ å·¥ä½œæµç®¡ç†ç³»ç»Ÿçš„ç›®æ ‡ï¼šç®¡ç†å·¥ä½œæµç¨‹ä»¥ç¡®ä¿å·¥ä½œåœ¨æ­£ç¡®çš„æ—¶é—´è¢«æœŸæœ›çš„äººå‘˜æ‰§è¡Œâ€“åœ¨è‡ªåŠ¨åŒ–è¿›è¡Œçš„ä¸šåŠ¡è¿‡ç¨‹ä¸­æ’å…¥äººå·¥çš„æ‰§è¡Œå’Œå¹²é¢„ã€‚ Activiyæ˜¯ä»€ä¹ˆ Activitiæ˜¯ä¸€ä¸ªé’ˆå¯¹ä¼ä¸šç”¨æˆ·ã€å¼€å‘äººå‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜çš„è½»é‡çº§å·¥ä½œæµä¸šåŠ¡ç®¡ç†å¹³å°ï¼Œå…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨Javaå¼€å‘çš„å¿«é€Ÿã€ç¨³å®šçš„BPMN2.0æµç¨‹å¼•æ“Žã€‚ Activitiçš„ç‰¹ç‚¹ æ•°æ®æŒä¹…åŒ–ï¼Œåº•å±‚ä½¿ç”¨MyBatis å¼•æ“ŽServiceæŽ¥å£ æµç¨‹è®¾è®¡å™¨ åŽŸç”Ÿæ”¯æŒSpring åˆ†ç¦»è¿è¡Œæ—¶ä¸ŽåŽ†å²æ•°æ® 2ã€æ ¸å¿ƒè¡¨ä»‹ç»2.1 ç†è§£æ•°æ®åº“è¡¨çš„å‘½åActivitiçš„è¡¨éƒ½ä»¥ACT_å¼€å¤´ã€‚ç¬¬äºŒéƒ¨åˆ†è¡¨ç¤ºè¡¨çš„ç”¨é€”çš„ä¸¤ä¸ªå­—æ¯æ ‡è¯†ã€‚ç”¨é€”ä¹Ÿå’ŒæœåŠ¡çš„APIå¯¹åº”ã€‚ ACTRE*:â€™REâ€™è¡¨ç¤ºrepositoryã€‚è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€è§„åˆ™ï¼Œç­‰ç­‰ï¼‰ ACTRU*: â€˜RUâ€™è¡¨ç¤ºrutimeã€‚è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®žä¾‹ã€ä»»åŠ¡ã€å˜é‡ã€å¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚Activitiåªåœ¨æµç¨‹å®žä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œåœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚è¿™æ ·å¯ä»¥ä¿è¯è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°ä¸”é€Ÿåº¦å¾ˆå¿«ã€‚ ACTID*â€™IDâ€™è¡¨ç¤ºidentityã€‚è¿™äº›è¡¨åŒ…å«èº«ä»½ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·ï¼Œç»„ç­‰ç­‰ã€‚ ACTHI*:â€™HIâ€™è¡¨ç¤ºhistoryã€‚è¿™äº›è¡¨åŒ…å«åŽ†å²æ•°æ®ï¼Œæ¯”å¦‚åŽ†å²æµç¨‹å®žä¾‹ã€å˜é‡ã€ä»»åŠ¡ç­‰ç­‰ã€‚ ACTGE*: é€šç”¨æ•°æ®ï¼Œç”¨äºŽä¸åŒåœºæ™¯ä¸‹ã€‚ 2.2 è¡¨ç”¨é€”ä»‹ç»é€šç”¨æ•°æ®è¡¨: ACT_GE_BYTEARRAY: å­˜å‚¨éƒ¨ç½²æµç¨‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸€ä¸ªæµç¨‹åŒ…æ‹¬ä¸€ä¸ªå·¥ä½œæµä¿¡æ¯å’Œä¸€å¼ å¯¹åº”çš„å·¥ä½œæµå›¾ç‰‡ã€‚ACT_GE_PROPERTY: å­˜å‚¨æ•´ä¸ªæµç¨‹å¼•æ“Žçº§åˆ«çš„æ•°æ®ï¼Œç”¨äºŽéƒ¨ç½²æµç¨‹æ—¶èŽ·å–æ–°çš„ç‰ˆæœ¬å·ï¼Œåˆå§‹åŒ–è¡¨ç»“æž„æ—¶ï¼Œä¼šé»˜è®¤æ’å…¥ä¸‰æ¡è®°å½• åŽ†å²æ•°æ®åº“è¡¨: ACT_HI_ACTINST: å­˜å‚¨åŽ†å²æ´»åŠ¨èŠ‚ç‚¹æ•°æ®ACT_HI_ATTACHMENT: å­˜å‚¨åŽ†å²é™„ä»¶æ•°æ®ACT_HI_COMMENT: å­˜å‚¨åŽ†å²è¯„è®ºæ•°æ®æˆ–è€…äº‹ä»¶æ•°æ®ACT_HI_DETAIL: å­˜å‚¨åŽ†å²æµç¨‹å˜é‡è¯¦æƒ…ä¿¡æ¯ACT_HI_IDENTITYLINK: å­˜å‚¨åŽ†å²æµç¨‹äººå‘˜æ“ä½œä¿¡æ¯ACT_HI_PROCINST: å­˜å‚¨åŽ†å²æµç¨‹å®žä¾‹ä¿¡æ¯ACT_HI_TASKINST: å­˜å‚¨åŽ†å²ä»»åŠ¡å®žä¾‹ä¿¡æ¯ACT_HI_VARINST: å­˜å‚¨åŽ†å²æµç¨‹å˜é‡ä¿¡æ¯ ç”¨æˆ·ç»„ç»‡è¡¨: ACT_ID_GROUP: å­˜å‚¨ç”¨æˆ·ç»„ä¿¡æ¯ACT_ID_INFO: å­˜å‚¨ç”¨æˆ·æ‰©å±•ä¿¡æ¯ACT_ID_MEMBERSHIP: å­˜å‚¨ç”¨æˆ·ä¸Žç”¨æˆ·ç»„é˜Ÿå½¢ä¿¡æ¯ACT_ID_USER: å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ å·¥ä½œæµæµç¨‹è§„åˆ™è¡¨: ACT_RE_DEPLOYMENT: å­˜å‚¨å·¥ä½œæµéƒ¨ç½²ä¿¡æ¯ï¼Œæ¯”å¦‚å·¥ä½œæµåç§°ç­‰ACT_RE_MODEL: å­˜å‚¨æµç¨‹è®¾è®¡æ¨¡åž‹ä¿¡æ¯ACT_RE_PROCDEF: å­˜å‚¨æµç¨‹å®šä¹‰æ•°æ® è¿è¡Œæ—¶æ•°æ®è¡¨: ACT_RU_EVENT_SUBSCR: å¦‚æžœæµç¨‹åˆ°è¾¾æŸä¸ªäº‹ä»¶èŠ‚ç‚¹ï¼ŒActivitiä¼šå¾€è¯¥è¡¨ä¸­åŠ å…¥äº‹ä»¶æè¿°æ•°æ®ï¼Œè¿™äº›äº‹ä»¶æè¿°æ•°æ®å°†ä¼šå†³å®šæµç¨‹äº‹ä»¶çš„è§¦å‘ã€‚ACT_RU_EXECUTION: å­˜å‚¨è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®žä¾‹ä¿¡æ¯ACT_RU_IDENTITYLINK: å­˜å‚¨è¿è¡Œæ—¶æµç¨‹äººå‘˜æ“ä½œä¿¡æ¯ï¼Œä¸»è¦å­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸Žå‚ä¸Žè€…çš„ç›¸å…³ä¿¡æ¯ACT_RU_JOB: å­˜å‚¨è¿è¡Œæ—¶å®šæ—¶ä»»åŠ¡ä¿¡æ¯ACT_RU_TASK: å­˜å‚¨è¿è¡Œæ—¶ä»»åŠ¡èŠ‚ç‚¹ä¿¡æ¯ACT_RU_VARIABLE: å­˜å‚¨è¿è¡Œæ—¶æµç¨‹å˜é‡ä¿¡æ¯ å…¶ä»–: CT_EVT_LOG: å­˜å‚¨äº‹ä»¶æ—¥å¿—ä¿¡æ¯ACT_PROCDEF_INFO: å­˜å‚¨æµç¨‹å®šä¹‰çš„åŠ¨æ€å˜æ›´ä¿¡æ¯ 3ã€æ ¸å¿ƒæ¦‚å¿µä»‹ç»3.1 æ ¸å¿ƒAPI ProcessEngine: åœ¨Activitiä¸­æœ€æ ¸å¿ƒçš„ç±» ProcessDefinition: æµç¨‹å®šä¹‰ç±»ã€‚å¯ä»¥ä»Žè¿™é‡ŒèŽ·å¾—èµ„æºæ–‡ä»¶ç­‰ã€‚ ProcessInstance: ä»£è¡¨æµç¨‹å®šä¹‰çš„æ‰§è¡Œå®žä¾‹ï¼Œä¸€ä¸ªæµç¨‹å®žä¾‹åŒ…æ‹¬äº†æ‰€æœ‰çš„è¿è¡ŒèŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¯¹è±¡æ¥äº†è§£å½“å‰æµç¨‹å®žä¾‹çš„è¿›åº¦ç­‰ä¿¡æ¯ï¼Œä¸€ä¸ªæµç¨‹å®žä¾‹å°±è¡¨ç¤ºä¸€ä¸ªæµç¨‹ä»Žåˆšå¼€å§‹åˆ°ç»“æŸçš„æœ€å¤§æµç¨‹åˆ†æ”¯ï¼Œå³ä¸€ä¸ªæµç¨‹ä¸­æµç¨‹å®žä¾‹åªæœ‰ä¸€ä¸ªã€‚ Execution: Activitiç”¨è¿™ä¸ªå¯¹è±¡åŽ»æè¿°æµç¨‹æ‰§è¡Œçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨æ²¡æœ‰å¹¶å‘çš„æ¡ä»¶ä¸‹ï¼ŒExecutionå°±æ˜¯åŒProcessInstanceã€‚æµç¨‹æŒ‰ç…§æµç¨‹å®šä¹‰çš„è§„åˆ™æ‰§è¡Œä¸€æ¬¡çš„è¿‡ç¨‹ï¼Œå°±å¯ä»¥è¡¨ç¤ºæ‰§è¡Œå¯¹è±¡Executionã€‚ ä¸€ä¸ªæµç¨‹ä¸­ï¼Œæ‰§è¡Œå¯¹è±¡å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œä½†æ˜¯æµç¨‹å®žä¾‹åªèƒ½æœ‰ä¸€ä¸ªã€‚ å½“æµç¨‹æŒ‰ç…§è§„åˆ™åªæ‰§è¡Œä¸€æ¬¡çš„æ—¶å€™ï¼Œé‚£ä¹ˆæµç¨‹å®žä¾‹å°±æ˜¯æ‰§è¡Œå¯¹è±¡ã€‚ Task: æ‰§è¡Œåˆ°æŸä»»åŠ¡çŽ¯èŠ‚æ—¶ç”Ÿæˆçš„ä»»åŠ¡ä¿¡æ¯ã€‚ ç”±äºŽæ•°æ®åº“ä¸­ä¿å­˜ç€åŽ†å²ä¿¡æ¯ä»¥åŠæ­£åœ¨è¿è¡Œçš„æµç¨‹å®žä¾‹ä¿¡æ¯ï¼Œåœ¨å®žé™…é¡¹ç›®ä¸­å¯¹å·²å®Œæˆä»»åŠ¡çš„æŸ¥çœ‹é¢‘çŽ‡è¿œä¸åŠå¯¹ä»£åŠžå’Œå¯æŽ¥ä»»åŠ¡çš„æŸ¥çœ‹ï¼Œæ‰€ä»¥åœ¨activitié‡‡ç”¨åˆ†å¼€ç®¡ç†ï¼ŒæŠŠæ­£åœ¨è¿è¡Œçš„äº¤ç»™RuntimeServiceã€TaskServiceç®¡ç†ï¼Œè€ŒåŽ†å²æ•°æ®äº¤ç»™HistoryServiceæ¥ç®¡ç†ã€‚ æµç¨‹å˜é‡: åœ¨æµç¨‹æ‰§è¡Œæˆ–è€…ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œç”¨äºŽè®¾ç½®å’ŒèŽ·å–å˜é‡ï¼Œä½¿ç”¨æµç¨‹å˜é‡åœ¨æµç¨‹ä¼ é€’çš„è¿‡ç¨‹ä¸­ä¼ é€’ä¸šåŠ¡å‚æ•°ã€‚ 3.2 ä¸ƒå¤§ServiceæŽ¥å£ RepositoryService: ä»“åº“æœåŠ¡ç±»ï¼Œç®¡ç†æµç¨‹å®šä¹‰ã€‚ç”¨äºŽç®¡ç†æµç¨‹ä»“åº“ï¼Œä¾‹å¦‚éƒ¨ç½²ã€åˆ é™¤ã€è¯»å–æµç¨‹èµ„æºã€‚æ‰€è°“çš„ä»“åº“æŒ‡æµç¨‹å®šä¹‰æ–‡æ¡£çš„ä¸¤ä¸ªæ–‡ä»¶ï¼šbpmnæ–‡ä»¶å’Œæµç¨‹å›¾ç‰‡ã€‚ IdentifyService: èº«ä»½Serviceï¼Œç”¨æˆ·ç®¡ç†å’ŒæŸ¥è¯¢ç”¨æˆ·ã€ç»„ä¹‹é—´çš„å…³ç³» RuntimeService: æµç¨‹æ‰§è¡ŒæœåŠ¡ç±»ï¼Œå¯ä»¥ä»Žè¿™ä¸ªæœåŠ¡ç±»ä¸­èŽ·å–å¾ˆå¤šå…³äºŽæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯ã€‚ TaskService: ä»»åŠ¡æœåŠ¡ç±»ï¼Œå¯ä»¥ä»Žè¿™ä¸ªç±»ä¸­èŽ·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚ FormService: è¡¨å•Servcieï¼Œç”¨äºŽè¯»å–æµç¨‹ã€ä»»åŠ¡ç›¸å…³çš„è¡¨å•æ•°æ®ã€‚ HistoryService: æŸ¥è¯¢åŽ†å²ä¿¡æ¯çš„ç±»ï¼Œåœ¨ä¸€ä¸ªæµç¨‹æ‰§è¡Œå®ŒæˆåŽï¼Œè¿™ä¸ªå¯¹è±¡ä¸ºæˆ‘ä»¬æä¾›æŸ¥è¯¢åŽ†å²ä¿¡æ¯ï¼Œä¾‹å¦‚æµç¨‹å®žä¾‹ã€ä»»åŠ¡ã€æ´»åŠ¨ã€å˜é‡ã€é™„ä»¶ã€‚ ManagementServiceå¼•æ“Žç®¡ç†Serviceï¼Œå’Œå…·ä½“ä¸šåŠ¡æ— å…³ï¼Œä¸»è¦å¯ä»¥æŸ¥è¯¢å¼•æ“Žé…ç½®ã€æ•°æ®åº“ã€ä½œä¸šç­‰ã€‚ å­¦ä¹ çŸ¥è¯†æœ€å¥½å…ˆå¯¹åŸºç¡€çš„æ¦‚å¿µæœ‰ä¸ªåˆæ­¥çš„è®¤è¯†ï¼Œè¿™æ–¹ä¾¿åœ¨åŽç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­æ›´å¥½çš„ç†è§£è¿™äº›æ¦‚å¿µã€‚åœ¨å¯¹Activitiæœ‰äº†åˆæ­¥çš„å°è±¡åŽï¼Œä¸‹é¢é€šè¿‡åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­è¿›ä¸€æ­¥ç†Ÿæ‚‰Activitiå·¥ä½œæµã€‚ 4ã€å¼€å§‹ä½¿ç”¨Activitié»˜è®¤ä½¿ç”¨è‡ªå¸¦çš„H2å†…å­˜æ•°æ®åº“ï¼Œè€Œå®žé™…ç”Ÿäº§çŽ¯å¢ƒä¸­ä½¿ç”¨Oracleæˆ–mysqlå±…å¤šï¼Œè¿™é‡Œé…ç½®ä¸ºoracleæ•°æ®åº“ã€‚ 4.1 åœ¨é¡¹ç›®é‡Œå¼•å…¥ç›¸å…³jarè¿™é‡Œå°†Springé›†æˆåŒ…ä¹Ÿå¼•å…¥è¿›æ¥äº†ï¼Œè¿™æ˜¯ç”Ÿäº§çŽ¯å¢ƒå¸¸ç”¨çš„ä½¿ç”¨æ–¹å¼ã€‚ä¸éœ€è¦çš„å¯ä»¥å°†activiti-springå¼•ç”¨åŒ…åŽ»æŽ‰ã€‚123456789101112131415&lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-engine&lt;/artifactId&gt; &lt;version&gt;5.22.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;5.22.0&lt;&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;1.7.6&lt;/version&gt;&lt;/dependency&gt; 4.2 å®‰è£…Activitiæ•°æ®åº“Activitiæ¡†æž¶æ‹¥æœ‰è‡ªåŠ¨å»ºè¡¨åŠŸèƒ½ï¼Œåœ¨åˆ›å»ºæµç¨‹å¼•æ“Žå¯¹è±¡çš„æ—¶å€™ä¼šåœ¨æ•°æ®åº“ä¸­è‡ªåŠ¨åˆ›å»ºè¡¨ã€‚ 4.2.1 ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶æµ‹è¯•ä»£ç ï¼š12345678910public void intiProcessEngine() &#123; // èŽ·å–æµç¨‹å¼•æ“Ž ProcessEngine processEngine = new StandaloneProcessEngineConfiguration() .setJdbcUrl("jdbc:oracle:thin:@172.16.58.17:1521:orcl") .setJdbcUsername("activiti") .setJdbcPassword("111111") .setJdbcDriver("oracle.jdbc.driver.OracleDriver") .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE) .buildProcessEngine(); &#125; 4.2.2 ä½¿ç”¨activiti.cfg.xmlé…ç½®æ–‡ä»¶åœ¨classpathä¸‹åˆ›å»ºactiviti.cfg.xmlé…ç½®æ–‡ä»¶ï¼ˆåç§°éšæ„ï¼Œåªè¦èƒ½è®¿é—®åˆ°å³å¯ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd"&gt; &lt;!-- é…ç½®æµç¨‹å¼•æ“Žé…ç½®å¯¹è±¡ --&gt; &lt;bean id="processEngineConfiguration" class="org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt; &lt;property name="jdbcUrl" value="jdbc:oracle:thin:@172.16.58.17:1521:orcl"/&gt; &lt;property name="jdbcDriver" value="oracle.jdbc.driver.OracleDriver" /&gt; &lt;property name="jdbcUsername" value="activiti" /&gt; &lt;property name="jdbcPassword" value="111111" /&gt; &lt;property name="databaseSchemaUpdate" value="true" /&gt; &lt;property name="jobExecutorActivate" value="false" /&gt; &lt;/bean&gt; &lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt; &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt; &lt;/bean&gt; &lt;bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService" /&gt; &lt;bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService" /&gt; &lt;bean id="taskService" factory-bean="processEngine" factory-method="getTaskService" /&gt; &lt;bean id="formService" factory-bean="processEngine" factory-method="getFormService" /&gt; &lt;bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService" /&gt; &lt;bean id="managementService" factory-bean="processEngine" factory-method="getManagementService" /&gt; &lt;bean id="identityService" factory-bean="processEngine" factory-method="getIdentityService" /&gt;&lt;/beans&gt; æµ‹è¯•ä»£ç ï¼š12345public void intiProcessEngine() &#123; // èŽ·å–æµç¨‹å¼•æ“Ž ProcessEngineConfiguration pec = ProcessEngineConfiguration.createProcessEngineConfigurationFromResource("activiti.cfg.xml"); processEngine = pec.buildProcessEngine();&#125; 4.2.3 ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶è¦æ±‚é…ç½®æ–‡ä»¶åç§°å¿…é¡»ä¸ºactiviti-context.xmlæˆ–è€…activiti.cfg.xmlå› ä¸º,å› ä¸ºé»˜è®¤çš„é…ç½®ProcessEngines.getDefaultProcessEngine();ä¼šåˆå§‹åŒ–è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å…¶ä¸­ä¸€ä¸ª. æµ‹è¯•ä»£ç ï¼š123public void intiProcessEngine() &#123; ProcessEngine processEngine =ProcessEngines.getDefaultProcessEngine();&#125; 4.3 å¼€å‘çŽ¯å¢ƒæ­å»º|Eclipseæ’ä»¶å®‰è£… é€šè¿‡ç½‘å€ï¼š[https://www.activiti.org/designer/archived/activiti-designer-5.18.0.zip] ä¸‹è½½ç¦»çº¿å®‰è£…åŒ…ã€‚ å°†ç¦»çº¿å®‰è£…åŒ…è§£åŽ‹ç¼©ï¼Œå°†åŒ…ä¸­çš„å†…å®¹æ”¾å…¥eclipseæ ¹ç›®å½•çš„dropinsæ–‡ä»¶å¤¹ä¸‹ï¼Œé‡å¯eclipseã€‚ å®‰è£…æˆåŠŸåŽï¼Œæ‰“å¼€èœå•Preferences-&gt;Activiti-&gt;Save Actionï¼Œå‹¾é€‰æµç¨‹å›¾ç‰‡çš„ç”Ÿæˆæ–¹å¼ä¸ºå½“ä¿å­˜æµç¨‹è®¾è®¡å›¾æ—¶ã€‚]]></content>
      <categories>
        <category>Activitiå·¥ä½œæµ</category>
      </categories>
      <tags>
        <tag>Activiti</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Hexoåœ¨Githubä¸Šæ­å»ºä¸ªäººBlog]]></title>
    <url>%2F2017%2F09%2F21%2F%E4%BD%BF%E7%94%A8Hexo%E5%9C%A8Github%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%2F</url>
    <content type="text"><![CDATA[äº²æ‰‹åˆ›é€ çš„ä¸œè¥¿æ€»ä¼šå¸¦ç»™è‡ªå·±æ— ä»¥è¨€è¡¨çš„å–œæ‚¦ï¼Œè€Œä¸”ä¹Ÿä¼šè®©ä½ æ›´åŠ çæƒœã€‚æƒ³çŸ¥é“è¿™ä¸ªåšå®¢æ˜¯æ€Žä¹ˆæ¥çš„å—ï¼Ÿä¸‹é¢å°±ç»™å¤§å®¶å±•ç¤ºä¸‹è¿™ä¸ªåšå®¢çš„åˆ›å»ºè¿‡ç¨‹ã€‚ åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ å¿…é¡»è¦æœ‰ä¸€ä¸ªGithubè´¦å·,å¦‚æžœè¿˜æ²¡æœ‰è¯·åŽ»å®˜ç½‘æ³¨å†ŒGithubã€‚å¦å¤–ï¼Œç¡®è®¤æœ¬åœ°å·²ç»å®‰è£…å¥½gitå’Œnpm,å¦‚æžœæ²¡æœ‰è¯·è®¿é—®Hexoå®˜ç½‘ï¼Œå®˜ç½‘ä¸Šæœ‰å¯¹Hexoå®‰è£…åŠä½¿ç”¨çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬gitå’Œnpmçš„å®‰è£…æŒ‡å¯¼ã€‚è¿™é‡Œåªä»‹ç»Blogæ­å»ºè¿‡ç¨‹ã€‚ 1.Github PagesGithub Pagesæ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥æŠŠGithub repositoryé‡Œçš„ä¸ªäººç«™ç‚¹é¡µé¢ç›´æŽ¥æ‰˜ç®¡åˆ°ä¸Šé¢ã€‚ åœ¨æµè§ˆå™¨ä¸­ç™»å½• Githubï¼Œåˆ›å»ºä¸€ä¸ªRepoï¼Œåç§°æ ¼å¼ä¸ºyourname.github.ioï¼ˆæ³¨æ„å¿…é¡»è¦ä»¥github.ioç»“å°¾ï¼‰ 2.å®‰è£…Hexoå†ç¡®è®¤æœ¬åœ°å®‰è£…äº†gitå’ŒnpmåŽï¼ŒTerminalé‡Œè¾“å…¥ï¼š12npm install -g hexonpm install -g hexo-cli 3.åˆå§‹åŒ–æœ¬åœ°ç«™ç‚¹123hexo init &lt;folder&gt;cd &lt;folder&gt;npm instll &lt;folder&gt;æ˜¯ä½ å»ºç«‹çš„æ–‡ä»¶å¤¹åç§°ï¼Œæˆ‘è¿™é‡Œæ˜¯zqhao.github.io ç»§ç»­åœ¨Terminalé‡Œæ‰§è¡Œ12hexo generatehexo server hexo server å¼€å¯æœ¬åœ°æœåŠ¡ï¼Œæµè§ˆå™¨ä¸­æ•²å…¥http://localhost:4000/ çœ‹çœ‹ç½‘ç«™åˆå§‹çš„æ ·å­ã€‚ 4.å…³è”GithubTerminal cdåˆ°&lt;folder&gt;ä¸‹ï¼Œä½¿ç”¨vimå‘½ä»¤æ‰“å¼€_config.ymlï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„Atomç¼–è¾‘å™¨ã€‚æ‰¾åˆ°deployé‚£ä¸€éƒ¨åˆ†ï¼Œæ”¹æˆï¼š123deployï¼š type: git repo: https://github.com/yourname/yourname.github.io.git å…¶ä¸­ï¼šyournameï¼Œæ”¹æˆä½ çš„Githubç”¨æˆ·åï¼Œrepoå¯¹åº”çš„åœ°å€åœ¨ç¬¬1æ­¥å»ºä»“åº“çš„åœ°æ–¹èŽ·å–ã€‚ æ³¨æ„ï¼šåœ¨é…ç½®æ‰€æœ‰çš„_config.ymlæ–‡ä»¶æ—¶ï¼Œåœ¨æ‰€æœ‰çš„å†’å·:åŽè¾¹éƒ½è¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™æ‰§è¡Œhexoå‘½ä»¤ä¼šæŠ¥é”™ 5.éƒ¨ç½²åˆ°Githubä¸Š12hexo generatehexo deploy å¦‚è¿‡ä¹‹å‰æœªå…³è”è¿‡Githubï¼Œæ‰§è¡Œhexo deployçš„æ—¶å€™ä¼šæç¤ºä½ è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰§è¡ŒæˆåŠŸåŽï¼Œæµè§ˆå™¨ä¸­æ•²æ‰“åœ°å€http://yourname.github.ioï¼Œ yournameæ˜¯ä½ è‡ªå·±çš„Githubç”¨æˆ·åã€‚ 6.ä½¿ç”¨Markdownä¹¦å†™æ–‡ç« å¹¶å‘å¸ƒ Markdownæ˜¯ä¸€ç§ç®€åŒ–ç‰ˆçš„æ–‡å­—æ ‡è®°æ–¹å¼ï¼Œè¢«è®¾è®¡ç”¨æ¥ä½œä¸ºä¸€ç§ç½‘ç»œå†…å®¹çš„å†™ä½œç”¨è¯­è¨€ã€‚ä½ çš„yourname.github.ioç«™ç‚¹ä¸Šçš„æ–‡ç« ï¼Œå°±éœ€è¦ç”¨è¿™ç§è¯­è¨€ã€‚ Terminalé‡Œcdåˆ°&lt;folder&gt;ä¸‹æ‰§è¡Œï¼š 1hexo new &quot;filename&quot; åä¸ºfilename.mdçš„æ–‡ä»¶ä¼šå»ºåœ¨ç›®å½•&lt;forder&gt;/soruce/_postsä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æŽ¥ç”¨ç¼–è¾‘å™¨åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ç›´æŽ¥æ–°å»ºæ–‡ä»¶ï¼Œæ¯”å¦‚Atomã€‚ Terminalé‡Œæ‰§è¡Œï¼š 12hexo ghexo d ä»¥åŽä½ æƒ³å‘è¡¨åšå®¢æ–‡ç« çš„æ—¶å€™ï¼Œæ— éžå°±æ˜¯åœ¨_postsç›®å½•ä¸­åˆ›å»ºæ–°çš„ .md æ–‡ä»¶ï¼Œè€ŒåŽ hexo generateï¼Œä¹‹åŽå† hexo deploy. Markdownè¯­æ³•å¾ˆå°‘ï¼Œå®˜ç½‘çš„æ•™ç¨‹é€šä¿—æ˜“æ‡‚ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†ï¼Œè¯·ç›´æŽ¥è¿›å…¥å®˜ç½‘å­¦ä¹ Markdown ï¼Œå°¤å…¶æ˜¯Github Flavored Markdownã€‚ è‡³æ­¤ç½‘ç«™åˆæ­¥æ­å»ºæˆåŠŸï¼Œä½†æ˜¯æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œç½‘ç«™å¾ˆç®€çº¦ï¼Œä½¿ç”¨ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè€Œä¸”ç½‘ç«™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä¸‹é¢æˆ‘ä»¬å¯¹ç½‘ç«™åšäº›å®šåˆ¶ï¼Œä»¥ä¾¿è®©å®ƒå¥½çœ‹äº›ã€‚å½“ç„¶ï¼Œè¿™äº›å·¥ä½œå¯ä»¥é—²æš‡æ—¶é—´æ…¢æ…¢æžï¼Œæ…¢æ…¢æ¥ï¼Œè€å¿ƒä¸€ç‚¹ã€‚ 7.æ·»åŠ ssh keyåˆ°Github7.1 ç”Ÿæˆssh keyTerminalæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç”Ÿæˆrsa key pair,æ³¨æ„â€œâ€ä¸­çš„åœ°å€æ¢æˆä½ è‡ªå·±çš„ï¼Œæ˜¯æ³¨å†ŒGtihupçš„é‚®ç®±åœ°å€ã€‚ $ ssh-keygen -t rsa -C â€œhzqiangmac@gmail.comâ€ æ‰§è¡Œå®ŒåŽä¼šåœ¨è·¯å¾„~/.sshä¸‹ç”Ÿæˆid_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ã€‚ 7.2 å°†ssh keyæ·»åŠ åˆ°Githubä¸­æ‰“å¼€~/.ssh/id_rsa.pubæ–‡ä»¶ï¼Œé‡Œé¢çš„ä¿¡æ¯å³ä¸ºSSH key,å°†ä¿¡æ¯å…¨éƒ¨å¤åˆ¶ï¼Œç²˜è´´åˆ°Githubçš„Add SSH keyé¡µé¢ã€‚1Github--&gt;Settings--&gt;SSH and GPG keys--&gt;New SSH key Titleæ ‡é¢˜éšä¾¿èµ·ä¸ªåå­—ï¼Œæˆ‘çš„åå­—å°±æ˜¯ç½‘ç«™çš„åå­—zqhao.github.io,å°†ä¸Šé¢å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°keyé‡Œï¼Œä¿å­˜å³å¯ã€‚ 8.ç»‘å®šä¸ªäººåŸŸåæ­¤åšå®¢ç›®å‰ä½¿ç”¨çš„åŸŸåæ˜¯Githubæä¾›çš„äºŒçº§åŸŸåï¼Œä½ ä¹Ÿå¯ä»¥ç»‘å®šä¸ºè‡ªå·±çš„ä¸ªæ€§åŸŸåã€‚æˆ‘æ˜¯åœ¨é˜¿é‡Œä¸‡ç½‘è´­ä¹°çš„åŸŸåï¼Œå¹¶ä¸”å¯ç›´æŽ¥åœ¨å…¶ç½‘ç«™ä¸ŠåšåŸŸåè§£æžã€‚åšè¿‡ä½ ä¼šå‘çŽ°ï¼Œå¾ˆå¤šäº‹æƒ…å¹¶æ²¡æœ‰ä½ æƒ³è±¡çš„é‚£ä¹ˆå¤æ‚ï¼Œå¦‚æžœä½ æ²¡æœ‰å°è¯•è¿‡è¿™ä»¶äº‹ï¼Œé¼“åŠ±ä½ è¯•ç€åšä¸€ä¸‹ã€‚åŸŸåè´­ä¹°æˆåŠŸåŽï¼Œéœ€è¦å®žåè®¤è¯ï¼Œå›½å®¶è¦æ±‚å¿…é¡»è¦å®žåè®¤è¯ã€‚ 8.1æ·»åŠ CNAMEæ–‡ä»¶åœ¨åšå®¢æ ¹ç›®å½•ä¸‹&lt;forder&gt;/sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºCNAMEæ–‡ä»¶ï¼Œæ³¨æ„æ²¡æœ‰åŽç¼€ï¼Œåœ¨é‡Œé¢æ·»åŠ ä½ è´­ä¹°çš„åŸŸåä¿¡æ¯ï¼Œä¿å­˜ã€‚Terminalé‡Œcdåˆ°&lt;forder&gt;ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œé‡æ–°éƒ¨ç½²ç½‘ç«™ï¼Œä»¥åŽæ¯æ¬¡å‘å¸ƒç½‘ç«™éƒ½éœ€è¦æ‰§è¡Œä¸€éè¯¥å‘½ä»¤ï¼š12hexo ghexo d å¦‚æžœéœ€è¦æ¸…ç©ºæœ¬åœ°ç¼“å­˜ï¼Œæ‰§è¡Œhexo clean,è¿™é‡Œä½¿ç”¨çš„hexo gå’Œhexo dæ˜¯ç¬¬5éƒ¨ä¸¤ä¸ªå‘½ä»¤çš„ç¼©å†™å½¢å¼ã€‚ 8.2ç»™Githubé¡¹ç›®æ·»åŠ åœ¨é¡¹ç›®çš„Settingsä¸­ï¼Œåœ¨Custom domainä¸­æ·»åŠ è‡ªå·±çš„åŸŸåï¼š 8.3åŸŸåè§£æžç™»å½•ä¸‡ç½‘ï¼Œåœ¨ä½ è´­ä¹°çš„åŸŸååŽè¾¹ç‚¹å‡»ï¼šè§£æž â€“&gt; æ·»åŠ è§£æž123è®°å½•ç±»åž‹ï¼šCNAMEä¸»æœºè®°å½•ï¼šå¡«å†™@æˆ–è€…ä¸å¡«å†™è®°å½•å€¼ï¼šyourname.github.io. (ä¸è¦å¿˜è®°æœ€åŽçš„`.`) ä¿å­˜ä¹‹åŽï¼Œå¯èƒ½éœ€è¦ç­‰ä¸€æ®µæ—¶é—´æ‰èƒ½ç”Ÿæ•ˆ,æµè§ˆå™¨ä¸­æ•²å…¥ä½ è´­ä¹°çš„åŸŸå,okï¼ç»“æŸã€‚ 9.å®‰è£…ä¸»é¢˜themeHexoå®˜ç½‘ä¸»é¢˜é‡Œæœ‰å¾ˆå¤šä¸»é¢˜ï¼ŒåŽ»ä¸Šé¢æ‰¾åˆ°è‡ªå·±å–œæ¬¢çš„themeã€‚æˆ‘åœ¨æ­å»ºè¿™ä¸ªåšå®¢çš„æ—¶å€™ï¼Œç½‘ä¸Šæ‰¾çš„æ˜¯hexo-theme-nextï¼Œå®‰è£…æ­¥éª¤å¾ˆç®€å•ï¼Œç›´æŽ¥åŽ»å®˜ç½‘ä¸Šçœ‹å§ï¼Œå› ä¸ºä½ è¿˜éœ€è¦å®šåˆ¶å¾ˆå¤šä¸œè¥¿ï¼Œæ‰€ä»¥å°½æƒ…DIYå§ï¼ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç®—æ˜¯å¤§åŠŸå‘Šæˆäº†ï¼ŒåŽé¢è¦æŠŠç²¾åŠ›æ”¾åœ¨ä½¿ç”¨Markdownå†™ä½œä¸Šé¢ï¼Œå¤šå†™å†™æœ‰ç”¨çš„ä¸œè¥¿æ”¾åœ¨ä¸Šé¢ï¼Œè¿™æ ·ä½ çš„è¿™ä¸ªç½‘ç«™æ‰æ˜¯æœ‰ä»·å€¼çš„ï¼Œå¦‚æžœæ²¡æœ‰ä»€ä¹ˆå¥½çš„ç¼–è¾‘å™¨ï¼Œè¿™é‡ŒæŽ¨èAtomç¼–è¾‘å™¨ï¼Œåˆ«é—®æˆ‘é—®ä»€ä¹ˆæŽ¨èè¿™ä¸ªï¼Œç”¨ç”¨ä½ å°±çŸ¥é“äº†ï¼Œæœ€é‡è¦çš„æ˜¯é€‚åˆè‡ªå·±ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä¸ŽGithub]]></title>
    <url>%2F2017%2F09%2F19%2FGit%E4%B8%8EGithub%2F</url>
    <content type="text"><![CDATA[å¤§å­¦çš„æ—¶å€™å°±å¬è¯´è¿‡Github,çŸ¥é“å¾ˆå¤šç¨‹åºå‘˜éƒ½åœ¨ä½¿ç”¨Githubï¼Œæ›´æ˜¯æœ‰å¾ˆå¤šå¤§ç¥žåœ¨ä¸Šé¢ï¼Œä¸èƒ½è¯´ä½¿ç”¨Githubçš„æ‰æ˜¯ä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å¯ä»¥æ˜Žç¡®çš„æ˜¯ï¼Œgithubæ˜¯ç¨‹åºå‘˜ä¸–ç•Œçš„ç¤¾äº¤å¹³å°ï¼Œå¤§å®¶ç”¨å½¼æ­¤çš„è¯­è¨€é«˜æ•ˆäº¤æµï¼Œè¿™æ˜¯ä¸€ç§ç”Ÿæ´»æ–¹å¼ï¼Œè€Œæƒ³è¦æˆä¸ºæŸä¸ªé¢†åŸŸçš„é«˜æ‰‹ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯æŒ‰ç…§é«˜æ‰‹çš„æ–¹å¼åŽ»ç”Ÿæ´»ï¼Œåœ¨ä»–ä»¬çš„èšé›†åœ°ç”Ÿæ´»ã€‚ ä¸€ç›´ä»¥æ¥éƒ½æ²¡æ€Žä¹ˆå¥½å¥½è®¤çœŸåšè¿‡ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥çš„ä¸¤å¹´é‡Œï¼Œæˆ‘æƒ³æŠŠæ‰€æœ‰è‡ªå·±æœªæ›¾åšè¿‡çš„ï¼Œå¯¹è‡ªå·±æˆé•¿æœ‰å¸®åŠ©çš„äº‹æƒ…åšä¸€éï¼Œä¸ºäº†æ‰¾å›žé‚£ä¸¢å¤±å·²ä¹…çš„è‡ªä¿¡ï¼Œä¹Ÿä¸ºäº†ç»™è‡ªå·±ä¸€ä¸ªäº¤ä»£ã€‚å¥½äº†ï¼Œè¨€å½’æ­£ä¼ ã€‚ 1.åŸºç¡€æ¦‚å¿µä»€ä¹ˆæ˜¯Git Gitæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼Œè¢«è®¾è®¡ç”¨äºŽå¿«é€Ÿå’Œé«˜æ•ˆå¤„ç†ä»»ä½•é¡¹ç›®ã€‚Gitå¾ˆå®¹æ˜“å­¦ä¹ ä¸”æœ‰ç€é—ªç”µèˆ¬çš„æ€§èƒ½ã€‚ ä»€ä¹ˆæ˜¯Github Githubæ˜¯ä¸€ä¸ªåŸºäºŽwebçš„Gitç‰ˆæœ¬æŽ§åˆ¶ä»“åº“å’ŒInternetæ‰˜ç®¡æœåŠ¡ï¼Œä¸»è¦ç”¨äºŽä»£ç ã€‚å®ƒæä¾›äº†Gitæ‰€æœ‰çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶å’Œæºä»£ç ç®¡ç†ï¼ˆåŠŸèƒ½ï¼‰ï¼Œå¹¶æ·»åŠ äº†è‡ªå·±çš„ç‰¹æ€§ã€‚å®ƒä¸ºæ¯ä¸ªé¡¹ç›®æä¾›äº†è®¿é—®æŽ§åˆ¶å’Œä¸€äº›åä½œç‰¹æ€§ï¼Œä¾‹å¦‚bugè·Ÿè¸ªã€ç‰¹æ€§è¯·æ±‚ã€ä»»åŠ¡ç®¡ç†ç­‰ã€‚ 2.åŸºæœ¬ç”¨æ³•äº†è§£äº†è¦å­¦ä¹ çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆåŽï¼Œé‚£ä¹ˆä¸‹é¢å°±å¼€å§‹å­¦ä¹ åŸºæœ¬çš„ç”¨æ³•ï¼š Gitåœ¨å®˜ç½‘ä¸Šæœ‰ä¸€ä¸ªç‰¹åˆ«å¥½çš„å…¥é—¨æ•™ç¨‹ï¼Œå¤§å®¶å¯ä»¥è®¿é—®ç½‘ç«™ä¸Šå­¦ä¹ ï¼Œ30åˆ†é’Ÿè¶³å¤Ÿå…¥é—¨ï¼Œè¿™æ˜¯è¦ç”¨ä¸€è¾ˆå­çš„äº‹æƒ…ã€‚å€¼å¾—èŠ±æ—¶é—´å¥½å¥½å­¦ä¹ ä¸‹ï¼šhttps://try.github.io/levels/1/challenges/1 ã€‚åœ¨æ­¤ä¸å†å¤šè¯´ï¼Œè‹±æ–‡ä»‹ç»ä¸éš¾ç†è§£ï¼Œéœ€è¦çš„è¯å€ŸåŠ©è¾žå…¸ã€‚ä¸‹é¢åªå¯¹ä¸€äº›åŸºç¡€æ¦‚å¿µåšäº›è§£é‡Šï¼š staged: è¡¨ç¤ºæ–‡ä»¶å¤„äºŽå·²æš‚å­˜çš„å¯ä»¥æäº¤çš„çŠ¶æ€ã€‚ unstaged:è¡¨ç¤ºæ–‡ä»¶çš„æ”¹å˜è¿˜æœªæš‚å­˜ï¼Œå½“å‰çŠ¶æ€ä¸‹ä¸å¯ä»¥æäº¤ã€‚ untracked: æ–‡ä»¶ä¸åœ¨Gitçš„ç®¡ç†ä¸­ï¼Œè¿™é€šå¸¸ä»£è¡¨æ­¤æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚ deleted: æ–‡ä»¶åœ¨æœ¬åœ°å·²ç»åˆ é™¤æ­£ç­‰å¾…ä»ŽGitä¸Šåˆ é™¤ã€‚ Staging Area: å¯ä»¥ç†è§£ä¸ºå­˜æ”¾æ–‡ä»¶çš„åœ°æ–¹ï¼ˆæäº¤ç»™Gitä»“åº“ä¹‹å‰ï¼‰ã€‚ Commit: â€œcommitâ€å‘½ä»¤å¯ä»¥è§†ä½œä»“åº“çš„å¿«ç…§ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ›¾ç»åšè¿‡å¯¹æ–‡ä»¶çš„æ‰€æœ‰æ”¹å˜ï¼Œä¸ç®¡æ˜¯è‡ªå·±è¿˜æ˜¯åˆ«äººæ“ä½œçš„ï¼Œå®ƒå°±åƒä¸€ä¸ªæ—¶é—´çº¿ä¸€æ ·ï¼Œè®°å½•äº†æ‰€æœ‰çš„æ”¹å˜ã€‚ git remote: å°†æœ¬åœ°ä»“åº“ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ï¼ŒçœŸæ­£å®žçŽ°äº’è”ç½‘åä½œã€‚ git stash: éšè—ä½ è‡ªå·±çš„æ›´æ”¹ï¼Œgit stash applyåº”ç”¨ä½ çš„æ›´æ”¹ï¼Œä¸€èˆ¬ç”¨äºŽæ‹‰å–åˆ«äººpushçš„ä»£ç çš„æ—¶å€™ã€‚ å½“ç„¶ä¸€æ¬¡å­¦ä¹ ä¸å¯èƒ½ç«‹é©¬å°±èƒ½è®°ä½è¿™äº›å‘½ä»¤ï¼Œå¾ˆå¯èƒ½ç¬¬ä¸€æ¬¡æ­£ç¡®ç†è§£è¿™äº›æ¦‚å¿µéƒ½å¾ˆéš¾ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬ç»§ç»­å‘å‰ï¼Œåœ¨ä»¥åŽä¸æ–­çš„å®žè·µçš„è¿‡ç¨‹ä¸­ä½ ä¼šæ…¢æ…¢ç†è§£è¿™äº›æ¦‚å¿µçš„ã€‚ Githubå®˜ç½‘ä¸Šä¹Ÿæœ‰ä¸ªå…¥é—¨çš„æ•™ç¨‹Hello worldï¼Œå¥½çš„å·¥å…·éƒ½æ˜¯åŠŸèƒ½å¼ºå¤§ã€ç®€å•æ˜“å­¦çš„ï¼Œæ‰€ä»¥è¯·ç»§ç»­å®žè·µï¼Œè¿™æ¬¡15é’Ÿå·¦å³ã€‚ã€‚https://guides.github.com/activities/hello-world/ã€‚ åŒæ ·ä¸‹é¢åªä»‹ç»æ¦‚å¿µï¼š å­¦ä¹ ä¸€æ ·çŸ¥è¯†æˆ–æŠ€èƒ½ï¼Œé¦–å…ˆå°±è¦æŽŒæ¡å¸¸ç”¨çš„æ¦‚å¿µï¼Œåˆšå¼€å§‹çœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œéšç€å­¦ä¹ çš„ç»§ç»­æ·±å…¥ï¼Œåå¤å›žè¿‡å¤´æ¥çœ‹ï¼Œä¸æ–­æ€è€ƒç›´è‡³ç†è§£ã€‚è¿™å°±åƒçœ‹ä¹¦ä¸€æ ·ï¼Œä¼šéšç€å¾€åŽçœ‹çš„è¿‡ç¨‹ä¸­ï¼Œæ…¢æ…¢å¼€å§‹ç†è§£å‰é¢ä¸å¤ªæ˜Žç™½çš„åœ°æ–¹ã€‚ respository: ä»“åº“é€šå¸¸ç”¨äºŽç»„ç»‡ä¸€ä¸ªå·¥ç¨‹ï¼Œå¯ä»¥åŒ…å«ä»»ä½•ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œä½ çš„æƒ³æ³•ã€èµ„æºç”šè‡³å¯ä»¥åœ¨ä¸Šé¢ä¸Žå…¶ä»–äººåˆ†äº«å’Œè®¨è®ºã€‚ branch: åˆ†æ”¯å¯ä»¥è®©ä½ åœ¨åŒä¸€æ—¶é—´æ‹¥æœ‰åŒä¸€ä»“åº“çš„ä¸åŒç‰ˆæœ¬ï¼Œæ¯ä¸ªrespositoryéƒ½æœ‰ä¸€ä¸ªé»˜è®¤åˆ†æ”¯masterï¼Œä¸€èˆ¬ä½œä¸ºä¸»åˆ†æ”¯ã€‚åœ¨Githubä¸­ï¼Œbranchä¸€èˆ¬ç”¨æ¥ä¿®å¤bugå’Œåšäº›ã€‚åˆ†æ”¯æ˜¯Gitçš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ•´ä¸ªGithubæµå°±æ˜¯åŸºäºŽæ­¤å®žçŽ°ã€‚æœªæ¥çš„å·¥ä½œï¼Œå½“å®Œæˆè¿™äº›å·¥ä½œåŽï¼Œå°±ä¼šå°†å­åˆ†æ”¯åˆå¹¶åˆ°ä¸»åˆ†æ”¯é‡Œã€‚ pull request: æ‹‰è¯·æ±‚æ˜¯åœ¨Githubä¸Šåä½œçš„æ ¸å¿ƒï¼Œå½“ä½ æ‰“å¼€ä¸€ä¸ªæ‹‰è¯·æ±‚ï¼Œä½ æäº¤ä½ çš„æ”¹å˜å¹¶è¦æ±‚å…¶ä»–äººæŸ¥çœ‹ä½ æäº¤çš„ä¸œè¥¿å¹¶å°†å®ƒä»¬åˆå¹¶åˆ°ä»–ä»¬çš„åˆ†æ”¯ä¸­ã€‚æ‹‰è¯·æ±‚æ˜¾ç¤ºäº†æ¥è‡ªä¸¤ä¸ªåˆ†æ”¯çš„å†…å®¹çš„å·®å¼‚å’Œä¸åŒã€‚ åœ¨è¿™é‡Œç®€å•ä»‹ç»ä¸‹åœ¨Githubé‡Œæƒ³è¦è´¡çŒ®è‡ªå·±ä»£ç çš„æµç¨‹ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£pull requetï¼š 1.forkåˆ«äººçš„ä»“åº“ï¼Œç›¸å½“äºŽæ‹·è´ä¸€ä»½åˆ«äººçš„ä»£ç ï¼Œç„¶åŽcloneåˆ°æœ¬åœ°åˆ†æ”¯2.åšäº›bugä¿®å¤æˆ–æ·»åŠ æ–°åŠŸèƒ½ï¼Œç„¶åŽå‘èµ·pull requestç»™åŽŸä»“åº“ä½œè€…ï¼Œè®©ä»–çœ‹åˆ°ä½ çš„ä¿®æ”¹3.åŽŸä»“åº“ä½œè€…reviewè¿™äº›æ”¹å˜ï¼Œå¦‚æžœæ˜¯æ­£ç¡®çš„ï¼Œä»–å°±ä¼šå°†ä½ çš„è¿™äº›æ”¹å˜mergeåˆ°ä»–è‡ªå·±çš„åˆ†æ”¯ä¸­ è‡³æ­¤ï¼Œæ•´ä¸ªpull requestçš„è¿‡ç¨‹ç»“æŸï¼Œè¿™ä¹Ÿæ˜¯åœ¨Githubä¸Šä¸Žå…¶ä»–äººåä½œçš„æ ¸å¿ƒæµç¨‹ã€‚ 3.å…¶ä»– ä¹ å¾—ä»»ä½•æŠ€èƒ½çš„æœ€æ ¹æœ¬æŠ€å·§å°±æ˜¯é©¬ä¸Šå¼€å§‹åƒé‚£äº›å·²ç»ç²¾é€šè¿™ä¸ªæŠ€èƒ½çš„äººä¸€æ ·ç”Ÿæ´». æ‰€ä»¥è¯·ç»å¸¸ä½¿ç”¨Githubï¼Œæ²¡äº‹çš„æ—¶å€™ä¹Ÿåœ¨ä¸Šé¢é€›é€›ï¼Œä¹Ÿè®¸å°±æœ‰æ”¶èŽ·ã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†™åœ¨å¼€å§‹]]></title>
    <url>%2F2017%2F09%2F06%2F%E5%86%99%E5%9C%A8%E5%BC%80%E5%A7%8B%2F</url>
    <content type="text"><![CDATA[æ›¾ç»æƒ³ï¼Œæœ‰å°ç”µè„‘å°±å¼€å§‹å¥½å¥½å†™ä½œï¼Œæœ‰åŒè¿åŠ¨éž‹å°±å¼€å§‹å¥½å¥½è·‘æ­¥â€¦â€¦äºŽæ˜¯ä¸€å¤©ä¸€å¤©å°±è¿™ä¹ˆæ‹–ç€ï¼Œå› ä¸ºæ²¡ç”µè„‘æ²¡å¥½çš„è¿åŠ¨éž‹ï¼Œæ‰€ä»¥æ²¡å¼€å§‹è¡ŒåŠ¨ã€‚å°†å‡è®¾çš„å‰ææ²¡å®žçŽ°ï¼Œå½“åšè‡ªå·±ä¸è¡ŒåŠ¨çš„çš„ç†ç”±ã€‚æˆ‘æƒ³ç”Ÿæ´»åº”è¯¥æ˜¯ï¼Œå“ªæ€•æ®‹ç¼ºï¼Œä¹Ÿåº”è¯¥å³åˆ»å¼€å§‹å‡ºå‘ï¼Œä¸€æ­¥æ­¥å˜æˆè‡ªå·±ç†æƒ³çš„æ ·å­ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>åˆå¿ƒ</tag>
      </tags>
  </entry>
</search>
